<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Cesium å¼€å‘æ–‡æ¡£ | aoaYaoa</title><meta name="author" content="aoaYaoa"><meta name="copyright" content="aoaYaoa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Cesium å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—ğŸ“‹ ç›®å½• ç¦»çº¿ç¯å¢ƒé…ç½® Viewer è¯¦ç»†é…ç½® åæ ‡ç³»ç»Ÿè¯¦è§£ å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§ å½±åƒç³»ç»Ÿè¯¦è§£ åœ°å½¢ç³»ç»Ÿè¯¦è§£ ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§ äº‹ä»¶ç³»ç»Ÿè¯¦è§£ æè´¨ç³»ç»Ÿè¯¦è§£ åŠ¨ç”»ç³»ç»Ÿè¯¦è§£ å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£ åœºæ™¯æ§åˆ¶è¯¦è§£ æ•°æ®æºè¯¦è§£ æ—¶é—´ç³»ç»Ÿè¯¦è§£ ç»˜åˆ¶åŠŸèƒ½è¯¦è§£ æ€§èƒ½ä¼˜åŒ–è¯¦è§£  ç¦»çº¿ç¯å¢ƒé…ç½®å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½123456789101112131415161718# 1. ä¸‹è½½Cesiumå®Œæ•´åŒ…w">
<meta property="og:type" content="article">
<meta property="og:title" content="Cesium å¼€å‘æ–‡æ¡£">
<meta property="og:url" content="https://aoayaoa.github.io/2025/07/31/cesium/index.html">
<meta property="og:site_name" content="aoaYaoa">
<meta property="og:description" content="Cesium å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—ğŸ“‹ ç›®å½• ç¦»çº¿ç¯å¢ƒé…ç½® Viewer è¯¦ç»†é…ç½® åæ ‡ç³»ç»Ÿè¯¦è§£ å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§ å½±åƒç³»ç»Ÿè¯¦è§£ åœ°å½¢ç³»ç»Ÿè¯¦è§£ ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§ äº‹ä»¶ç³»ç»Ÿè¯¦è§£ æè´¨ç³»ç»Ÿè¯¦è§£ åŠ¨ç”»ç³»ç»Ÿè¯¦è§£ å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£ åœºæ™¯æ§åˆ¶è¯¦è§£ æ•°æ®æºè¯¦è§£ æ—¶é—´ç³»ç»Ÿè¯¦è§£ ç»˜åˆ¶åŠŸèƒ½è¯¦è§£ æ€§èƒ½ä¼˜åŒ–è¯¦è§£  ç¦»çº¿ç¯å¢ƒé…ç½®å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½123456789101112131415161718# 1. ä¸‹è½½Cesiumå®Œæ•´åŒ…w">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://aoayaoa.github.io/img/cesium.jpg">
<meta property="article:published_time" content="2025-07-30T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-08T02:51:24.572Z">
<meta property="article:author" content="aoaYaoa">
<meta property="article:tag" content="Cesium">
<meta property="article:tag" content="ä¸‰ç»´GIS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://aoayaoa.github.io/img/cesium.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Cesium å¼€å‘æ–‡æ¡£",
  "url": "https://aoayaoa.github.io/2025/07/31/cesium/",
  "image": "https://aoayaoa.github.io/img/cesium.jpg",
  "datePublished": "2025-07-30T16:00:00.000Z",
  "dateModified": "2025-08-08T02:51:24.572Z",
  "author": [
    {
      "@type": "Person",
      "name": "aoaYaoa",
      "url": "https://aoayaoa.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://aoayaoa.github.io/2025/07/31/cesium/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":150,"languages":{"author":"ä½œè€…: aoaYaoa","link":"é“¾æ¥: ","source":"æ¥æº: aoaYaoa","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Cesium å¼€å‘æ–‡æ¡£',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/base.css"><script src="/js/resources.js"></script><link rel="alternate" href="/atom.xml" title="aoaYaoa" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-book-open"></i><span> æ–‡ç« </span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-calendar-alt"></i><span> æ—¥å¸¸</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment-dots"></i><span> è¯´è¯´</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fas fa-compass"></i><span> èµ„æº</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/cesium.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/avatar.jpg" alt="Logo"><span class="site-name">aoaYaoa</span></a><a class="nav-page-title" href="/"><span class="site-name">Cesium å¼€å‘æ–‡æ¡£</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-book-open"></i><span> æ–‡ç« </span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-calendar-alt"></i><span> æ—¥å¸¸</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fas fa-comment-dots"></i><span> è¯´è¯´</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fas fa-compass"></i><span> èµ„æº</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Cesium å¼€å‘æ–‡æ¡£</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-07-30T16:00:00.000Z" title="å‘è¡¨äº 2025-07-31 00:00:00">2025-07-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-08-08T02:51:24.572Z" title="æ›´æ–°äº 2025-08-08 10:51:24">2025-08-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">29.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>140åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Cesium-å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—"><a href="#Cesium-å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—" class="headerlink" title="Cesium å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—"></a>Cesium å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—</h1><h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul>
<li><a href="#%E7%A6%BB%E7%BA%BF%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">ç¦»çº¿ç¯å¢ƒé…ç½®</a></li>
<li><a href="#viewer-%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE">Viewer è¯¦ç»†é…ç½®</a></li>
<li><a href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">åæ ‡ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E5%AE%9E%E4%BD%93%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E5%B1%9E%E6%80%A7">å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§</a></li>
<li><a href="#%E5%BD%B1%E5%83%8F%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">å½±åƒç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E5%9C%B0%E5%BD%A2%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">åœ°å½¢ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E7%9B%B8%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E5%B1%9E%E6%80%A7">ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§</a></li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">äº‹ä»¶ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E6%9D%90%E8%B4%A8%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">æè´¨ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E5%8A%A8%E7%94%BB%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">åŠ¨ç”»ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E5%87%A0%E4%BD%95%E4%BD%93%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E5%9C%BA%E6%99%AF%E6%8E%A7%E5%88%B6%E8%AF%A6%E8%A7%A3">åœºæ™¯æ§åˆ¶è¯¦è§£</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E8%AF%A6%E8%A7%A3">æ•°æ®æºè¯¦è§£</a></li>
<li><a href="#%E6%97%B6%E9%97%B4%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3">æ—¶é—´ç³»ç»Ÿè¯¦è§£</a></li>
<li><a href="#%E7%BB%98%E5%88%B6%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3">ç»˜åˆ¶åŠŸèƒ½è¯¦è§£</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E8%AF%A6%E8%A7%A3">æ€§èƒ½ä¼˜åŒ–è¯¦è§£</a></li>
</ul>
<h2 id="ç¦»çº¿ç¯å¢ƒé…ç½®"><a href="#ç¦»çº¿ç¯å¢ƒé…ç½®" class="headerlink" title="ç¦»çº¿ç¯å¢ƒé…ç½®"></a>ç¦»çº¿ç¯å¢ƒé…ç½®</h2><h3 id="å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½"><a href="#å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½" class="headerlink" title="å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½"></a>å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. ä¸‹è½½Cesiumå®Œæ•´åŒ…</span></span><br><span class="line">wget https://github.com/CesiumGS/cesium/releases/download/1.110/Cesium-1.110.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è§£å‹åˆ°é™æ€èµ„æºç›®å½•</span></span><br><span class="line">unzip Cesium-1.110.zip -d public/cesium/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. é¡¹ç›®ç»“æ„</span></span><br><span class="line">public/</span><br><span class="line">â”œâ”€â”€ cesium/</span><br><span class="line">â”‚   â”œâ”€â”€ Build/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Cesium/</span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ Cesium.js          <span class="comment"># ä¸»åº“æ–‡ä»¶</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ Widgets/</span><br><span class="line">â”‚   â”‚       â”‚   â””â”€â”€ widgets.css    <span class="comment"># æ ·å¼æ–‡ä»¶</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ Workers/           <span class="comment"># WebWorkeræ–‡ä»¶</span></span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ ThirdParty/        <span class="comment"># ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line">â”‚   â”‚       â””â”€â”€ Assets/            <span class="comment"># é™æ€èµ„æº</span></span><br><span class="line">â”‚   â””â”€â”€ Apps/                      <span class="comment"># ç¤ºä¾‹åº”ç”¨</span></span><br></pre></td></tr></table></figure>

<h3 id="Viteç¦»çº¿é…ç½®"><a href="#Viteç¦»çº¿é…ç½®" class="headerlink" title="Viteç¦»çº¿é…ç½®"></a>Viteç¦»çº¿é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js - ç¦»çº¿å¼€å‘é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">define</span>: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰å…¨å±€å¸¸é‡ï¼Œé¿å…Ionä¾èµ–</span></span><br><span class="line">    <span class="attr">CESIUM_BASE_URL</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="string">&#x27;/cesium/&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€èµ„æºå¤„ç†</span></span><br><span class="line">  <span class="attr">publicDir</span>: <span class="string">&#x27;public&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„å»ºé…ç½®</span></span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">      <span class="comment">// æ’é™¤ä¸éœ€è¦çš„ä¾èµ–</span></span><br><span class="line">      <span class="attr">external</span>: [<span class="string">&#x27;@cesium/engine&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¤åˆ¶Cesiumé™æ€èµ„æº</span></span><br><span class="line">      <span class="attr">input</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;index.html&#x27;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å‘æœåŠ¡å™¨é…ç½®</span></span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="comment">// é™æ€æ–‡ä»¶æœåŠ¡</span></span><br><span class="line">    <span class="attr">fs</span>: &#123;</span><br><span class="line">      <span class="attr">allow</span>: [<span class="string">&#x27;..&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼˜åŒ–é…ç½®</span></span><br><span class="line">  <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">    <span class="comment">// é¢„æ„å»ºCesium</span></span><br><span class="line">    <span class="attr">include</span>: [<span class="string">&#x27;cesium&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ç¦»çº¿åˆå§‹åŒ–"><a href="#ç¦»çº¿åˆå§‹åŒ–" class="headerlink" title="ç¦»çº¿åˆå§‹åŒ–"></a>ç¦»çº¿åˆå§‹åŒ–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js - ç¦»çº¿åˆå§‹åŒ–é…ç½®</span></span><br><span class="line"><span class="comment">// è®¾ç½®CesiumåŸºç¡€è·¯å¾„</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">CESIUM_BASE_URL</span> = <span class="string">&#x27;/cesium/Build/Cesium/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¦ç”¨IonæœåŠ¡ï¼ˆç¦»çº¿ç¯å¢ƒï¼‰</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&#x27;cesium&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦†ç›–Ioné»˜è®¤è®¾ç½®</span></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultServer</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¦»çº¿Vieweré…ç½®</span></span><br><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&#x27;cesiumContainer&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// å…³é—­æ‰€æœ‰åœ¨çº¿æœåŠ¡</span></span><br><span class="line">  <span class="attr">baseLayerPicker</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">geocoder</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ç¦»çº¿å½±åƒ</span></span><br><span class="line">  <span class="attr">imageryProvider</span>: <span class="literal">false</span>, <span class="comment">// ä¸åŠ è½½é»˜è®¤å½±åƒ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨æœ¬åœ°åœ°å½¢</span></span><br><span class="line">  <span class="attr">terrainProvider</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidTerrainProvider</span>(),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Viewer-è¯¦ç»†é…ç½®"><a href="#Viewer-è¯¦ç»†é…ç½®" class="headerlink" title="Viewer è¯¦ç»†é…ç½®"></a>Viewer è¯¦ç»†é…ç½®</h2><h3 id="æ„é€ å‡½æ•°å®Œæ•´å‚æ•°"><a href="#æ„é€ å‡½æ•°å®Œæ•´å‚æ•°" class="headerlink" title="æ„é€ å‡½æ•°å®Œæ•´å‚æ•°"></a>æ„é€ å‡½æ•°å®Œæ•´å‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(container, &#123;</span><br><span class="line">  <span class="comment">// === åŸºç¡€æ¸²æŸ“é€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// animation: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶æ—¶é—´åŠ¨ç”»æ§ä»¶çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç¦»çº¿å»ºè®®: falseï¼ˆå‡å°‘UIå¤æ‚åº¦ï¼‰</span></span><br><span class="line">  <span class="attr">animation</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// baseLayerPicker: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶å›¾å±‚é€‰æ‹©å™¨çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç¦»çº¿å»ºè®®: falseï¼ˆé¿å…åœ¨çº¿å›¾å±‚ä¾èµ–ï¼‰</span></span><br><span class="line">  <span class="attr">baseLayerPicker</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fullscreenButton: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶å…¨å±æŒ‰é’®çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: å…è®¸ç”¨æˆ·å…¨å±æŸ¥çœ‹åœ°å›¾</span></span><br><span class="line">  <span class="attr">fullscreenButton</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// geocoder: boolean | GeocoderService[]</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶åœ°å€æœç´¢æ¡†çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç¦»çº¿å»ºè®®: falseï¼ˆéœ€è¦åœ¨çº¿æœåŠ¡ï¼‰</span></span><br><span class="line">  <span class="attr">geocoder</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// homeButton: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶ä¸»é¡µæŒ‰é’®çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: é‡ç½®åˆ°åˆå§‹è§†è§’</span></span><br><span class="line">  <span class="attr">homeButton</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// infoBox: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶ä¿¡æ¯æ¡†çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ˜¾ç¤ºå®ä½“è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">infoBox</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// sceneModePicker: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶åœºæ™¯æ¨¡å¼é€‰æ‹©å™¨ï¼ˆ3D/2D/Columbusï¼‰</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: åˆ‡æ¢ä¸åŒçš„æŸ¥çœ‹æ¨¡å¼</span></span><br><span class="line">  <span class="attr">sceneModePicker</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// selectionIndicator: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶é€‰æ‹©æŒ‡ç¤ºå™¨ï¼ˆç»¿è‰²æ¡†ï¼‰</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ˜¾ç¤ºé€‰ä¸­å®ä½“çš„è¾¹ç•Œæ¡†</span></span><br><span class="line">  <span class="attr">selectionIndicator</span>: <span class="literal">false</span>, <span class="comment">// é€šå¸¸å…³é—­ä»¥è·å¾—æ›´å¥½çš„è§†è§‰æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// timeline: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶æ—¶é—´è½´çš„æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶æ—¶é—´ç›¸å…³çš„åŠ¨ç”»</span></span><br><span class="line">  <span class="attr">timeline</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// navigationHelpButton: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶å¯¼èˆªå¸®åŠ©æŒ‰é’®</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ˜¾ç¤ºé¼ æ ‡/è§¦æ‘¸æ“ä½œè¯´æ˜</span></span><br><span class="line">  <span class="attr">navigationHelpButton</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// navigationInstructionsInitiallyVisible: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ§åˆ¶å¯¼èˆªè¯´æ˜çš„åˆå§‹å¯è§æ€§</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: é¡µé¢åŠ è½½æ—¶æ˜¯å¦æ˜¾ç¤ºæ“ä½œè¯´æ˜</span></span><br><span class="line">  <span class="attr">navigationInstructionsInitiallyVisible</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === åœºæ™¯æ¸²æŸ“é€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// scene3DOnly: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦åªæ”¯æŒ3Dæ¨¡å¼</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: ç¦ç”¨2Då’ŒColumbusæ¨¡å¼ä»¥æå‡æ€§èƒ½</span></span><br><span class="line">  <span class="attr">scene3DOnly</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// shouldAnimate: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨åŠ¨ç”»</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶æ—¶é—´åŠ¨ç”»çš„æ’­æ”¾</span></span><br><span class="line">  <span class="attr">shouldAnimate</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// clockViewModel: ClockViewModel</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ—¶é’Ÿè§†å›¾æ¨¡å‹</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: new ClockViewModel(clock)</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶æ—¶é—´å’ŒåŠ¨ç”»</span></span><br><span class="line">  <span class="attr">clockViewModel</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ClockViewModel</span>(<span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Clock</span>()),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// selectedImageryProviderViewModel: ProviderViewModel</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: é»˜è®¤é€‰ä¸­çš„å½±åƒæä¾›è€…</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: è®¾ç½®åˆå§‹å½±åƒå›¾å±‚</span></span><br><span class="line">  <span class="attr">selectedImageryProviderViewModel</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// imageryProviderViewModels: ProviderViewModel[]</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å¯ç”¨çš„å½±åƒæä¾›è€…åˆ—è¡¨</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: createDefaultImageryProviderViewModels()</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: å›¾å±‚é€‰æ‹©å™¨ä¸­çš„é€‰é¡¹</span></span><br><span class="line">  <span class="attr">imageryProviderViewModels</span>: [],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// selectedTerrainProviderViewModel: ProviderViewModel</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: é»˜è®¤é€‰ä¸­çš„åœ°å½¢æä¾›è€…</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: è®¾ç½®åˆå§‹åœ°å½¢</span></span><br><span class="line">  <span class="attr">selectedTerrainProviderViewModel</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// terrainProviderViewModels: ProviderViewModel[]</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å¯ç”¨çš„åœ°å½¢æä¾›è€…åˆ—è¡¨</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: createDefaultTerrainProviderViewModels()</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: åœ°å½¢é€‰æ‹©å™¨ä¸­çš„é€‰é¡¹</span></span><br><span class="line">  <span class="attr">terrainProviderViewModels</span>: [],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === æ¸²æŸ“å™¨é€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// imageryProvider: ImageryProvider | false</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å½±åƒæä¾›è€…</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: createWorldImagery()</span></span><br><span class="line">  <span class="comment">// ç¦»çº¿è®¾ç½®: è‡ªå®šä¹‰ç¦»çº¿å½±åƒæˆ–false</span></span><br><span class="line">  <span class="attr">imageryProvider</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">OpenStreetMapImageryProvider</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://tile.openstreetmap.org/&#x27;</span>, <span class="comment">// æˆ–æœ¬åœ°ç“¦ç‰‡æœåŠ¡</span></span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// terrainProvider: TerrainProvider</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: åœ°å½¢æä¾›è€…</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: new EllipsoidTerrainProvider()</span></span><br><span class="line">  <span class="comment">// ç¦»çº¿è®¾ç½®: EllipsoidTerrainProviderï¼ˆæ¤­çƒåœ°å½¢ï¼‰</span></span><br><span class="line">  <span class="attr">terrainProvider</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidTerrainProvider</span>(),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// skyBox: SkyBox | false</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å¤©ç©ºç›’</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨é»˜è®¤å¤©ç©ºï¼‰</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: è‡ªå®šä¹‰å¤©ç©ºèƒŒæ™¯</span></span><br><span class="line">  <span class="attr">skyBox</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SkyBox</span>(&#123;</span><br><span class="line">    <span class="attr">sources</span>: &#123;</span><br><span class="line">      <span class="attr">positiveX</span>: <span class="string">&#x27;path/to/skybox_px.jpg&#x27;</span>,</span><br><span class="line">      <span class="attr">negativeX</span>: <span class="string">&#x27;path/to/skybox_nx.jpg&#x27;</span>,</span><br><span class="line">      <span class="attr">positiveY</span>: <span class="string">&#x27;path/to/skybox_py.jpg&#x27;</span>,</span><br><span class="line">      <span class="attr">negativeY</span>: <span class="string">&#x27;path/to/skybox_ny.jpg&#x27;</span>,</span><br><span class="line">      <span class="attr">positiveZ</span>: <span class="string">&#x27;path/to/skybox_pz.jpg&#x27;</span>,</span><br><span class="line">      <span class="attr">negativeZ</span>: <span class="string">&#x27;path/to/skybox_nz.jpg&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// skyAtmosphere: SkyAtmosphere | false</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å¤©ç©ºå¤§æ°”æ•ˆæœ</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨é»˜è®¤å¤§æ°”ï¼‰</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶å¤§æ°”æ•£å°„æ•ˆæœ</span></span><br><span class="line">  <span class="attr">skyAtmosphere</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SkyAtmosphere</span>(),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === é«˜çº§æ¸²æŸ“é€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// shadows: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨é˜´å½±</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">  <span class="comment">// æ€§èƒ½å½±å“: è¾ƒå¤§</span></span><br><span class="line">  <span class="attr">shadows</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// terrainShadows: ShadowMode</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: åœ°å½¢é˜´å½±æ¨¡å¼</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: ShadowMode.RECEIVE_ONLY</span></span><br><span class="line">  <span class="comment">// é€‰é¡¹: DISABLED, ENABLED, CAST_ONLY, RECEIVE_ONLY</span></span><br><span class="line">  <span class="attr">terrainShadows</span>: <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">ENABLED</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mapMode2D: MapMode2D</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: 2Dåœ°å›¾æ¨¡å¼</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: MapMode2D.INFINITE_SCROLL</span></span><br><span class="line">  <span class="comment">// é€‰é¡¹: INFINITE_SCROLL, ROTATE</span></span><br><span class="line">  <span class="attr">mapMode2D</span>: <span class="title class_">Cesium</span>.<span class="property">MapMode2D</span>.<span class="property">INFINITE_SCROLL</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// projectionPicker: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æŠ•å½±é€‰æ‹©å™¨</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: åœ¨2Dæ¨¡å¼ä¸‹é€‰æ‹©æŠ•å½±æ–¹å¼</span></span><br><span class="line">  <span class="attr">projectionPicker</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// requestRenderMode: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æŒ‰éœ€æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">  <span class="comment">// æ€§èƒ½ä¼˜åŒ–: åªåœ¨éœ€è¦æ—¶æ¸²æŸ“</span></span><br><span class="line">  <span class="attr">requestRenderMode</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// maximumRenderTimeChange: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æœ€å¤§æ¸²æŸ“æ—¶é—´å˜åŒ–ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶æŒ‰éœ€æ¸²æŸ“çš„è§¦å‘é˜ˆå€¼</span></span><br><span class="line">  <span class="attr">maximumRenderTimeChange</span>: <span class="number">0.0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === WebGLé€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// contextOptions: Object</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: WebGLä¸Šä¸‹æ–‡é€‰é¡¹</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: æ§åˆ¶WebGLä¸Šä¸‹æ–‡åˆ›å»º</span></span><br><span class="line">  <span class="attr">contextOptions</span>: &#123;</span><br><span class="line">    <span class="attr">webgl</span>: &#123;</span><br><span class="line">      <span class="attr">alpha</span>: <span class="literal">false</span>, <span class="comment">// é€æ˜åº¦é€šé“</span></span><br><span class="line">      <span class="attr">depth</span>: <span class="literal">true</span>, <span class="comment">// æ·±åº¦ç¼“å†²</span></span><br><span class="line">      <span class="attr">stencil</span>: <span class="literal">false</span>, <span class="comment">// æ¨¡æ¿ç¼“å†²</span></span><br><span class="line">      <span class="attr">antialias</span>: <span class="literal">true</span>, <span class="comment">// æŠ—é”¯é½¿</span></span><br><span class="line">      <span class="attr">premultipliedAlpha</span>: <span class="literal">true</span>, <span class="comment">// é¢„ä¹˜alpha</span></span><br><span class="line">      <span class="attr">preserveDrawingBuffer</span>: <span class="literal">false</span>, <span class="comment">// ä¿ç•™ç»˜å›¾ç¼“å†²</span></span><br><span class="line">      <span class="attr">powerPreference</span>: <span class="string">&#x27;high-performance&#x27;</span>, <span class="comment">// æ€§èƒ½åå¥½</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useDefaultRenderLoop: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦ä½¿ç”¨é»˜è®¤æ¸²æŸ“å¾ªç¯</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// é«˜çº§ç”¨é€”: è‡ªå®šä¹‰æ¸²æŸ“å¾ªç¯</span></span><br><span class="line">  <span class="attr">useDefaultRenderLoop</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// targetFrameRate: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç›®æ ‡å¸§ç‡</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// æ€§èƒ½æ§åˆ¶: é™åˆ¶æ¸²æŸ“å¸§ç‡</span></span><br><span class="line">  <span class="attr">targetFrameRate</span>: <span class="number">60</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// showRenderLoopErrors: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºæ¸²æŸ“å¾ªç¯é”™è¯¯</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// è°ƒè¯•ç”¨é€”: é”™è¯¯ä¿¡æ¯æ˜¾ç¤º</span></span><br><span class="line">  <span class="attr">showRenderLoopErrors</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// automaticallyTrackDataSourceClocks: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦è‡ªåŠ¨è·Ÿè¸ªæ•°æ®æºæ—¶é’Ÿ</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// æ—¶é—´æ§åˆ¶: æ•°æ®æºæ—¶é—´åŒæ­¥</span></span><br><span class="line">  <span class="attr">automaticallyTrackDataSourceClocks</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === è¾“å…¥æ§åˆ¶é€‰é¡¹ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// enableCollisionDetection: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨ç¢°æ’æ£€æµ‹</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: ç›¸æœºä¸åœ°å½¢çš„ç¢°æ’æ£€æµ‹</span></span><br><span class="line">  <span class="attr">enableCollisionDetection</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useBrowserRecommendedResolution: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦ä½¿ç”¨æµè§ˆå™¨æ¨èåˆ†è¾¨ç‡</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// æ€§èƒ½å½±å“: é«˜åˆ†è¾¨ç‡æ˜¾ç¤ºå™¨çš„æ€§èƒ½</span></span><br><span class="line">  <span class="attr">useBrowserRecommendedResolution</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// orderIndependentTranslucency: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: é¡ºåºæ— å…³é€æ˜åº¦</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// æ¸²æŸ“è´¨é‡: é€æ˜ç‰©ä½“çš„æ¸²æŸ“è´¨é‡</span></span><br><span class="line">  <span class="attr">orderIndependentTranslucency</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// creditContainer: Element | string</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç‰ˆæƒä¿¡æ¯å®¹å™¨</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: è‡ªå®šä¹‰ç‰ˆæƒä¿¡æ¯æ˜¾ç¤ºä½ç½®</span></span><br><span class="line">  <span class="attr">creditContainer</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// creditViewport: Element | string</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç‰ˆæƒä¿¡æ¯è§†å£</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: ç‰ˆæƒä¿¡æ¯çš„æ˜¾ç¤ºåŒºåŸŸ</span></span><br><span class="line">  <span class="attr">creditViewport</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// dataSources: DataSourceCollection</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ•°æ®æºé›†åˆ</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: new DataSourceCollection()</span></span><br><span class="line">  <span class="comment">// ç”¨é€”: é¢„è®¾çš„æ•°æ®æº</span></span><br><span class="line">  <span class="attr">dataSources</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">DataSourceCollection</span>(),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// clock: Clock</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ—¶é’Ÿå¯¹è±¡</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: new Clock()</span></span><br><span class="line">  <span class="comment">// æ—¶é—´æ§åˆ¶: åœºæ™¯æ—¶é—´ç®¡ç†</span></span><br><span class="line">  <span class="attr">clock</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Clock</span>(),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// blurActiveElementOnCanvasFocus: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç”»å¸ƒè·å¾—ç„¦ç‚¹æ—¶æ˜¯å¦æ¨¡ç³Šæ´»åŠ¨å…ƒç´ </span></span><br><span class="line">  <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">  <span class="comment">// UIæ§åˆ¶: ç„¦ç‚¹ç®¡ç†</span></span><br><span class="line">  <span class="attr">blurActiveElementOnCanvasFocus</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// msaaSamples: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: MSAAé‡‡æ ·æ•°é‡</span></span><br><span class="line">  <span class="comment">// é»˜è®¤: 1</span></span><br><span class="line">  <span class="comment">// æŠ—é”¯é½¿: å¤šé‡é‡‡æ ·æŠ—é”¯é½¿</span></span><br><span class="line">  <span class="attr">msaaSamples</span>: <span class="number">4</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="åæ ‡ç³»ç»Ÿè¯¦è§£"><a href="#åæ ‡ç³»ç»Ÿè¯¦è§£" class="headerlink" title="åæ ‡ç³»ç»Ÿè¯¦è§£"></a>åæ ‡ç³»ç»Ÿè¯¦è§£</h2><h3 id="Cartesian3-ç¬›å¡å°”åæ ‡ç³»"><a href="#Cartesian3-ç¬›å¡å°”åæ ‡ç³»" class="headerlink" title="Cartesian3 ç¬›å¡å°”åæ ‡ç³»"></a>Cartesian3 ç¬›å¡å°”åæ ‡ç³»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cartesian3 - 3Dç¬›å¡å°”åæ ‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cartesian3</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x = <span class="number">0.0</span>, y = <span class="number">0.0</span>, z = <span class="number">0.0</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x <span class="comment">// Xè½´åæ ‡ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y <span class="comment">// Yè½´åæ ‡ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">z</span> = z <span class="comment">// Zè½´åæ ‡ï¼ˆç±³ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromDegrees - ä»ç»çº¬åº¦åˆ›å»º</span></span><br><span class="line">  <span class="comment">// longitude: ç»åº¦ï¼ˆåº¦ï¼‰</span></span><br><span class="line">  <span class="comment">// latitude: çº¬åº¦ï¼ˆåº¦ï¼‰</span></span><br><span class="line">  <span class="comment">// height: é«˜åº¦ï¼ˆç±³ï¼Œå¯é€‰ï¼Œé»˜è®¤0ï¼‰</span></span><br><span class="line">  <span class="comment">// ellipsoid: æ¤­çƒä½“ï¼ˆå¯é€‰ï¼Œé»˜è®¤WGS84ï¼‰</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromDegrees</span>(<span class="params">longitude, latitude, height = <span class="number">0</span>, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(longitude, latitude, height, ellipsoid)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromRadians - ä»å¼§åº¦åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromRadians</span>(<span class="params">longitude, latitude, height = <span class="number">0</span>, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromRadians</span>(longitude, latitude, height, ellipsoid)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromDegreesArray - ä»ç»çº¬åº¦æ•°ç»„åˆ›å»º</span></span><br><span class="line">  <span class="comment">// coordinates: [lon1, lat1, lon2, lat2, ...]</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromDegreesArray</span>(<span class="params">coordinates, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(coordinates, ellipsoid)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromDegreesArrayHeights - ä»ç»çº¬åº¦é«˜åº¦æ•°ç»„åˆ›å»º</span></span><br><span class="line">  <span class="comment">// coordinates: [lon1, lat1, height1, lon2, lat2, height2, ...]</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromDegreesArrayHeights</span>(<span class="params">coordinates, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArrayHeights</span>(coordinates, ellipsoid)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®ä¾‹æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// clone - å…‹éš†</span></span><br><span class="line">  <span class="title function_">clone</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// equals - æ¯”è¾ƒç›¸ç­‰</span></span><br><span class="line">  <span class="title function_">equals</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">equals</span>(<span class="variable language_">this</span>, other)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// distance - è®¡ç®—è·ç¦»</span></span><br><span class="line">  <span class="title function_">distanceTo</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">distance</span>(<span class="variable language_">this</span>, other)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// normalize - æ ‡å‡†åŒ–</span></span><br><span class="line">  <span class="title function_">normalize</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">normalize</span>(<span class="variable language_">this</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// magnitude - è®¡ç®—å‘é‡é•¿åº¦</span></span><br><span class="line">  <span class="title function_">magnitude</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">magnitude</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add - å‘é‡åŠ æ³•</span></span><br><span class="line">  <span class="title function_">add</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>, other, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// subtract - å‘é‡å‡æ³•</span></span><br><span class="line">  <span class="title function_">subtract</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">subtract</span>(<span class="variable language_">this</span>, other, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// multiplyByScalar - æ ‡é‡ä¹˜æ³•</span></span><br><span class="line">  <span class="title function_">multiplyByScalar</span>(<span class="params">scalar</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">multiplyByScalar</span>(<span class="variable language_">this</span>, scalar, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// dot - ç‚¹ç§¯</span></span><br><span class="line">  <span class="title function_">dot</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">dot</span>(<span class="variable language_">this</span>, other)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cross - å‰ç§¯</span></span><br><span class="line">  <span class="title function_">cross</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">cross</span>(<span class="variable language_">this</span>, other, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> position = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">1000000</span>, <span class="number">2000000</span>, <span class="number">3000000</span>)</span><br><span class="line"><span class="keyword">const</span> beijingPosition = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">100</span>)</span><br><span class="line"><span class="keyword">const</span> positions = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([</span><br><span class="line">  <span class="number">116.4074</span>,</span><br><span class="line">  <span class="number">39.9042</span>, <span class="comment">// åŒ—äº¬</span></span><br><span class="line">  <span class="number">121.4737</span>,</span><br><span class="line">  <span class="number">31.2304</span>, <span class="comment">// ä¸Šæµ·</span></span><br><span class="line">  <span class="number">113.2644</span>,</span><br><span class="line">  <span class="number">23.1291</span>, <span class="comment">// å¹¿å·</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h3 id="Cartographic-åœ°ç†åæ ‡ç³»"><a href="#Cartographic-åœ°ç†åæ ‡ç³»" class="headerlink" title="Cartographic åœ°ç†åæ ‡ç³»"></a>Cartographic åœ°ç†åæ ‡ç³»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cartographic - åœ°ç†åæ ‡ï¼ˆç»çº¬åº¦ï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cartographic</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">longitude = <span class="number">0.0</span>, latitude = <span class="number">0.0</span>, height = <span class="number">0.0</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">longitude</span> = longitude <span class="comment">// ç»åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">latitude</span> = latitude <span class="comment">// çº¬åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height <span class="comment">// é«˜åº¦ï¼ˆç±³ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromDegrees - ä»åº¦æ•°åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromDegrees</span>(<span class="params">longitude, latitude, height = <span class="number">0.0</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartographic</span>(</span><br><span class="line">      <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(longitude),</span><br><span class="line">      <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(latitude),</span><br><span class="line">      height,</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromRadians - ä»å¼§åº¦åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromRadians</span>(<span class="params">longitude, latitude, height = <span class="number">0.0</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartographic</span>(longitude, latitude, height)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromCartesian - ä»ç¬›å¡å°”åæ ‡åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromCartesian</span>(<span class="params">cartesian, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(cartesian, ellipsoid)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®ä¾‹æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// toLongitudeLatitude - è½¬æ¢ä¸ºç»çº¬åº¦ï¼ˆåº¦ï¼‰</span></span><br><span class="line">  <span class="title function_">toLongitudeLatitude</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">longitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(<span class="variable language_">this</span>.<span class="property">longitude</span>),</span><br><span class="line">      <span class="attr">latitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(<span class="variable language_">this</span>.<span class="property">latitude</span>),</span><br><span class="line">      <span class="attr">height</span>: <span class="variable language_">this</span>.<span class="property">height</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// clone - å…‹éš†</span></span><br><span class="line">  <span class="title function_">clone</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// equals - æ¯”è¾ƒç›¸ç­‰</span></span><br><span class="line">  <span class="title function_">equals</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">equals</span>(<span class="variable language_">this</span>, other)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">100</span>)</span><br><span class="line"><span class="keyword">const</span> cartesian = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">100</span>)</span><br><span class="line"><span class="keyword">const</span> backToCartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(cartesian)</span><br></pre></td></tr></table></figure>

<h3 id="Matrix4-å˜æ¢çŸ©é˜µ"><a href="#Matrix4-å˜æ¢çŸ©é˜µ" class="headerlink" title="Matrix4 å˜æ¢çŸ©é˜µ"></a>Matrix4 å˜æ¢çŸ©é˜µ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Matrix4 - 4x4å˜æ¢çŸ©é˜µ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Matrix4</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 16ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ŒæŒ‰åˆ—ä¼˜å…ˆå­˜å‚¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">elements</span> = [</span><br><span class="line">      <span class="number">1</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>, <span class="comment">// ç¬¬ä¸€åˆ—</span></span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">1</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>, <span class="comment">// ç¬¬äºŒåˆ—</span></span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">1</span>,</span><br><span class="line">      <span class="number">0</span>, <span class="comment">// ç¬¬ä¸‰åˆ—</span></span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">1</span>, <span class="comment">// ç¬¬å››åˆ—</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€åˆ›å»ºæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// IDENTITY - å•ä½çŸ©é˜µ</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">IDENTITY</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromTranslation - ä»å¹³ç§»åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromTranslation</span>(<span class="params">translation</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromTranslation</span>(translation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromScale - ä»ç¼©æ”¾åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromScale</span>(<span class="params">scale</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromScale</span>(scale)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromRotationTranslation - ä»æ—‹è½¬å’Œå¹³ç§»åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromRotationTranslation</span>(<span class="params">rotation, translation</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromRotationTranslation</span>(rotation, translation)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å˜æ¢æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// multiplyByPoint - ä¹˜ä»¥ç‚¹</span></span><br><span class="line">  <span class="title function_">multiplyByPoint</span>(<span class="params">point</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByPoint</span>(<span class="variable language_">this</span>, point, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// multiplyByVector - ä¹˜ä»¥å‘é‡</span></span><br><span class="line">  <span class="title function_">multiplyByVector</span>(<span class="params">vector</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByVector</span>(<span class="variable language_">this</span>, vector, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian4</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// multiply - çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">  <span class="title function_">multiply</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiply</span>(<span class="variable language_">this</span>, other, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// inverse - æ±‚é€†çŸ©é˜µ</span></span><br><span class="line">  <span class="title function_">inverse</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">inverse</span>(<span class="variable language_">this</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// transpose - è½¬ç½®</span></span><br><span class="line">  <span class="title function_">transpose</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">transpose</span>(<span class="variable language_">this</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> translation = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>)</span><br><span class="line"><span class="keyword">const</span> translationMatrix = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromTranslation</span>(translation)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scale = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> scaleMatrix = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromScale</span>(scale)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rotation = <span class="title class_">Cesium</span>.<span class="property">Matrix3</span>.<span class="title function_">fromRotationZ</span>(<span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">45</span>))</span><br><span class="line"><span class="keyword">const</span> rotationMatrix = <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">fromRotation</span>(rotation)</span><br></pre></td></tr></table></figure>

<h2 id="å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§"><a href="#å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§" class="headerlink" title="å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§"></a>å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§</h2><h3 id="Entity-åŸºç¡€å®ä½“"><a href="#Entity-åŸºç¡€å®ä½“" class="headerlink" title="Entity åŸºç¡€å®ä½“"></a>Entity åŸºç¡€å®ä½“</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Entity - åŸºç¡€å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Entity</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// === åŸºç¡€å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// id: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: è‡ªåŠ¨ç”ŸæˆUUID</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æŸ¥æ‰¾ã€æ›´æ–°ã€åˆ é™¤å®ä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = options.<span class="property">id</span> || <span class="title class_">Cesium</span>.<span class="title function_">createGuid</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// name: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„æ˜¾ç¤ºåç§°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: InfoBoxæ ‡é¢˜ã€æ ‡ç­¾æ–‡æœ¬</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = options.<span class="property">name</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// availability: TimeIntervalCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„å¯ç”¨æ—¶é—´é—´éš”</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆå§‹ç»ˆå¯ç”¨ï¼‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ—¶é—´åŠ¨ç”»ä¸­çš„æ˜¾ç¤ºæ§åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">availability</span> = options.<span class="property">availability</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶å®ä½“çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ˜¾ç¤º/éšè—å®ä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// description: string | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: InfoBoxçš„å†…å®¹</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">description</span> = options.<span class="property">description</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// position: PositionProperty</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„ä½ç½®</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç±»å‹: Cartesian3 | PositionProperty</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">position</span> = options.<span class="property">position</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// orientation: Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“çš„æ–¹å‘ï¼ˆå››å…ƒæ•°ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç±»å‹: Quaternion | Property</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">orientation</span> = options.<span class="property">orientation</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// viewFrom: Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºè§‚å¯Ÿå®ä½“æ—¶çš„ç›¸å¯¹ä½ç½®</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç±»å‹: Cartesian3 | Property</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewFrom</span> = options.<span class="property">viewFrom</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// parent: Entity</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çˆ¶å®ä½“ï¼ˆç”¨äºå±‚æ¬¡ç»“æ„ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: å®ä½“çš„çˆ¶å­å…³ç³»</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">parent</span> = options.<span class="property">parent</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === å›¾å½¢å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// billboard: BillboardGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œå›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">billboard</span> = options.<span class="property">billboard</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// box: BoxGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›’å­å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">box</span> = options.<span class="property">box</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// corridor: CorridorGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èµ°å»Šå›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">corridor</span> = options.<span class="property">corridor</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// cylinder: CylinderGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ†æŸ±ä½“å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cylinder</span> = options.<span class="property">cylinder</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ellipse: EllipseGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­åœ†å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ellipse</span> = options.<span class="property">ellipse</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ellipsoid: EllipsoidGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ellipsoid</span> = options.<span class="property">ellipsoid</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// label: LabelGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡ç­¾å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">label</span> = options.<span class="property">label</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// model: ModelGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: 3Dæ¨¡å‹å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">model</span> = options.<span class="property">model</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// tileset: Cesium3DTilesetGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: 3Dç“¦ç‰‡é›†å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tileset</span> = options.<span class="property">tileset</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// path: PathGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·¯å¾„å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">path</span> = options.<span class="property">path</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// plane: PlaneGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹³é¢å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">plane</span> = options.<span class="property">plane</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// point: PointGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‚¹å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">point</span> = options.<span class="property">point</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// polygon: PolygonGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šè¾¹å½¢å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">polygon</span> = options.<span class="property">polygon</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// polyline: PolylineGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šæ®µçº¿å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">polyline</span> = options.<span class="property">polyline</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// polylineVolume: PolylineVolumeGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šæ®µçº¿ä½“ç§¯å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">polylineVolume</span> = options.<span class="property">polylineVolume</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// rectangle: RectangleGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çŸ©å½¢å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rectangle</span> = options.<span class="property">rectangle</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// wall: WallGraphics</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¢™ä½“å›¾å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">wall</span> = options.<span class="property">wall</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// computeModelMatrix - è®¡ç®—æ¨¡å‹çŸ©é˜µ</span></span><br><span class="line">  <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">  <span class="comment">// result: Matrix4 - ç»“æœçŸ©é˜µ</span></span><br><span class="line">  <span class="title function_">computeModelMatrix</span>(<span class="params">time, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Entity</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">computeModelMatrix</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, time, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isShowing - æ˜¯å¦æ­£åœ¨æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">  <span class="title function_">isShowing</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">show</span> &amp;&amp; (!<span class="variable language_">this</span>.<span class="property">availability</span> || <span class="variable language_">this</span>.<span class="property">availability</span>.<span class="title function_">contains</span>(time))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isAvailable - æ˜¯å¦å¯ç”¨</span></span><br><span class="line">  <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">  <span class="title function_">isAvailable</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="variable language_">this</span>.<span class="property">availability</span> || <span class="variable language_">this</span>.<span class="property">availability</span>.<span class="title function_">contains</span>(time)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä½“ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> entity = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Entity</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;beijing-marker&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;åŒ—äº¬æ ‡è®°&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div style=&quot;padding: 10px;&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;h3&gt;åŒ—äº¬å¸‚&lt;/h3&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;ä¸­åäººæ°‘å…±å’Œå›½é¦–éƒ½&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;äººå£: 2154ä¸‡&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;é¢ç§¯: 16410.54å¹³æ–¹å…¬é‡Œ&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">availability</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeIntervalCollection</span>([</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">      <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-01-01&#x27;</span>)),</span><br><span class="line">      <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2024-12-31&#x27;</span>)),</span><br><span class="line">    &#125;),</span><br><span class="line">  ]),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="BillboardGraphics-å¹¿å‘Šç‰Œå›¾å½¢"><a href="#BillboardGraphics-å¹¿å‘Šç‰Œå›¾å½¢" class="headerlink" title="BillboardGraphics å¹¿å‘Šç‰Œå›¾å½¢"></a>BillboardGraphics å¹¿å‘Šç‰Œå›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BillboardGraphics - å¹¿å‘Šç‰Œå›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BillboardGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶å¹¿å‘Šç‰Œçš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// image: string | HTMLCanvasElement | HTMLVideoElement | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œçš„å›¾åƒ</span></span><br><span class="line">    <span class="comment">// æ”¯æŒ: URLã€Canvasã€Videoã€Data URL</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">image</span> = options.<span class="property">image</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scale: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œçš„ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="comment">// èŒƒå›´: 0.0 - ä»»æ„æ­£æ•°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scale</span> = options.<span class="property">scale</span> !== <span class="literal">undefined</span> ? options.<span class="property">scale</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pixelOffset: Cartesian2 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åƒç´ åç§»é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian2.ZERO</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: å¾®è°ƒå¹¿å‘Šç‰Œä½ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pixelOffset</span> = options.<span class="property">pixelOffset</span> || <span class="title class_">Cesium</span>.<span class="property">Cartesian2</span>.<span class="property">ZERO</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// eyeOffset: Cartesian3 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çœ¼éƒ¨åç§»é‡ï¼ˆç›¸æœºç©ºé—´ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3.ZERO</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ·±åº¦æ§åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eyeOffset</span> = options.<span class="property">eyeOffset</span> || <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="property">ZERO</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// horizontalOrigin: HorizontalOrigin | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ°´å¹³å¯¹é½æ–¹å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HorizontalOrigin.CENTER</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: LEFT, CENTER, RIGHT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">horizontalOrigin</span> = options.<span class="property">horizontalOrigin</span> || <span class="title class_">Cesium</span>.<span class="property">HorizontalOrigin</span>.<span class="property">CENTER</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// verticalOrigin: VerticalOrigin | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‚ç›´å¯¹é½æ–¹å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VerticalOrigin.CENTER</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: BOTTOM, BASELINE, CENTER, TOP</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">verticalOrigin</span> = options.<span class="property">verticalOrigin</span> || <span class="title class_">Cesium</span>.<span class="property">VerticalOrigin</span>.<span class="property">CENTER</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: NONE, CLAMP_TO_GROUND, RELATIVE_TO_GROUND</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// color: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œé¢œè‰²ï¼ˆä¸å›¾åƒæ··åˆï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = options.<span class="property">color</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// rotation: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="comment">// æ­£å€¼: é€†æ—¶é’ˆæ—‹è½¬</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rotation</span> = options.<span class="property">rotation</span> !== <span class="literal">undefined</span> ? options.<span class="property">rotation</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// alignedAxis: Cartesian3 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¯¹é½è½´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3.ZEROï¼ˆè‡ªåŠ¨å¯¹é½åˆ°å±å¹•ï¼‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: å›ºå®šå¹¿å‘Šç‰Œçš„æ—‹è½¬è½´</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">alignedAxis</span> = options.<span class="property">alignedAxis</span> || <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="property">ZERO</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// sizeInMeters: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä»¥ç±³ä¸ºå•ä½è®¡ç®—å°ºå¯¸</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: falseï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰</span></span><br><span class="line">    <span class="comment">// true: å¹¿å‘Šç‰Œå¤§å°ä¸éšè·ç¦»å˜åŒ–</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sizeInMeters</span> = options.<span class="property">sizeInMeters</span> !== <span class="literal">undefined</span> ? options.<span class="property">sizeInMeters</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// width: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œå®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨å›¾åƒå®½åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// å•ä½: åƒç´ æˆ–ç±³ï¼ˆå–å†³äºsizeInMetersï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = options.<span class="property">width</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// height: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¹¿å‘Šç‰Œé«˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨å›¾åƒé«˜åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// å•ä½: åƒç´ æˆ–ç±³ï¼ˆå–å†³äºsizeInMetersï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = options.<span class="property">height</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scaleByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„ç¼©æ”¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: LODæ•ˆæœ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scaleByDistance</span> = options.<span class="property">scaleByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucencyByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„é€æ˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ¸éšæ•ˆæœ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucencyByDistance</span> = options.<span class="property">translucencyByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pixelOffsetScaleByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„åƒç´ åç§»ç¼©æ”¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pixelOffsetScaleByDistance</span> = options.<span class="property">pixelOffsetScaleByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// imageSubRegion: BoundingRectangle | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å›¾åƒå­åŒºåŸŸ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨æ•´ä¸ªå›¾åƒï¼‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: çº¹ç†å›¾é›†</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">imageSubRegion</span> = options.<span class="property">imageSubRegion</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: åŸºäºè·ç¦»çš„æ˜¾ç¤º/éšè—</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// disableDepthTestDistance: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç¦ç”¨æ·±åº¦æµ‹è¯•çš„è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: é˜²æ­¢å¹¿å‘Šç‰Œè¢«åœ°å½¢é®æŒ¡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disableDepthTestDistance</span> =</span><br><span class="line">      options.<span class="property">disableDepthTestDistance</span> !== <span class="literal">undefined</span> ? options.<span class="property">disableDepthTestDistance</span> : <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> billboardEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>),</span><br><span class="line">  <span class="attr">billboard</span>: &#123;</span><br><span class="line">    <span class="attr">image</span>:</span><br><span class="line">      <span class="string">&#x27;data:image/svg+xml;base64,&#x27;</span> +</span><br><span class="line">      <span class="title function_">btoa</span>(<span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg width=&quot;32&quot; height=&quot;40&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M16 0C7.2 0 0 7.2 0 16c0 8.8 16 24 16 24s16-15.2 16-24C32 7.2 24.8 0 16 0z&quot; fill=&quot;#E53E3E&quot;/&gt;</span></span><br><span class="line"><span class="string">        &lt;circle cx=&quot;16&quot; cy=&quot;16&quot; r=&quot;8&quot; fill=&quot;#FFF&quot;/&gt;</span></span><br><span class="line"><span class="string">        &lt;text x=&quot;16&quot; y=&quot;20&quot; text-anchor=&quot;middle&quot; fill=&quot;#E53E3E&quot; font-size=&quot;8&quot;&gt;1&lt;/text&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>),</span><br><span class="line">    <span class="attr">scale</span>: <span class="number">1.5</span>,</span><br><span class="line">    <span class="attr">verticalOrigin</span>: <span class="title class_">Cesium</span>.<span class="property">VerticalOrigin</span>.<span class="property">BOTTOM</span>,</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span>,</span><br><span class="line">    <span class="attr">scaleByDistance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">NearFarScalar</span>(<span class="number">1.5e2</span>, <span class="number">2.0</span>, <span class="number">1.5e7</span>, <span class="number">0.5</span>),</span><br><span class="line">    <span class="attr">distanceDisplayCondition</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">DistanceDisplayCondition</span>(<span class="number">0</span>, <span class="number">1.5e7</span>),</span><br><span class="line">    <span class="attr">disableDepthTestDistance</span>: <span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="PointGraphics-ç‚¹å›¾å½¢"><a href="#PointGraphics-ç‚¹å›¾å½¢" class="headerlink" title="PointGraphics ç‚¹å›¾å½¢"></a>PointGraphics ç‚¹å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PointGraphics - ç‚¹å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PointGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶ç‚¹çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pixelSize: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‚¹çš„åƒç´ å¤§å°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1</span></span><br><span class="line">    <span class="comment">// èŒƒå›´: 1 - ç¡¬ä»¶é™åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pixelSize</span> = options.<span class="property">pixelSize</span> !== <span class="literal">undefined</span> ? options.<span class="property">pixelSize</span> : <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: NONE, CLAMP_TO_GROUND, RELATIVE_TO_GROUND</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// color: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‚¹çš„é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = options.<span class="property">color</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‚¹çš„è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineColor</span> = options.<span class="property">outlineColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineWidth: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0</span></span><br><span class="line">    <span class="comment">// èŒƒå›´: 0 - ç¡¬ä»¶é™åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineWidth</span> = options.<span class="property">outlineWidth</span> !== <span class="literal">undefined</span> ? options.<span class="property">outlineWidth</span> : <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scaleByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„ç¼©æ”¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scaleByDistance</span> = options.<span class="property">scaleByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucencyByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„é€æ˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucencyByDistance</span> = options.<span class="property">translucencyByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// disableDepthTestDistance: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç¦ç”¨æ·±åº¦æµ‹è¯•çš„è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disableDepthTestDistance</span> =</span><br><span class="line">      options.<span class="property">disableDepthTestDistance</span> !== <span class="literal">undefined</span> ? options.<span class="property">disableDepthTestDistance</span> : <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> pointEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>),</span><br><span class="line">  <span class="attr">point</span>: &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span>,</span><br><span class="line">    <span class="attr">scaleByDistance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">NearFarScalar</span>(<span class="number">1.5e2</span>, <span class="number">3.0</span>, <span class="number">1.5e7</span>, <span class="number">0.5</span>),</span><br><span class="line">    <span class="attr">distanceDisplayCondition</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">DistanceDisplayCondition</span>(<span class="number">0</span>, <span class="number">2.0e6</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="LabelGraphics-æ ‡ç­¾å›¾å½¢"><a href="#LabelGraphics-æ ‡ç­¾å›¾å½¢" class="headerlink" title="LabelGraphics æ ‡ç­¾å›¾å½¢"></a>LabelGraphics æ ‡ç­¾å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LabelGraphics - æ ‡ç­¾å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LabelGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶æ ‡ç­¾çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// text: string | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡ç­¾æ–‡æœ¬</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// æ”¯æŒ: æ™®é€šæ–‡æœ¬ã€HTMLå®ä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">text</span> = options.<span class="property">text</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// font: string | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å­—ä½“æ ·å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: &#x27;30px sans-serif&#x27;</span></span><br><span class="line">    <span class="comment">// æ ¼å¼: CSSå­—ä½“æ ¼å¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">font</span> = options.<span class="property">font</span> || <span class="string">&#x27;30px sans-serif&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// style: LabelStyle | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡ç­¾æ ·å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: LabelStyle.FILL</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: FILL, OUTLINE, FILL_AND_OUTLINE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span> = options.<span class="property">style</span> || <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scale: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡ç­¾ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scale</span> = options.<span class="property">scale</span> !== <span class="literal">undefined</span> ? options.<span class="property">scale</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// showBackground: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºèƒŒæ™¯</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showBackground</span> = options.<span class="property">showBackground</span> !== <span class="literal">undefined</span> ? options.<span class="property">showBackground</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// backgroundColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color(0.165, 0.165, 0.165, 0.8)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundColor</span> = options.<span class="property">backgroundColor</span> || <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">0.165</span>, <span class="number">0.165</span>, <span class="number">0.165</span>, <span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// backgroundPadding: Cartesian2 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èƒŒæ™¯å†…è¾¹è·ï¼ˆåƒç´ ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian2(7, 5)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundPadding</span> = options.<span class="property">backgroundPadding</span> || <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">7</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pixelOffset: Cartesian2 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åƒç´ åç§»é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian2.ZERO</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pixelOffset</span> = options.<span class="property">pixelOffset</span> || <span class="title class_">Cesium</span>.<span class="property">Cartesian2</span>.<span class="property">ZERO</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// eyeOffset: Cartesian3 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çœ¼éƒ¨åç§»é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3.ZERO</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eyeOffset</span> = options.<span class="property">eyeOffset</span> || <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="property">ZERO</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// horizontalOrigin: HorizontalOrigin | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ°´å¹³å¯¹é½æ–¹å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HorizontalOrigin.CENTER</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: LEFT, CENTER, RIGHT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">horizontalOrigin</span> = options.<span class="property">horizontalOrigin</span> || <span class="title class_">Cesium</span>.<span class="property">HorizontalOrigin</span>.<span class="property">CENTER</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// verticalOrigin: VerticalOrigin | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‚ç›´å¯¹é½æ–¹å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VerticalOrigin.CENTER</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: BOTTOM, BASELINE, CENTER, TOP</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">verticalOrigin</span> = options.<span class="property">verticalOrigin</span> || <span class="title class_">Cesium</span>.<span class="property">VerticalOrigin</span>.<span class="property">CENTER</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fillColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fillColor</span> = options.<span class="property">fillColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineColor</span> = options.<span class="property">outlineColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineWidth: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineWidth</span> = options.<span class="property">outlineWidth</span> !== <span class="literal">undefined</span> ? options.<span class="property">outlineWidth</span> : <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucencyByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„é€æ˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucencyByDistance</span> = options.<span class="property">translucencyByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pixelOffsetScaleByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„åƒç´ åç§»ç¼©æ”¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pixelOffsetScaleByDistance</span> = options.<span class="property">pixelOffsetScaleByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scaleByDistance: NearFarScalar | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºäºè·ç¦»çš„ç¼©æ”¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scaleByDistance</span> = options.<span class="property">scaleByDistance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// disableDepthTestDistance: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç¦ç”¨æ·±åº¦æµ‹è¯•çš„è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disableDepthTestDistance</span> =</span><br><span class="line">      options.<span class="property">disableDepthTestDistance</span> !== <span class="literal">undefined</span> ? options.<span class="property">disableDepthTestDistance</span> : <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> labelEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>),</span><br><span class="line">  <span class="attr">label</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>,</span><br><span class="line">    <span class="attr">font</span>: <span class="string">&#x27;24pt Microsoft YaHei&#x27;</span>,</span><br><span class="line">    <span class="attr">style</span>: <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL_AND_OUTLINE</span>,</span><br><span class="line">    <span class="attr">fillColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">showBackground</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>.<span class="title function_">withAlpha</span>(<span class="number">0.7</span>),</span><br><span class="line">    <span class="attr">backgroundPadding</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">10</span>, <span class="number">8</span>),</span><br><span class="line">    <span class="attr">verticalOrigin</span>: <span class="title class_">Cesium</span>.<span class="property">VerticalOrigin</span>.<span class="property">BOTTOM</span>,</span><br><span class="line">    <span class="attr">pixelOffset</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">0</span>, -<span class="number">50</span>),</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span>,</span><br><span class="line">    <span class="attr">scaleByDistance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">NearFarScalar</span>(<span class="number">1.5e2</span>, <span class="number">1.5</span>, <span class="number">1.5e7</span>, <span class="number">0.5</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="PolylineGraphics-å¤šæ®µçº¿å›¾å½¢"><a href="#PolylineGraphics-å¤šæ®µçº¿å›¾å½¢" class="headerlink" title="PolylineGraphics å¤šæ®µçº¿å›¾å½¢"></a>PolylineGraphics å¤šæ®µçº¿å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PolylineGraphics - å¤šæ®µçº¿å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PolylineGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶å¤šæ®µçº¿çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// positions: Array&lt;Cartesian3&gt; | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šæ®µçº¿çš„é¡¶ç‚¹ä½ç½®æ•°ç»„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// æ ¼å¼: [Cartesian3, Cartesian3, ...]</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">positions</span> = options.<span class="property">positions</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// width: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çº¿æ¡å®½åº¦ï¼ˆåƒç´ ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="comment">// èŒƒå›´: 1.0 - ç¡¬ä»¶é™åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = options.<span class="property">width</span> !== <span class="literal">undefined</span> ? options.<span class="property">width</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// granularity: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çº¿æ¡ç»†åˆ†ç²’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Math.PI / 180ï¼ˆ1åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶æ›²çº¿çš„å¹³æ»‘åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">granularity</span> = options.<span class="property">granularity</span> !== <span class="literal">undefined</span> ? options.<span class="property">granularity</span> : <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// material: MaterialProperty | Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çº¿æ¡æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="comment">// ç±»å‹: Colorã€ImageMaterialPropertyã€PolylineDashMaterialPropertyç­‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">material</span> = options.<span class="property">material</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// depthFailMaterial: MaterialProperty | Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ·±åº¦æµ‹è¯•å¤±è´¥æ—¶çš„æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: è¢«é®æŒ¡éƒ¨åˆ†çš„æ˜¾ç¤º</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">depthFailMaterial</span> = options.<span class="property">depthFailMaterial</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// followSurface: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è·Ÿéšåœ°è¡¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="comment">// true: çº¿æ¡è´´åˆåœ°çƒè¡¨é¢æ›²ç‡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">followSurface</span> = options.<span class="property">followSurface</span> !== <span class="literal">undefined</span> ? options.<span class="property">followSurface</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clampToGround: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="comment">// true: çº¿æ¡è´´åˆåœ°å½¢è¡¨é¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clampToGround</span> = options.<span class="property">clampToGround</span> !== <span class="literal">undefined</span> ? options.<span class="property">clampToGround</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.DISABLED</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: DISABLED, ENABLED, CAST_ONLY, RECEIVE_ONLY</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// classificationType: ClassificationType | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ†ç±»ç±»å‹ï¼ˆç”¨äºè´´åœ°ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ClassificationType.BOTH</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: TERRAIN, CESIUM_3D_TILE, BOTH</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">classificationType</span> = options.<span class="property">classificationType</span> || <span class="title class_">Cesium</span>.<span class="property">ClassificationType</span>.<span class="property">BOTH</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// zIndex: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: Zè½´ç´¢å¼•ï¼ˆè´´åœ°æ—¶çš„å±‚æ¬¡ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶é‡å çº¿æ¡çš„æ˜¾ç¤ºé¡ºåº</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">zIndex</span> = options.<span class="property">zIndex</span> !== <span class="literal">undefined</span> ? options.<span class="property">zIndex</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> polylineEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">polyline</span>: &#123;</span><br><span class="line">    <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([</span><br><span class="line">      <span class="number">116.4074</span>,</span><br><span class="line">      <span class="number">39.9042</span>, <span class="comment">// åŒ—äº¬</span></span><br><span class="line">      <span class="number">121.4737</span>,</span><br><span class="line">      <span class="number">31.2304</span>, <span class="comment">// ä¸Šæµ·</span></span><br><span class="line">      <span class="number">113.2644</span>,</span><br><span class="line">      <span class="number">23.1291</span>, <span class="comment">// å¹¿å·</span></span><br><span class="line">    ]),</span><br><span class="line">    <span class="attr">width</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">CYAN</span>,</span><br><span class="line">    <span class="attr">clampToGround</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è™šçº¿æè´¨</span></span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineDashMaterialProperty</span>(&#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line">      <span class="attr">dashLength</span>: <span class="number">16.0</span>, <span class="comment">// è™šçº¿é•¿åº¦</span></span><br><span class="line">      <span class="attr">dashPattern</span>: <span class="number">255</span>, <span class="comment">// è™šçº¿æ¨¡å¼</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç®­å¤´æè´¨</span></span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineArrowMaterialProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å…‰æè´¨</span></span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGlowMaterialProperty</span>(&#123;</span><br><span class="line">      <span class="attr">glowPower</span>: <span class="number">0.2</span>, <span class="comment">// å‘å…‰å¼ºåº¦</span></span><br><span class="line">      <span class="attr">taperPower</span>: <span class="number">0.5</span>, <span class="comment">// é”¥å½¢åŠŸç‡</span></span><br><span class="line">      <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="PolygonGraphics-å¤šè¾¹å½¢å›¾å½¢"><a href="#PolygonGraphics-å¤šè¾¹å½¢å›¾å½¢" class="headerlink" title="PolygonGraphics å¤šè¾¹å½¢å›¾å½¢"></a>PolygonGraphics å¤šè¾¹å½¢å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PolygonGraphics - å¤šè¾¹å½¢å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PolygonGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶å¤šè¾¹å½¢çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// hierarchy: PolygonHierarchy | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šè¾¹å½¢å±‚æ¬¡ç»“æ„ï¼ˆå¤–ç¯å’Œå†…ç¯ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// æ ¼å¼: é¡¶ç‚¹æ•°ç»„æˆ–PolygonHierarchyå¯¹è±¡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hierarchy</span> = options.<span class="property">hierarchy</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// height: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤šè¾¹å½¢é«˜åº¦ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æŠ¬é«˜å¤šè¾¹å½¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = options.<span class="property">height</span> !== <span class="literal">undefined</span> ? options.<span class="property">height</span> : <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// extrudedHeight: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ‹‰ä¼¸é«˜åº¦ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: åˆ›å»º3Dç«‹ä½“æ•ˆæœ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">extrudedHeight</span> = options.<span class="property">extrudedHeight</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// extrudedHeightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ‹‰ä¼¸é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">extrudedHeightReference</span> = options.<span class="property">extrudedHeightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stRotation: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çº¹ç†æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ—‹è½¬æè´¨çº¹ç†</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stRotation</span> = options.<span class="property">stRotation</span> !== <span class="literal">undefined</span> ? options.<span class="property">stRotation</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// granularity: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»†åˆ†ç²’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Math.PI / 180</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶æ›²çº¿è¾¹çš„å¹³æ»‘åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">granularity</span> = options.<span class="property">granularity</span> !== <span class="literal">undefined</span> ? options.<span class="property">granularity</span> : <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fill</span> = options.<span class="property">fill</span> !== <span class="literal">undefined</span> ? options.<span class="property">fill</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// material: MaterialProperty | Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¡«å……æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">material</span> = options.<span class="property">material</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outline: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºè½®å»“</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outline</span> = options.<span class="property">outline</span> !== <span class="literal">undefined</span> ? options.<span class="property">outline</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineColor</span> = options.<span class="property">outlineColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineWidth: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å®½åº¦ï¼ˆåƒç´ ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="comment">// æ³¨æ„: åœ¨æŸäº›ç¡¬ä»¶ä¸Šå¯èƒ½ä¸æ”¯æŒ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineWidth</span> = options.<span class="property">outlineWidth</span> !== <span class="literal">undefined</span> ? options.<span class="property">outlineWidth</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// perPositionHeight: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä½¿ç”¨æ¯ä¸ªé¡¶ç‚¹çš„é«˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="comment">// true: æ¯ä¸ªé¡¶ç‚¹å¯ä»¥æœ‰ä¸åŒçš„é«˜åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">perPositionHeight</span> =</span><br><span class="line">      options.<span class="property">perPositionHeight</span> !== <span class="literal">undefined</span> ? options.<span class="property">perPositionHeight</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// closeTop: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å°é—­é¡¶éƒ¨ï¼ˆæ‹‰ä¼¸æ—¶ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">closeTop</span> = options.<span class="property">closeTop</span> !== <span class="literal">undefined</span> ? options.<span class="property">closeTop</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// closeBottom: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å°é—­åº•éƒ¨ï¼ˆæ‹‰ä¼¸æ—¶ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">closeBottom</span> = options.<span class="property">closeBottom</span> !== <span class="literal">undefined</span> ? options.<span class="property">closeBottom</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// arcType: ArcType | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¼§çº¿ç±»å‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ArcType.GEODESIC</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: NONE, GEODESIC, RHUMB</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">arcType</span> = options.<span class="property">arcType</span> || <span class="title class_">Cesium</span>.<span class="property">ArcType</span>.<span class="property">GEODESIC</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.DISABLED</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// classificationType: ClassificationType | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ†ç±»ç±»å‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ClassificationType.BOTH</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">classificationType</span> = options.<span class="property">classificationType</span> || <span class="title class_">Cesium</span>.<span class="property">ClassificationType</span>.<span class="property">BOTH</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// zIndex: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: Zè½´ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">zIndex</span> = options.<span class="property">zIndex</span> !== <span class="literal">undefined</span> ? options.<span class="property">zIndex</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> polygonEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">polygon</span>: &#123;</span><br><span class="line">    <span class="attr">hierarchy</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([</span><br><span class="line">      <span class="number">116.3</span>,</span><br><span class="line">      <span class="number">39.8</span>, <span class="comment">// è¥¿å—è§’</span></span><br><span class="line">      <span class="number">116.5</span>,</span><br><span class="line">      <span class="number">39.8</span>, <span class="comment">// ä¸œå—è§’</span></span><br><span class="line">      <span class="number">116.5</span>,</span><br><span class="line">      <span class="number">40.0</span>, <span class="comment">// ä¸œåŒ—è§’</span></span><br><span class="line">      <span class="number">116.3</span>,</span><br><span class="line">      <span class="number">40.0</span>, <span class="comment">// è¥¿åŒ—è§’</span></span><br><span class="line">    ]),</span><br><span class="line">    <span class="attr">height</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">extrudedHeight</span>: <span class="number">300</span>, <span class="comment">// æ‹‰ä¼¸300ç±³</span></span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>.<span class="title function_">withAlpha</span>(<span class="number">0.7</span>),</span><br><span class="line">    <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¸¦æ´çš„å¤šè¾¹å½¢</span></span><br><span class="line">    <span class="attr">hierarchy</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonHierarchy</span>(</span><br><span class="line">      <span class="comment">// å¤–ç¯</span></span><br><span class="line">      <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([<span class="number">116.3</span>, <span class="number">39.8</span>, <span class="number">116.5</span>, <span class="number">39.8</span>, <span class="number">116.5</span>, <span class="number">40.0</span>, <span class="number">116.3</span>, <span class="number">40.0</span>]),</span><br><span class="line">      <span class="comment">// å†…ç¯ï¼ˆæ´ï¼‰</span></span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonHierarchy</span>(</span><br><span class="line">          <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([</span><br><span class="line">            <span class="number">116.35</span>, <span class="number">39.85</span>, <span class="number">116.45</span>, <span class="number">39.85</span>, <span class="number">116.45</span>, <span class="number">39.95</span>, <span class="number">116.35</span>, <span class="number">39.95</span>,</span><br><span class="line">          ]),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å›¾ç‰‡æè´¨</span></span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ImageMaterialProperty</span>(&#123;</span><br><span class="line">      <span class="attr">image</span>: <span class="string">&#x27;path/to/texture.png&#x27;</span>,</span><br><span class="line">      <span class="attr">repeat</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">4.0</span>, <span class="number">4.0</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£‹ç›˜æè´¨</span></span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CheckerboardMaterialProperty</span>(&#123;</span><br><span class="line">      <span class="attr">evenColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>,</span><br><span class="line">      <span class="attr">oddColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">      <span class="attr">repeat</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">4.0</span>, <span class="number">4.0</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ModelGraphics-3Dæ¨¡å‹å›¾å½¢"><a href="#ModelGraphics-3Dæ¨¡å‹å›¾å½¢" class="headerlink" title="ModelGraphics 3Dæ¨¡å‹å›¾å½¢"></a>ModelGraphics 3Dæ¨¡å‹å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ModelGraphics - 3Dæ¨¡å‹å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ModelGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶æ¨¡å‹çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// uri: string | Resource | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¨¡å‹æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// æ”¯æŒ: glTF(.gltf, .glb)ã€COLLADA(.dae)ç­‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uri</span> = options.<span class="property">uri</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// scale: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¨¡å‹ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scale</span> = options.<span class="property">scale</span> !== <span class="literal">undefined</span> ? options.<span class="property">scale</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// minimumPixelSize: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å°åƒç´ å¤§å°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: é˜²æ­¢æ¨¡å‹åœ¨è¿œè·ç¦»æ—¶å˜å¾—è¿‡å°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minimumPixelSize</span> = options.<span class="property">minimumPixelSize</span> !== <span class="literal">undefined</span> ? options.<span class="property">minimumPixelSize</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumScale: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: é™åˆ¶æ¨¡å‹çš„æœ€å¤§æ˜¾ç¤ºå°ºå¯¸</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumScale</span> = options.<span class="property">maximumScale</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// incrementallyLoadTextures: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¢é‡åŠ è½½çº¹ç†</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="comment">// æ€§èƒ½ä¼˜åŒ–: æ¸è¿›å¼çº¹ç†åŠ è½½</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">incrementallyLoadTextures</span> =</span><br><span class="line">      options.<span class="property">incrementallyLoadTextures</span> !== <span class="literal">undefined</span> ? options.<span class="property">incrementallyLoadTextures</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// runAnimations: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è¿è¡ŒåŠ¨ç”»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶æ¨¡å‹å†…ç½®åŠ¨ç”»çš„æ’­æ”¾</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">runAnimations</span> = options.<span class="property">runAnimations</span> !== <span class="literal">undefined</span> ? options.<span class="property">runAnimations</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clampAnimations: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é™åˆ¶åŠ¨ç”»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: å°†åŠ¨ç”»é™åˆ¶åœ¨å®šä¹‰çš„æ—¶é—´èŒƒå›´å†…</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clampAnimations</span> = options.<span class="property">clampAnimations</span> !== <span class="literal">undefined</span> ? options.<span class="property">clampAnimations</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.ENABLED</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">ENABLED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// silhouetteColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.RED</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ¨¡å‹è¢«é€‰ä¸­æ—¶çš„è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">silhouetteColor</span> = options.<span class="property">silhouetteColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// silhouetteSize: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å¤§å°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0ï¼ˆä¸æ˜¾ç¤ºè½®å»“ï¼‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ¨¡å‹è¢«é€‰ä¸­æ—¶çš„è½®å»“å®½åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">silhouetteSize</span> = options.<span class="property">silhouetteSize</span> !== <span class="literal">undefined</span> ? options.<span class="property">silhouetteSize</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// color: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¨¡å‹é¢œè‰²ï¼ˆæ··åˆï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: ä¸æ¨¡å‹çº¹ç†æ··åˆçš„é¢œè‰²</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = options.<span class="property">color</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// colorBlendMode: ColorBlendMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¢œè‰²æ··åˆæ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ColorBlendMode.HIGHLIGHT</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: HIGHLIGHT, REPLACE, MIX</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">colorBlendMode</span> = options.<span class="property">colorBlendMode</span> || <span class="title class_">Cesium</span>.<span class="property">ColorBlendMode</span>.<span class="property">HIGHLIGHT</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// colorBlendAmount: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¢œè‰²æ··åˆå¼ºåº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.5</span></span><br><span class="line">    <span class="comment">// èŒƒå›´: 0.0 - 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">colorBlendAmount</span> = options.<span class="property">colorBlendAmount</span> !== <span class="literal">undefined</span> ? options.<span class="property">colorBlendAmount</span> : <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// nodeTransformations: PropertyBag | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èŠ‚ç‚¹å˜æ¢</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶æ¨¡å‹ä¸­ç‰¹å®šèŠ‚ç‚¹çš„å˜æ¢</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">nodeTransformations</span> = options.<span class="property">nodeTransformations</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// articulations: PropertyBag | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å…³èŠ‚åŠ¨ç”»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶æ¨¡å‹çš„å…³èŠ‚åŠ¨ç”»</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">articulations</span> = options.<span class="property">articulations</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clippingPlanes: ClippingPlaneCollection | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è£å‰ªå¹³é¢</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: è£å‰ªæ¨¡å‹çš„æŸäº›éƒ¨åˆ†</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clippingPlanes</span> = options.<span class="property">clippingPlanes</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> modelEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">uri</span>: <span class="string">&#x27;./models/airplane.gltf&#x27;</span>,</span><br><span class="line">    <span class="attr">scale</span>: <span class="number">2.0</span>,</span><br><span class="line">    <span class="attr">minimumPixelSize</span>: <span class="number">128</span>,</span><br><span class="line">    <span class="attr">maximumScale</span>: <span class="number">20000</span>,</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é«˜äº®æ˜¾ç¤º</span></span><br><span class="line">    <span class="attr">silhouetteColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">LIME</span>,</span><br><span class="line">    <span class="attr">silhouetteSize</span>: <span class="number">2.0</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢œè‰²è°ƒæ•´</span></span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>,</span><br><span class="line">    <span class="attr">colorBlendMode</span>: <span class="title class_">Cesium</span>.<span class="property">ColorBlendMode</span>.<span class="property">MIX</span>,</span><br><span class="line">    <span class="attr">colorBlendAmount</span>: <span class="number">0.3</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èŠ‚ç‚¹å˜æ¢ï¼ˆæ—‹è½¬èºæ—‹æ¡¨ï¼‰</span></span><br><span class="line">    <span class="attr">nodeTransformations</span>: &#123;</span><br><span class="line">      <span class="title class_">Propeller</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">NodeTransformationProperty</span>(&#123;</span><br><span class="line">        <span class="attr">rotation</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Quaternion</span>.<span class="title function_">fromAxisAngle</span>(</span><br><span class="line">            <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="property">UNIT_Z</span>,</span><br><span class="line">            (<span class="title class_">Date</span>.<span class="title function_">now</span>() / <span class="number">1000</span>) * <span class="number">10</span>, <span class="comment">// æ¯ç§’10å¼§åº¦</span></span><br><span class="line">          )</span><br><span class="line">        &#125;, <span class="literal">false</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è£å‰ªå¹³é¢</span></span><br><span class="line">    <span class="attr">clippingPlanes</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ClippingPlaneCollection</span>(&#123;</span><br><span class="line">      <span class="attr">planes</span>: [<span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ClippingPlane</span>(<span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>), <span class="number">0.0</span>)],</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="BoxGraphics-ç›’å­å›¾å½¢"><a href="#BoxGraphics-ç›’å­å›¾å½¢" class="headerlink" title="BoxGraphics ç›’å­å›¾å½¢"></a>BoxGraphics ç›’å­å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BoxGraphics - ç›’å­å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BoxGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶ç›’å­çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// dimensions: Cartesian3 | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›’å­çš„å°ºå¯¸ï¼ˆé•¿ã€å®½ã€é«˜ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// å•ä½: ç±³</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dimensions</span> = options.<span class="property">dimensions</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fill</span> = options.<span class="property">fill</span> !== <span class="literal">undefined</span> ? options.<span class="property">fill</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// material: MaterialProperty | Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¡«å……æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">material</span> = options.<span class="property">material</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outline: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºè½®å»“</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outline</span> = options.<span class="property">outline</span> !== <span class="literal">undefined</span> ? options.<span class="property">outline</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineColor</span> = options.<span class="property">outlineColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineWidth: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineWidth</span> = options.<span class="property">outlineWidth</span> !== <span class="literal">undefined</span> ? options.<span class="property">outlineWidth</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.DISABLED</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> boxEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">100</span>),</span><br><span class="line">  <span class="attr">box</span>: &#123;</span><br><span class="line">    <span class="attr">dimensions</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">200</span>, <span class="number">200</span>, <span class="number">100</span>), <span class="comment">// é•¿200mï¼Œå®½200mï¼Œé«˜100m</span></span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>.<span class="title function_">withAlpha</span>(<span class="number">0.7</span>),</span><br><span class="line">    <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">RELATIVE_TO_GROUND</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="CylinderGraphics-åœ†æŸ±ä½“å›¾å½¢"><a href="#CylinderGraphics-åœ†æŸ±ä½“å›¾å½¢" class="headerlink" title="CylinderGraphics åœ†æŸ±ä½“å›¾å½¢"></a>CylinderGraphics åœ†æŸ±ä½“å›¾å½¢</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CylinderGraphics - åœ†æŸ±ä½“å›¾å½¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CylinderGraphics</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// show: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ§åˆ¶åœ†æŸ±ä½“çš„å¯è§æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// length: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ†æŸ±ä½“é•¿åº¦ï¼ˆé«˜åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// å•ä½: ç±³</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">length</span> = options.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// topRadius: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶éƒ¨åŠå¾„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// å•ä½: ç±³</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">topRadius</span> = options.<span class="property">topRadius</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// bottomRadius: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åº•éƒ¨åŠå¾„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="comment">// å•ä½: ç±³</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bottomRadius</span> = options.<span class="property">bottomRadius</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightReference: HeightReference | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦å‚è€ƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: HeightReference.NONE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightReference</span> = options.<span class="property">heightReference</span> || <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¡«å……</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fill</span> = options.<span class="property">fill</span> !== <span class="literal">undefined</span> ? options.<span class="property">fill</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// material: MaterialProperty | Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¡«å……æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.WHITE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">material</span> = options.<span class="property">material</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outline: boolean | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºè½®å»“</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outline</span> = options.<span class="property">outline</span> !== <span class="literal">undefined</span> ? options.<span class="property">outline</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineColor: Color | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineColor</span> = options.<span class="property">outlineColor</span> || <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// outlineWidth: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½®å»“å®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">outlineWidth</span> = options.<span class="property">outlineWidth</span> !== <span class="literal">undefined</span> ? options.<span class="property">outlineWidth</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// numberOfVerticalLines: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‚ç›´çº¿æ¡æ•°é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 16</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶åœ†æŸ±ä½“çš„ç»†åˆ†ç²¾åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">numberOfVerticalLines</span> =</span><br><span class="line">      options.<span class="property">numberOfVerticalLines</span> !== <span class="literal">undefined</span> ? options.<span class="property">numberOfVerticalLines</span> : <span class="number">16</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// slices: number | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ‡ç‰‡æ•°é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 128</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶åœ†å‘¨æ–¹å‘çš„ç²¾åº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">slices</span> = options.<span class="property">slices</span> !== <span class="literal">undefined</span> ? options.<span class="property">slices</span> : <span class="number">128</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.DISABLED</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// distanceDisplayCondition: DistanceDisplayCondition | Property</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">distanceDisplayCondition</span> = options.<span class="property">distanceDisplayCondition</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> cylinderEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">50</span>),</span><br><span class="line">  <span class="attr">cylinder</span>: &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="number">100</span>, <span class="comment">// é«˜åº¦100ç±³</span></span><br><span class="line">    <span class="attr">topRadius</span>: <span class="number">30</span>, <span class="comment">// é¡¶éƒ¨åŠå¾„30ç±³</span></span><br><span class="line">    <span class="attr">bottomRadius</span>: <span class="number">50</span>, <span class="comment">// åº•éƒ¨åŠå¾„50ç±³ï¼ˆé”¥å½¢ï¼‰</span></span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">GREEN</span>.<span class="title function_">withAlpha</span>(<span class="number">0.8</span>),</span><br><span class="line">    <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">DARKGREEN</span>,</span><br><span class="line">    <span class="attr">heightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">RELATIVE_TO_GROUND</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="åœ°å½¢ç³»ç»Ÿè¯¦è§£"><a href="#åœ°å½¢ç³»ç»Ÿè¯¦è§£" class="headerlink" title="åœ°å½¢ç³»ç»Ÿè¯¦è§£"></a>åœ°å½¢ç³»ç»Ÿè¯¦è§£</h2><h3 id="TerrainProvider-åœ°å½¢æä¾›è€…"><a href="#TerrainProvider-åœ°å½¢æä¾›è€…" class="headerlink" title="TerrainProvider åœ°å½¢æä¾›è€…"></a>TerrainProvider åœ°å½¢æä¾›è€…</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EllipsoidTerrainProvider - æ¤­çƒåœ°å½¢ï¼ˆç¦»çº¿æ¨èï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EllipsoidTerrainProvider</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// ellipsoid: Ellipsoid</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“å‚æ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Ellipsoid.WGS84</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ellipsoid</span> = options.<span class="property">ellipsoid</span> || <span class="title class_">Cesium</span>.<span class="property">Ellipsoid</span>.<span class="property">WGS84</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// credit: Credit | string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">credit</span> = options.<span class="property">credit</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å±æ€§</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">ready</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="comment">// æ˜¯å¦å°±ç»ª</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">readyPromise</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125; <span class="comment">// å°±ç»ªPromise</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">errorEvent</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line">  &#125; <span class="comment">// é”™è¯¯äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">hasWaterMask</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125; <span class="comment">// æ˜¯å¦æœ‰æ°´ä½“é®ç½©</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">hasVertexNormals</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125; <span class="comment">// æ˜¯å¦æœ‰é¡¶ç‚¹æ³•çº¿</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">availability</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  &#125; <span class="comment">// å¯ç”¨æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CesiumTerrainProvider - Cesiumåœ°å½¢æœåŠ¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CesiumTerrainProvider</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// url: string | Resource</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°å½¢æœåŠ¡URL</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">url</span> = options.<span class="property">url</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// requestWaterMask: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è¯·æ±‚æ°´ä½“é®ç½©</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">requestWaterMask</span> =</span><br><span class="line">      options.<span class="property">requestWaterMask</span> !== <span class="literal">undefined</span> ? options.<span class="property">requestWaterMask</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// requestVertexNormals: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è¯·æ±‚é¡¶ç‚¹æ³•çº¿</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">requestVertexNormals</span> =</span><br><span class="line">      options.<span class="property">requestVertexNormals</span> !== <span class="literal">undefined</span> ? options.<span class="property">requestVertexNormals</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ellipsoid: Ellipsoid</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Ellipsoid.WGS84</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ellipsoid</span> = options.<span class="property">ellipsoid</span> || <span class="title class_">Cesium</span>.<span class="property">Ellipsoid</span>.<span class="property">WGS84</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// credit: Credit | string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">credit</span> = options.<span class="property">credit</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// requestTileGeometry - è¯·æ±‚ç“¦ç‰‡å‡ ä½•</span></span><br><span class="line">  <span class="comment">// x: number - Xåæ ‡</span></span><br><span class="line">  <span class="comment">// y: number - Yåæ ‡</span></span><br><span class="line">  <span class="comment">// level: number - çº§åˆ«</span></span><br><span class="line">  <span class="title function_">requestTileGeometry</span>(<span class="params">x, y, level</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›Promise&lt;TerrainData&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getLevelMaximumGeometricError - è·å–çº§åˆ«æœ€å¤§å‡ ä½•è¯¯å·®</span></span><br><span class="line">  <span class="comment">// level: number - çº§åˆ«</span></span><br><span class="line">  <span class="title function_">getLevelMaximumGeometricError</span>(<span class="params">level</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›å‡ ä½•è¯¯å·®å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getTileDataAvailable - è·å–ç“¦ç‰‡æ•°æ®å¯ç”¨æ€§</span></span><br><span class="line">  <span class="comment">// x: number - Xåæ ‡</span></span><br><span class="line">  <span class="comment">// y: number - Yåæ ‡</span></span><br><span class="line">  <span class="comment">// level: number - çº§åˆ«</span></span><br><span class="line">  <span class="title function_">getTileDataAvailable</span>(<span class="params">x, y, level</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ°å½¢é‡‡æ ·</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sampleTerrain</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> positions = [</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>),</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromDegrees</span>(<span class="number">121.4737</span>, <span class="number">31.2304</span>),</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡‡æ ·åœ°å½¢é«˜åº¦</span></span><br><span class="line">  <span class="keyword">const</span> sampledPositions = <span class="keyword">await</span> <span class="title class_">Cesium</span>.<span class="title function_">sampleTerrainMostDetailed</span>(viewer.<span class="property">terrainProvider</span>, positions)</span><br><span class="line"></span><br><span class="line">  sampledPositions.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ä½ç½® <span class="subst">$&#123;index&#125;</span>: é«˜åº¦ <span class="subst">$&#123;position.height&#125;</span> ç±³`</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ°å½¢é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="comment">// ç¦»çº¿æ¤­çƒåœ°å½¢</span></span><br><span class="line">viewer.<span class="property">terrainProvider</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EllipsoidTerrainProvider</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Cesium World Terrainï¼ˆéœ€è¦ç½‘ç»œï¼‰</span></span><br><span class="line"><span class="keyword">const</span> worldTerrain = <span class="title class_">Cesium</span>.<span class="title function_">createWorldTerrain</span>(&#123;</span><br><span class="line">  <span class="attr">requestWaterMask</span>: <span class="literal">true</span>, <span class="comment">// è¯·æ±‚æ°´ä½“é®ç½©</span></span><br><span class="line">  <span class="attr">requestVertexNormals</span>: <span class="literal">true</span>, <span class="comment">// è¯·æ±‚é¡¶ç‚¹æ³•çº¿</span></span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">terrainProvider</span> = worldTerrain</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰åœ°å½¢æœåŠ¡</span></span><br><span class="line"><span class="keyword">const</span> customTerrain = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CesiumTerrainProvider</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;http://localhost:8080/terrain/&#x27;</span>,</span><br><span class="line">  <span class="attr">requestWaterMask</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">requestVertexNormals</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">terrainProvider</span> = customTerrain</span><br></pre></td></tr></table></figure>

<h2 id="ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§"><a href="#ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§" class="headerlink" title="ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§"></a>ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§</h2><h3 id="Camera-ç›¸æœºç±»"><a href="#Camera-ç›¸æœºç±»" class="headerlink" title="Camera ç›¸æœºç±»"></a>Camera ç›¸æœºç±»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Camera - ç›¸æœºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Camera</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// position: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®</span></span><br><span class="line">    <span class="comment">// åªè¯»: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">position</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// direction: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºæœå‘ï¼ˆå•ä½å‘é‡ï¼‰</span></span><br><span class="line">    <span class="comment">// åªè¯»: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">direction</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// up: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºä¸Šæ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰</span></span><br><span class="line">    <span class="comment">// åªè¯»: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">up</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// right: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºå³æ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰</span></span><br><span class="line">    <span class="comment">// åªè¯»: trueï¼ˆç”±directionå’Œupè®¡ç®—ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">right</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// frustum: Frustum</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è§†é”¥ä½“ï¼ˆé€è§†æˆ–æ­£äº¤æŠ•å½±ï¼‰</span></span><br><span class="line">    <span class="comment">// ç±»å‹: PerspectiveFrustum | OrthographicFrustum</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">frustum</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerspectiveFrustum</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// defaultMoveAmount: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é»˜è®¤ç§»åŠ¨è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 100000.0ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaultMoveAmount</span> = <span class="number">100000.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// defaultLookAmount: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é»˜è®¤æ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Math.PI / 60ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaultLookAmount</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">60</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// defaultRotateAmount: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é»˜è®¤æ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Math.PI / 3600ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaultRotateAmount</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">3600</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// defaultZoomAmount: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é»˜è®¤ç¼©æ”¾è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 100000.0ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">defaultZoomAmount</span> = <span class="number">100000.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// constrainedAxis: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çº¦æŸè½´ï¼ˆé™åˆ¶ç›¸æœºæ—‹è½¬ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆæ— çº¦æŸï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">constrainedAxis</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumZoomFactor: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§ç¼©æ”¾å› å­</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.5</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumZoomFactor</span> = <span class="number">1.5</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === äº‹ä»¶ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveStart: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç›¸æœºå¼€å§‹ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// è§¦å‘: ç›¸æœºå¼€å§‹ç§»åŠ¨æ—¶</span></span><br><span class="line">  moveStart = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveEnd: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç›¸æœºåœæ­¢ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// è§¦å‘: ç›¸æœºåœæ­¢ç§»åŠ¨æ—¶</span></span><br><span class="line">  moveEnd = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// changed: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç›¸æœºå˜åŒ–äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// è§¦å‘: ç›¸æœºä½ç½®ã€æ–¹å‘æˆ–è§†é”¥ä½“å˜åŒ–æ—¶</span></span><br><span class="line">  changed = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === ä½ç½®è®¾ç½®æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// setView - è®¾ç½®è§†å›¾</span></span><br><span class="line">  <span class="title function_">setView</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// destination: Cartesian3 | Rectangle</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›®æ ‡ä½ç½®æˆ–åŒºåŸŸ</span></span><br><span class="line">    <span class="keyword">const</span> destination = options.<span class="property">destination</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// orientation: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºæ–¹å‘</span></span><br><span class="line">    <span class="comment">// heading: number - èˆªå‘è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// pitch: number - ä¿¯ä»°è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// roll: number - ç¿»æ»šè§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> orientation = options.<span class="property">orientation</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// endTransform: Matrix4</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æŸå˜æ¢çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">const</span> endTransform = options.<span class="property">endTransform</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// flyTo - é£è¡Œåˆ°ç›®æ ‡</span></span><br><span class="line">  <span class="title function_">flyTo</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// destination: Cartesian3 | Rectangle</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›®æ ‡ä½ç½®</span></span><br><span class="line">    <span class="keyword">const</span> destination = options.<span class="property">destination</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// orientation: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›®æ ‡æ–¹å‘</span></span><br><span class="line">    <span class="keyword">const</span> orientation = options.<span class="property">orientation</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// duration: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é£è¡Œæ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: è‡ªåŠ¨è®¡ç®—</span></span><br><span class="line">    <span class="keyword">const</span> duration = options.<span class="property">duration</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// complete: function</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®Œæˆå›è°ƒ</span></span><br><span class="line">    <span class="keyword">const</span> complete = options.<span class="property">complete</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// cancel: function</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å–æ¶ˆå›è°ƒ</span></span><br><span class="line">    <span class="keyword">const</span> cancel = options.<span class="property">cancel</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// endTransform: Matrix4</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æŸå˜æ¢çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">const</span> endTransform = options.<span class="property">endTransform</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumHeight: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é£è¡Œæœ€å¤§é«˜åº¦</span></span><br><span class="line">    <span class="keyword">const</span> maximumHeight = options.<span class="property">maximumHeight</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pitchAdjustHeight: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ä¿¯ä»°è§’è°ƒæ•´é«˜åº¦</span></span><br><span class="line">    <span class="keyword">const</span> pitchAdjustHeight = options.<span class="property">pitchAdjustHeight</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// flyOverLongitude: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é£è¶Šç»åº¦</span></span><br><span class="line">    <span class="keyword">const</span> flyOverLongitude = options.<span class="property">flyOverLongitude</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// flyOverLongitudeWeight: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é£è¶Šç»åº¦æƒé‡</span></span><br><span class="line">    <span class="keyword">const</span> flyOverLongitudeWeight = options.<span class="property">flyOverLongitudeWeight</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// convert: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è½¬æ¢åæ ‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="keyword">const</span> convert = options.<span class="property">convert</span> !== <span class="literal">undefined</span> ? options.<span class="property">convert</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// easingFunction: EasingFunction</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç¼“åŠ¨å‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> easingFunction = options.<span class="property">easingFunction</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookAt - çœ‹å‘ç›®æ ‡</span></span><br><span class="line">  <span class="title function_">lookAt</span>(<span class="params">target, offset</span>) &#123;</span><br><span class="line">    <span class="comment">// target: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›®æ ‡ä½ç½®</span></span><br><span class="line">    <span class="comment">// offset: Cartesian3 | HeadingPitchRange</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åç§»é‡æˆ–æ–¹å‘è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookAtTransform - åº”ç”¨å˜æ¢åçœ‹å‘ç›®æ ‡</span></span><br><span class="line">  <span class="title function_">lookAtTransform</span>(<span class="params">transform, offset</span>) &#123;</span><br><span class="line">    <span class="comment">// transform: Matrix4</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å˜æ¢çŸ©é˜µ</span></span><br><span class="line">    <span class="comment">// offset: Cartesian3 | HeadingPitchRange</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åç§»é‡</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === ç§»åŠ¨æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// move - ç§»åŠ¨ç›¸æœº</span></span><br><span class="line">  <span class="title function_">move</span>(<span class="params">direction, amount</span>) &#123;</span><br><span class="line">    <span class="comment">// direction: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç§»åŠ¨æ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰</span></span><br><span class="line">    <span class="comment">// amount: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç§»åŠ¨è·ç¦»ï¼ˆç±³ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveForward - å‘å‰ç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveForward</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveBackward - å‘åç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveBackward</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveUp - å‘ä¸Šç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveUp</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveDown - å‘ä¸‹ç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveDown</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveLeft - å‘å·¦ç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveLeft</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// moveRight - å‘å³ç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">moveRight</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultMoveAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç§»åŠ¨è·ç¦»</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === æ—‹è½¬æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// look - æ—‹è½¬ç›¸æœº</span></span><br><span class="line">  <span class="title function_">look</span>(<span class="params">axis, angle</span>) &#123;</span><br><span class="line">    <span class="comment">// axis: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—‹è½¬è½´</span></span><br><span class="line">    <span class="comment">// angle: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookLeft - å‘å·¦çœ‹</span></span><br><span class="line">  <span class="title function_">lookLeft</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultLookAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookRight - å‘å³çœ‹</span></span><br><span class="line">  <span class="title function_">lookRight</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultLookAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookUp - å‘ä¸Šçœ‹</span></span><br><span class="line">  <span class="title function_">lookUp</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultLookAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lookDown - å‘ä¸‹çœ‹</span></span><br><span class="line">  <span class="title function_">lookDown</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultLookAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rotate - ç»•ç‚¹æ—‹è½¬</span></span><br><span class="line">  <span class="title function_">rotate</span>(<span class="params">axis, angle</span>) &#123;</span><br><span class="line">    <span class="comment">// axis: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—‹è½¬è½´</span></span><br><span class="line">    <span class="comment">// angle: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rotateLeft - å‘å·¦æ—‹è½¬</span></span><br><span class="line">  <span class="title function_">rotateLeft</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultRotateAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rotateRight - å‘å³æ—‹è½¬</span></span><br><span class="line">  <span class="title function_">rotateRight</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultRotateAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rotateUp - å‘ä¸Šæ—‹è½¬</span></span><br><span class="line">  <span class="title function_">rotateUp</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultRotateAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rotateDown - å‘ä¸‹æ—‹è½¬</span></span><br><span class="line">  <span class="title function_">rotateDown</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultRotateAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === ç¼©æ”¾æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// zoomIn - æ”¾å¤§</span></span><br><span class="line">  <span class="title function_">zoomIn</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultZoomAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç¼©æ”¾è·ç¦»ï¼ˆç±³ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// zoomOut - ç¼©å°</span></span><br><span class="line">  <span class="title function_">zoomOut</span>(<span class="params">amount = <span class="variable language_">this</span>.defaultZoomAmount</span>) &#123;</span><br><span class="line">    <span class="comment">// amount: number - ç¼©æ”¾è·ç¦»ï¼ˆç±³ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === åæ ‡è½¬æ¢æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// pickEllipsoid - æ‹¾å–æ¤­çƒé¢</span></span><br><span class="line">  <span class="title function_">pickEllipsoid</span>(<span class="params">windowPosition, ellipsoid = Cesium.Ellipsoid.WGS84</span>) &#123;</span><br><span class="line">    <span class="comment">// windowPosition: Cartesian2</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å±å¹•åæ ‡</span></span><br><span class="line">    <span class="comment">// ellipsoid: Ellipsoid</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3 | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getPickRay - è·å–æ‹¾å–å°„çº¿</span></span><br><span class="line">  <span class="title function_">getPickRay</span>(<span class="params">windowPosition</span>) &#123;</span><br><span class="line">    <span class="comment">// windowPosition: Cartesian2</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å±å¹•åæ ‡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Ray</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// worldToCameraCoordinates - ä¸–ç•Œåæ ‡è½¬ç›¸æœºåæ ‡</span></span><br><span class="line">  <span class="title function_">worldToCameraCoordinates</span>(<span class="params">cartesian, result</span>) &#123;</span><br><span class="line">    <span class="comment">// cartesian: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ä¸–ç•Œåæ ‡</span></span><br><span class="line">    <span class="comment">// result: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cameraToWorldCoordinates - ç›¸æœºåæ ‡è½¬ä¸–ç•Œåæ ‡</span></span><br><span class="line">  <span class="title function_">cameraToWorldCoordinates</span>(<span class="params">cartesian, result</span>) &#123;</span><br><span class="line">    <span class="comment">// cartesian: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›¸æœºåæ ‡</span></span><br><span class="line">    <span class="comment">// result: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === è®¡ç®—å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// heading: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: èˆªå‘è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">heading</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="property">TWO_PI</span> - <span class="title class_">Math</span>.<span class="title function_">atan2</span>(<span class="variable language_">this</span>.<span class="property">right</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">right</span>.<span class="property">x</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pitch: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ä¿¯ä»°è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">pitch</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">asin</span>(<span class="variable language_">this</span>.<span class="property">direction</span>.<span class="property">z</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// roll: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç¿»æ»šè§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">roll</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">atan2</span>(-<span class="variable language_">this</span>.<span class="property">up</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">up</span>.<span class="property">z</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// positionCartographic: Cartographic</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: åœ°ç†åæ ‡ä½ç½®</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">positionCartographic</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(<span class="variable language_">this</span>.<span class="property">position</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸æœºä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> camera = viewer.<span class="property">camera</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç›¸æœºä½ç½®</span></span><br><span class="line">camera.<span class="title function_">setView</span>(&#123;</span><br><span class="line">  <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">1000</span>),</span><br><span class="line">  <span class="attr">orientation</span>: &#123;</span><br><span class="line">    <span class="attr">heading</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="comment">// æ­£åŒ—æ–¹å‘</span></span><br><span class="line">    <span class="attr">pitch</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(-<span class="number">45</span>), <span class="comment">// å‘ä¸‹45åº¦</span></span><br><span class="line">    <span class="attr">roll</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="comment">// æ— ç¿»æ»š</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é£è¡Œåˆ°ä½ç½®</span></span><br><span class="line">camera.<span class="title function_">flyTo</span>(&#123;</span><br><span class="line">  <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(<span class="number">115</span>, <span class="number">39</span>, <span class="number">117</span>, <span class="number">41</span>),</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">3.0</span>,</span><br><span class="line">  <span class="attr">complete</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;é£è¡Œå®Œæˆ&#x27;</span>),</span><br><span class="line">  <span class="attr">cancel</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;é£è¡Œå–æ¶ˆ&#x27;</span>),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸æœºäº‹ä»¶ç›‘å¬</span></span><br><span class="line">camera.<span class="property">moveStart</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›¸æœºå¼€å§‹ç§»åŠ¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">camera.<span class="property">moveEnd</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›¸æœºåœæ­¢ç§»åŠ¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">camera.<span class="property">changed</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›¸æœºå‘ç”Ÿå˜åŒ–&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸æœºæ§åˆ¶</span></span><br><span class="line">camera.<span class="title function_">moveForward</span>(<span class="number">1000</span>) <span class="comment">// å‘å‰ç§»åŠ¨1000ç±³</span></span><br><span class="line">camera.<span class="title function_">lookLeft</span>(<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">4</span>) <span class="comment">// å‘å·¦çœ‹45åº¦</span></span><br><span class="line">camera.<span class="title function_">zoomIn</span>(<span class="number">500</span>) <span class="comment">// æ”¾å¤§500ç±³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ç›¸æœºä¿¡æ¯</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›¸æœºä½ç½®:&#x27;</span>, camera.<span class="property">position</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›¸æœºæ–¹å‘:&#x27;</span>, camera.<span class="property">direction</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;èˆªå‘è§’:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(camera.<span class="property">heading</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä¿¯ä»°è§’:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(camera.<span class="property">pitch</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç¿»æ»šè§’:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(camera.<span class="property">roll</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// åæ ‡è½¬æ¢</span></span><br><span class="line"><span class="keyword">const</span> screenPos = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"><span class="keyword">const</span> worldPos = camera.<span class="title function_">pickEllipsoid</span>(screenPos)</span><br><span class="line"><span class="keyword">if</span> (worldPos) &#123;</span><br><span class="line">  <span class="keyword">const</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(worldPos)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç‚¹å‡»ä½ç½®:&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">longitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">longitude</span>),</span><br><span class="line">    <span class="attr">latitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">latitude</span>),</span><br><span class="line">    <span class="attr">height</span>: cartographic.<span class="property">height</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº‹ä»¶ç³»ç»Ÿè¯¦è§£"><a href="#äº‹ä»¶ç³»ç»Ÿè¯¦è§£" class="headerlink" title="äº‹ä»¶ç³»ç»Ÿè¯¦è§£"></a>äº‹ä»¶ç³»ç»Ÿè¯¦è§£</h2><h3 id="ScreenSpaceEventHandler-å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨"><a href="#ScreenSpaceEventHandler-å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="ScreenSpaceEventHandler å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨"></a>ScreenSpaceEventHandler å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ScreenSpaceEventHandler - å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ScreenSpaceEventHandler</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">canvas</span>) &#123;</span><br><span class="line">    <span class="comment">// canvas: HTMLCanvasElement</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: äº‹ä»¶ç›‘å¬çš„ç”»å¸ƒå…ƒç´ </span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span> = canvas</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// setInputAction - è®¾ç½®è¾“å…¥åŠ¨ä½œ</span></span><br><span class="line">  <span class="title function_">setInputAction</span>(<span class="params">action, type, modifier</span>) &#123;</span><br><span class="line">    <span class="comment">// action: function</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="comment">// å‚æ•°: eventå¯¹è±¡ï¼ŒåŒ…å«positionç­‰ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// type: ScreenSpaceEventType</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: äº‹ä»¶ç±»å‹</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: LEFT_CLICK, LEFT_DOUBLE_CLICK, LEFT_DOWN, LEFT_UP,</span></span><br><span class="line">    <span class="comment">//       RIGHT_CLICK, RIGHT_DOWN, RIGHT_UP,</span></span><br><span class="line">    <span class="comment">//       MIDDLE_CLICK, MIDDLE_DOWN, MIDDLE_UP,</span></span><br><span class="line">    <span class="comment">//       MOUSE_MOVE, WHEEL, PINCH_START, PINCH_END, PINCH_MOVE</span></span><br><span class="line">    <span class="comment">// modifier: KeyboardEventModifier (å¯é€‰)</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é”®ç›˜ä¿®é¥°ç¬¦</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: SHIFT, CTRL, ALT</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getInputAction - è·å–è¾“å…¥åŠ¨ä½œ</span></span><br><span class="line">  <span class="title function_">getInputAction</span>(<span class="params">type, modifier</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›: function | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// removeInputAction - ç§»é™¤è¾“å…¥åŠ¨ä½œ</span></span><br><span class="line">  <span class="title function_">removeInputAction</span>(<span class="params">type, modifier</span>) &#123;</span><br><span class="line">    <span class="comment">// ç§»é™¤æŒ‡å®šç±»å‹çš„äº‹ä»¶å¤„ç†</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isDestroyed - æ˜¯å¦å·²é”€æ¯</span></span><br><span class="line">  <span class="title function_">isDestroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_isDestroyed</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// destroy - é”€æ¯å¤„ç†å™¨</span></span><br><span class="line">  <span class="title function_">destroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶ç±»å‹è¯¦è§£</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ScreenSpaceEventType</span> = &#123;</span><br><span class="line">  <span class="comment">// é¼ æ ‡ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="attr">LEFT_CLICK</span>: <span class="number">0</span>, <span class="comment">// å·¦é”®å•å‡»</span></span><br><span class="line">  <span class="attr">LEFT_DOUBLE_CLICK</span>: <span class="number">1</span>, <span class="comment">// å·¦é”®åŒå‡»</span></span><br><span class="line">  <span class="attr">LEFT_DOWN</span>: <span class="number">2</span>, <span class="comment">// å·¦é”®æŒ‰ä¸‹</span></span><br><span class="line">  <span class="attr">LEFT_UP</span>: <span class="number">3</span>, <span class="comment">// å·¦é”®æŠ¬èµ·</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">RIGHT_CLICK</span>: <span class="number">5</span>, <span class="comment">// å³é”®å•å‡»</span></span><br><span class="line">  <span class="attr">RIGHT_DOWN</span>: <span class="number">6</span>, <span class="comment">// å³é”®æŒ‰ä¸‹</span></span><br><span class="line">  <span class="attr">RIGHT_UP</span>: <span class="number">7</span>, <span class="comment">// å³é”®æŠ¬èµ·</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">MIDDLE_CLICK</span>: <span class="number">10</span>, <span class="comment">// ä¸­é”®å•å‡»</span></span><br><span class="line">  <span class="attr">MIDDLE_DOWN</span>: <span class="number">11</span>, <span class="comment">// ä¸­é”®æŒ‰ä¸‹</span></span><br><span class="line">  <span class="attr">MIDDLE_UP</span>: <span class="number">12</span>, <span class="comment">// ä¸­é”®æŠ¬èµ·</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¼ æ ‡ç§»åŠ¨å’Œæ»šè½®</span></span><br><span class="line">  <span class="attr">MOUSE_MOVE</span>: <span class="number">15</span>, <span class="comment">// é¼ æ ‡ç§»åŠ¨</span></span><br><span class="line">  <span class="attr">WHEEL</span>: <span class="number">16</span>, <span class="comment">// æ»šè½®æ»šåŠ¨</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§¦æ‘¸äº‹ä»¶</span></span><br><span class="line">  <span class="attr">PINCH_START</span>: <span class="number">17</span>, <span class="comment">// æåˆå¼€å§‹</span></span><br><span class="line">  <span class="attr">PINCH_END</span>: <span class="number">18</span>, <span class="comment">// æåˆç»“æŸ</span></span><br><span class="line">  <span class="attr">PINCH_MOVE</span>: <span class="number">19</span>, <span class="comment">// æåˆç§»åŠ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®ç›˜ä¿®é¥°ç¬¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">KeyboardEventModifier</span> = &#123;</span><br><span class="line">  <span class="attr">SHIFT</span>: <span class="number">0</span>, <span class="comment">// Shifté”®</span></span><br><span class="line">  <span class="attr">CTRL</span>: <span class="number">1</span>, <span class="comment">// Ctrlé”®</span></span><br><span class="line">  <span class="attr">ALT</span>: <span class="number">2</span>, <span class="comment">// Alté”®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å¤„ç†ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> handler = viewer.<span class="property">cesiumWidget</span>.<span class="property">screenSpaceEventHandler</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¦é”®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> position = event.<span class="property">position</span> <span class="comment">// Cartesian2å±å¹•åæ ‡</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹¾å–å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(position)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Cesium</span>.<span class="title function_">defined</span>(pickedObject)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç‚¹å‡»äº†å¯¹è±¡:&#x27;</span>, pickedObject.<span class="property">id</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰ä¸­å®ä½“</span></span><br><span class="line">    viewer.<span class="property">selectedEntity</span> = pickedObject.<span class="property">id</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹¾å–åœ°é¢ä½ç½®</span></span><br><span class="line">    <span class="keyword">const</span> cartesian = viewer.<span class="property">camera</span>.<span class="title function_">pickEllipsoid</span>(position, viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">ellipsoid</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cartesian) &#123;</span><br><span class="line">      <span class="keyword">const</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(cartesian)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç‚¹å‡»åœ°é¢ä½ç½®:&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">longitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">longitude</span>),</span><br><span class="line">        <span class="attr">latitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">latitude</span>),</span><br><span class="line">        <span class="attr">height</span>: cartographic.<span class="property">height</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å³é”®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> position = event.<span class="property">position</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ˜¾ç¤ºä¸Šä¸‹æ–‡èœå•</span></span><br><span class="line">  <span class="title function_">showContextMenu</span>(position)</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">RIGHT_CLICK</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> startPosition = event.<span class="property">startPosition</span> <span class="comment">// å¼€å§‹ä½ç½®</span></span><br><span class="line">  <span class="keyword">const</span> endPosition = event.<span class="property">endPosition</span> <span class="comment">// ç»“æŸä½ç½®</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹¾å–æ‚¬åœå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(endPosition)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Cesium</span>.<span class="title function_">defined</span>(pickedObject)) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºå·¥å…·æç¤º</span></span><br><span class="line">    <span class="title function_">showTooltip</span>(endPosition, pickedObject.<span class="property">id</span>.<span class="property">name</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;default&#x27;</span></span><br><span class="line">    <span class="title function_">hideTooltip</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ»šè½®äº‹ä»¶</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> delta = event <span class="comment">// æ»šè½®å¢é‡</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ»šè½®æ»šåŠ¨:&#x27;</span>, delta)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰ç¼©æ”¾é€»è¾‘</span></span><br><span class="line">  <span class="keyword">if</span> (delta &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    viewer.<span class="property">camera</span>.<span class="title function_">zoomIn</span>(viewer.<span class="property">camera</span>.<span class="property">defaultZoomAmount</span> * <span class="number">0.5</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    viewer.<span class="property">camera</span>.<span class="title function_">zoomOut</span>(viewer.<span class="property">camera</span>.<span class="property">defaultZoomAmount</span> * <span class="number">0.5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">WHEEL</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¦é”®æ‹–æ‹½äº‹ä»¶</span></span><br><span class="line"><span class="keyword">let</span> isDragging = <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> startPosition</span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  isDragging = <span class="literal">true</span></span><br><span class="line">  startPosition = event.<span class="property">position</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¦ç”¨é»˜è®¤ç›¸æœºæ§åˆ¶</span></span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">enableRotate</span> = <span class="literal">false</span></span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_DOWN</span>)</span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (isDragging) &#123;</span><br><span class="line">    <span class="keyword">const</span> endPosition = event.<span class="property">endPosition</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—æ‹–æ‹½è·ç¦»</span></span><br><span class="line">    <span class="keyword">const</span> deltaX = endPosition.<span class="property">x</span> - startPosition.<span class="property">x</span></span><br><span class="line">    <span class="keyword">const</span> deltaY = endPosition.<span class="property">y</span> - startPosition.<span class="property">y</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‹–æ‹½è·ç¦»:&#x27;</span>, &#123; deltaX, deltaY &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰æ‹–æ‹½é€»è¾‘</span></span><br><span class="line">    <span class="title function_">customDragLogic</span>(deltaX, deltaY)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>)</span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  isDragging = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¢å¤é»˜è®¤ç›¸æœºæ§åˆ¶</span></span><br><span class="line">  viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">enableRotate</span> = <span class="literal">true</span></span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_UP</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦ä¿®é¥°ç¬¦çš„äº‹ä»¶</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(</span><br><span class="line">  <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Ctrl + å·¦é”®ç‚¹å‡»&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤šé€‰æ¨¡å¼</span></span><br><span class="line">    <span class="title function_">toggleEntitySelection</span>(event.<span class="property">position</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">KeyboardEventModifier</span>.<span class="property">CTRL</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(</span><br><span class="line">  <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Shift + å·¦é”®ç‚¹å‡»&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¡†é€‰æ¨¡å¼</span></span><br><span class="line">    <span class="title function_">startBoxSelection</span>(event.<span class="property">position</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">KeyboardEventModifier</span>.<span class="property">SHIFT</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦æ‘¸äº‹ä»¶ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰</span></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> position1 = event.<span class="property">position1</span> <span class="comment">// ç¬¬ä¸€ä¸ªè§¦æ‘¸ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> position2 = event.<span class="property">position2</span> <span class="comment">// ç¬¬äºŒä¸ªè§¦æ‘¸ç‚¹</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¼€å§‹æåˆæ‰‹åŠ¿&#x27;</span>)</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">PINCH_START</span>)</span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> position1 = event.<span class="property">position1</span></span><br><span class="line">  <span class="keyword">const</span> position2 = event.<span class="property">position2</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> distance = <span class="title class_">Cesium</span>.<span class="property">Cartesian2</span>.<span class="title function_">distance</span>(position1, position2)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æåˆè·ç¦»:&#x27;</span>, distance)</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">PINCH_MOVE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰å·¥å…·æç¤º</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showTooltip</span>(<span class="params">position, text</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> tooltip = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tooltip&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (!tooltip) &#123;</span><br><span class="line">    <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    div.<span class="property">id</span> = <span class="string">&#x27;tooltip&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(0,0,0,0.8)&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;white&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">padding</span> = <span class="string">&#x27;5px&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">borderRadius</span> = <span class="string">&#x27;3px&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    div.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;1000&#x27;</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tooltip = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tooltip&#x27;</span>)</span><br><span class="line">  tooltip.<span class="property">textContent</span> = text</span><br><span class="line">  tooltip.<span class="property">style</span>.<span class="property">left</span> = position.<span class="property">x</span> + <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">  tooltip.<span class="property">style</span>.<span class="property">top</span> = position.<span class="property">y</span> - <span class="number">30</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">  tooltip.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hideTooltip</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> tooltip = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tooltip&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (tooltip) &#123;</span><br><span class="line">    tooltip.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤äº‹ä»¶å¤„ç†</span></span><br><span class="line">handler.<span class="title function_">removeInputAction</span>(<span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>)</span><br><span class="line">handler.<span class="title function_">removeInputAction</span>(<span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>, <span class="title class_">Cesium</span>.<span class="property">KeyboardEventModifier</span>.<span class="property">CTRL</span>)</span><br></pre></td></tr></table></figure>

<h2 id="æè´¨ç³»ç»Ÿè¯¦è§£"><a href="#æè´¨ç³»ç»Ÿè¯¦è§£" class="headerlink" title="æè´¨ç³»ç»Ÿè¯¦è§£"></a>æè´¨ç³»ç»Ÿè¯¦è§£</h2><h3 id="Material-æè´¨ç±»"><a href="#Material-æè´¨ç±»" class="headerlink" title="Material æè´¨ç±»"></a>Material æè´¨ç±»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Material - æè´¨åŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Material</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// fabric: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æè´¨æè¿°å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// åŒ…å«: type, uniforms, sourceç­‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fabric</span> = options.<span class="property">fabric</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucent: boolean | function</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é€æ˜</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: æ ¹æ®æè´¨ç±»å‹ç¡®å®š</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucent</span> = options.<span class="property">translucent</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromType - ä»ç±»å‹åˆ›å»ºæè´¨</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromType</span>(<span class="params">type, uniforms</span>) &#123;</span><br><span class="line">    <span class="comment">// type: string - æè´¨ç±»å‹</span></span><br><span class="line">    <span class="comment">// uniforms: Object - æè´¨å‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">      <span class="attr">fabric</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: type,</span><br><span class="line">        <span class="attr">uniforms</span>: uniforms,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†…ç½®æè´¨ç±»å‹</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">ColorType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Color&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// çº¯è‰²</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">ImageType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Image&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// å›¾ç‰‡</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">DiffuseMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;DiffuseMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ¼«åå°„è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">AlphaMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;AlphaMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// é€æ˜è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">SpecularMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;SpecularMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// é•œé¢è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">EmissionMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;EmissionMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// å‘å°„è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">BumpMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;BumpMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// å‡¹å‡¸è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">NormalMapType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;NormalMap&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ³•çº¿è´´å›¾</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">GridType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Grid&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// ç½‘æ ¼</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">StripeType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Stripe&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ¡çº¹</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">CheckerboardType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Checkerboard&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ£‹ç›˜</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">DotType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Dot&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// ç‚¹</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">WaterType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Water&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ°´é¢</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">RimLightingType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;RimLighting&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// è¾¹ç¼˜å…‰ç…§</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">FadeType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Fade&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// æ¸å˜</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">PolylineArrowType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;PolylineArrow&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// ç®­å¤´çº¿</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">PolylineGlowType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;PolylineGlow&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// å‘å…‰çº¿</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">PolylineOutlineType</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;PolylineOutline&#x27;</span></span><br><span class="line">  &#125; <span class="comment">// è½®å»“çº¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢œè‰²æè´¨</span></span><br><span class="line"><span class="keyword">const</span> colorMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ColorMaterialProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾ç‰‡æè´¨</span></span><br><span class="line"><span class="keyword">const</span> imageMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ImageMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">image</span>: <span class="string">&#x27;path/to/texture.jpg&#x27;</span>, <span class="comment">// å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">  <span class="attr">repeat</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">2.0</span>, <span class="number">2.0</span>), <span class="comment">// é‡å¤æ¬¡æ•°</span></span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>, <span class="comment">// æ··åˆé¢œè‰²</span></span><br><span class="line">  <span class="attr">transparent</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦é€æ˜</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç½‘æ ¼æè´¨</span></span><br><span class="line"><span class="keyword">const</span> gridMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GridMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>, <span class="comment">// ç½‘æ ¼é¢œè‰²</span></span><br><span class="line">  <span class="attr">cellAlpha</span>: <span class="number">0.1</span>, <span class="comment">// å•å…ƒæ ¼é€æ˜åº¦</span></span><br><span class="line">  <span class="attr">lineCount</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">8</span>, <span class="number">8</span>), <span class="comment">// ç½‘æ ¼æ•°é‡</span></span><br><span class="line">  <span class="attr">lineThickness</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">2.0</span>, <span class="number">2.0</span>), <span class="comment">// çº¿æ¡ç²—ç»†</span></span><br><span class="line">  <span class="attr">lineOffset</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">0.5</span>, <span class="number">0.5</span>), <span class="comment">// çº¿æ¡åç§»</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡çº¹æè´¨</span></span><br><span class="line"><span class="keyword">const</span> stripeMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">StripeMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">evenColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>, <span class="comment">// å¶æ•°æ¡çº¹é¢œè‰²</span></span><br><span class="line">  <span class="attr">oddColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>, <span class="comment">// å¥‡æ•°æ¡çº¹é¢œè‰²</span></span><br><span class="line">  <span class="attr">repeat</span>: <span class="number">16.0</span>, <span class="comment">// æ¡çº¹æ•°é‡</span></span><br><span class="line">  <span class="attr">offset</span>: <span class="number">0.0</span>, <span class="comment">// åç§»é‡</span></span><br><span class="line">  <span class="attr">orientation</span>: <span class="title class_">Cesium</span>.<span class="property">StripeOrientation</span>.<span class="property">HORIZONTAL</span>, <span class="comment">// æ–¹å‘</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£‹ç›˜æè´¨</span></span><br><span class="line"><span class="keyword">const</span> checkerboardMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CheckerboardMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">evenColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>, <span class="comment">// å¶æ•°æ ¼é¢œè‰²</span></span><br><span class="line">  <span class="attr">oddColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>, <span class="comment">// å¥‡æ•°æ ¼é¢œè‰²</span></span><br><span class="line">  <span class="attr">repeat</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">4.0</span>, <span class="number">4.0</span>), <span class="comment">// é‡å¤æ¬¡æ•°</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹æè´¨</span></span><br><span class="line"><span class="keyword">const</span> dotMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">DotMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>, <span class="comment">// ç‚¹é¢œè‰²</span></span><br><span class="line">  <span class="attr">repeat</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">16.0</span>, <span class="number">16.0</span>), <span class="comment">// ç‚¹çš„é‡å¤æ¬¡æ•°</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ°´é¢æè´¨</span></span><br><span class="line"><span class="keyword">const</span> waterMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">WaterMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">baseWaterColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">AQUA</span>, <span class="comment">// åŸºç¡€æ°´è‰²</span></span><br><span class="line">  <span class="attr">blendColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>, <span class="comment">// æ··åˆé¢œè‰²</span></span><br><span class="line">  <span class="attr">specularMap</span>: <span class="string">&#x27;path/to/specular.jpg&#x27;</span>, <span class="comment">// é•œé¢è´´å›¾</span></span><br><span class="line">  <span class="attr">normalMap</span>: <span class="string">&#x27;path/to/normal.jpg&#x27;</span>, <span class="comment">// æ³•çº¿è´´å›¾</span></span><br><span class="line">  <span class="attr">frequency</span>: <span class="number">10.0</span>, <span class="comment">// æ³¢æµªé¢‘ç‡</span></span><br><span class="line">  <span class="attr">animationSpeed</span>: <span class="number">0.01</span>, <span class="comment">// åŠ¨ç”»é€Ÿåº¦</span></span><br><span class="line">  <span class="attr">amplitude</span>: <span class="number">1.0</span>, <span class="comment">// æ³¢å¹…</span></span><br><span class="line">  <span class="attr">specularIntensity</span>: <span class="number">0.5</span>, <span class="comment">// é•œé¢å¼ºåº¦</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾¹ç¼˜å…‰ç…§æè´¨</span></span><br><span class="line"><span class="keyword">const</span> rimLightingMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">RimLightingMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">LIME</span>, <span class="comment">// è¾¹ç¼˜é¢œè‰²</span></span><br><span class="line">  <span class="attr">rimColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>, <span class="comment">// è¾¹ç¼˜å…‰é¢œè‰²</span></span><br><span class="line">  <span class="attr">alpha</span>: <span class="number">1.0</span>, <span class="comment">// é€æ˜åº¦</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸å˜æè´¨</span></span><br><span class="line"><span class="keyword">const</span> fadeMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">FadeMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">fadeInColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>, <span class="comment">// æ¸å…¥é¢œè‰²</span></span><br><span class="line">  <span class="attr">fadeOutColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>, <span class="comment">// æ¸å‡ºé¢œè‰²</span></span><br><span class="line">  <span class="attr">maximumDistance</span>: <span class="number">500000.0</span>, <span class="comment">// æœ€å¤§è·ç¦»</span></span><br><span class="line">  <span class="attr">repeat</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦é‡å¤</span></span><br><span class="line">  <span class="attr">fadeDirection</span>: &#123;</span><br><span class="line">    <span class="comment">// æ¸å˜æ–¹å‘</span></span><br><span class="line">    <span class="attr">x</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0.0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ®µçº¿æè´¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´çº¿æè´¨</span></span><br><span class="line"><span class="keyword">const</span> arrowMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineArrowMaterialProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å…‰çº¿æè´¨</span></span><br><span class="line"><span class="keyword">const</span> glowMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineGlowMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">glowPower</span>: <span class="number">0.2</span>, <span class="comment">// å‘å…‰å¼ºåº¦</span></span><br><span class="line">  <span class="attr">taperPower</span>: <span class="number">0.5</span>, <span class="comment">// é”¥å½¢å¼ºåº¦</span></span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>, <span class="comment">// é¢œè‰²</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™šçº¿æè´¨</span></span><br><span class="line"><span class="keyword">const</span> dashMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineDashMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">CYAN</span>, <span class="comment">// é¢œè‰²</span></span><br><span class="line">  <span class="attr">gapColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">TRANSPARENT</span>, <span class="comment">// é—´éš™é¢œè‰²</span></span><br><span class="line">  <span class="attr">dashLength</span>: <span class="number">16.0</span>, <span class="comment">// è™šçº¿é•¿åº¦</span></span><br><span class="line">  <span class="attr">dashPattern</span>: <span class="number">255</span>, <span class="comment">// è™šçº¿æ¨¡å¼ï¼ˆäºŒè¿›åˆ¶ï¼‰</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½®å»“çº¿æè´¨</span></span><br><span class="line"><span class="keyword">const</span> outlineMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineOutlineMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">ORANGE</span>, <span class="comment">// å†…éƒ¨é¢œè‰²</span></span><br><span class="line">  <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>, <span class="comment">// è½®å»“é¢œè‰²</span></span><br><span class="line">  <span class="attr">outlineWidth</span>: <span class="number">2.0</span>, <span class="comment">// è½®å»“å®½åº¦</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ç€è‰²å™¨æè´¨</span></span><br><span class="line"><span class="keyword">const</span> customMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">  <span class="attr">fabric</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;CustomShader&#x27;</span>,</span><br><span class="line">    <span class="attr">uniforms</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Color</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),</span><br><span class="line">      <span class="attr">time</span>: <span class="number">0.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">`</span></span><br><span class="line"><span class="string">      uniform vec4 color;</span></span><br><span class="line"><span class="string">      uniform float time;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      czm_material czm_getMaterial(czm_materialInput materialInput) &#123;</span></span><br><span class="line"><span class="string">        czm_material material = czm_getDefaultMaterial(materialInput);</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        vec2 st = materialInput.st;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        // åŠ¨ç”»æ³¢çº¹æ•ˆæœ</span></span><br><span class="line"><span class="string">        float wave = sin(st.s * 10.0 + time) * 0.5 + 0.5;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        material.diffuse = color.rgb * wave;</span></span><br><span class="line"><span class="string">        material.alpha = color.a;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        return material;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨æè´¨åˆ°å®ä½“</span></span><br><span class="line"><span class="keyword">const</span> entity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">rectangle</span>: &#123;</span><br><span class="line">    <span class="attr">coordinates</span>: <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.0</span>, <span class="number">39.0</span>, <span class="number">117.0</span>, <span class="number">40.0</span>),</span><br><span class="line">    <span class="attr">material</span>: imageMaterial, <span class="comment">// åº”ç”¨å›¾ç‰‡æè´¨</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€æ”¹å˜æè´¨</span></span><br><span class="line">entity.<span class="property">rectangle</span>.<span class="property">material</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ ¹æ®æ—¶é—´å˜åŒ–è¿”å›ä¸åŒæè´¨</span></span><br><span class="line">  <span class="keyword">const</span> time = viewer.<span class="property">clock</span>.<span class="property">currentTime</span></span><br><span class="line">  <span class="keyword">const</span> seconds = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(time, viewer.<span class="property">clock</span>.<span class="property">startTime</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (seconds % <span class="number">4</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨ç”»ç³»ç»Ÿè¯¦è§£"><a href="#åŠ¨ç”»ç³»ç»Ÿè¯¦è§£" class="headerlink" title="åŠ¨ç”»ç³»ç»Ÿè¯¦è§£"></a>åŠ¨ç”»ç³»ç»Ÿè¯¦è§£</h2><h3 id="Animation-åŠ¨ç”»"><a href="#Animation-åŠ¨ç”»" class="headerlink" title="Animation åŠ¨ç”»"></a>Animation åŠ¨ç”»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Clock - æ—¶é’Ÿç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// startTime: JulianDate</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: JulianDate.now()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">startTime</span> = options.<span class="property">startTime</span> || <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// stopTime: JulianDate</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: å¼€å§‹æ—¶é—´ + 1å¤©</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stopTime</span> =</span><br><span class="line">      options.<span class="property">stopTime</span> || <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addDays</span>(<span class="variable language_">this</span>.<span class="property">startTime</span>, <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// currentTime: JulianDate</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å½“å‰æ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentTime</span> = options.<span class="property">currentTime</span> || <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">clone</span>(<span class="variable language_">this</span>.<span class="property">startTime</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiplier: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—¶é—´å€ç‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0ï¼ˆå®æ—¶ï¼‰</span></span><br><span class="line">    <span class="comment">// æ­£å€¼: æ­£å‘æ’­æ”¾ï¼Œè´Ÿå€¼: åå‘æ’­æ”¾</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">multiplier</span> = options.<span class="property">multiplier</span> !== <span class="literal">undefined</span> ? options.<span class="property">multiplier</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clockStep: ClockStep</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—¶é’Ÿæ­¥è¿›æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ClockStep.SYSTEM_CLOCK_MULTIPLIER</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: TICK_DEPENDENT, SYSTEM_CLOCK_MULTIPLIER, SYSTEM_CLOCK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clockStep</span> = options.<span class="property">clockStep</span> || <span class="title class_">Cesium</span>.<span class="property">ClockStep</span>.<span class="property">SYSTEM_CLOCK_MULTIPLIER</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clockRange: ClockRange</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—¶é’ŸèŒƒå›´è¡Œä¸º</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ClockRange.UNBOUNDED</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: UNBOUNDED, CLAMPED, LOOP_STOP</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clockRange</span> = options.<span class="property">clockRange</span> || <span class="title class_">Cesium</span>.<span class="property">ClockRange</span>.<span class="property">UNBOUNDED</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// canAnimate: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ä»¥åŠ¨ç”»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canAnimate</span> = options.<span class="property">canAnimate</span> !== <span class="literal">undefined</span> ? options.<span class="property">canAnimate</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shouldAnimate: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦åº”è¯¥åŠ¨ç”»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shouldAnimate</span> = options.<span class="property">shouldAnimate</span> !== <span class="literal">undefined</span> ? options.<span class="property">shouldAnimate</span> : <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// onTick: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ—¶é’Ÿæ»´ç­”äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// å‚æ•°: clockå¯¹è±¡</span></span><br><span class="line">  onTick = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// onStop: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ—¶é’Ÿåœæ­¢äº‹ä»¶</span></span><br><span class="line">  onStop = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// tick - æ—¶é’Ÿæ»´ç­”</span></span><br><span class="line">  <span class="title function_">tick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°å½“å‰æ—¶é—´å¹¶è§¦å‘äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> currentTime = <span class="variable language_">this</span>.<span class="property">currentTime</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">onTick</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">return</span> currentTime</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´ç›¸å…³ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ClockStep</span> = &#123;</span><br><span class="line">  <span class="attr">TICK_DEPENDENT</span>: <span class="number">0</span>, <span class="comment">// ä¾èµ–æ»´ç­”</span></span><br><span class="line">  <span class="attr">SYSTEM_CLOCK_MULTIPLIER</span>: <span class="number">1</span>, <span class="comment">// ç³»ç»Ÿæ—¶é’Ÿå€ç‡</span></span><br><span class="line">  <span class="attr">SYSTEM_CLOCK</span>: <span class="number">2</span>, <span class="comment">// ç³»ç»Ÿæ—¶é’Ÿ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ClockRange</span> = &#123;</span><br><span class="line">  <span class="attr">UNBOUNDED</span>: <span class="number">0</span>, <span class="comment">// æ— ç•Œé™</span></span><br><span class="line">  <span class="attr">CLAMPED</span>: <span class="number">1</span>, <span class="comment">// é’³åˆ¶</span></span><br><span class="line">  <span class="attr">LOOP_STOP</span>: <span class="number">2</span>, <span class="comment">// å¾ªç¯åœæ­¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Property - å±æ€§ç±»ï¼ˆåŠ¨ç”»åŸºç¡€ï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Property</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// definitionChanged: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®šä¹‰å˜åŒ–äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">definitionChanged</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// isConstant: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä¸ºå¸¸é‡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isConstant</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getValue - è·å–æŒ‡å®šæ—¶é—´çš„å€¼</span></span><br><span class="line">  <span class="title function_">getValue</span>(<span class="params">time, result</span>) &#123;</span><br><span class="line">    <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">    <span class="comment">// result: Object - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: å±æ€§å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// equals - æ¯”è¾ƒç›¸ç­‰</span></span><br><span class="line">  <span class="title function_">equals</span>(<span class="params">other</span>) &#123;</span><br><span class="line">    <span class="comment">// other: Property - å…¶ä»–å±æ€§</span></span><br><span class="line">    <span class="comment">// è¿”å›: boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ConstantProperty - å¸¸é‡å±æ€§</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConstantProperty</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Property</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_value</span> = value</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isConstant</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getValue</span>(<span class="params">time, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setValue</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> oldValue = <span class="variable language_">this</span>.<span class="property">_value</span></span><br><span class="line">    <span class="keyword">if</span> (oldValue !== value) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_value</span> = value</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">definitionChanged</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SampledProperty - é‡‡æ ·å±æ€§ï¼ˆå…³é”®å¸§åŠ¨ç”»ï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SampledProperty</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Property</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">type</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_type</span> = type</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_times</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_values</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_interpolationDegree</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_interpolationAlgorithm</span> = <span class="title class_">Cesium</span>.<span class="property">LinearApproximation</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addSample - æ·»åŠ é‡‡æ ·ç‚¹</span></span><br><span class="line">  <span class="title function_">addSample</span>(<span class="params">time, value</span>) &#123;</span><br><span class="line">    <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">    <span class="comment">// value: Object - å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addSamples - æ‰¹é‡æ·»åŠ é‡‡æ ·ç‚¹</span></span><br><span class="line">  <span class="title function_">addSamples</span>(<span class="params">times, values</span>) &#123;</span><br><span class="line">    <span class="comment">// times: Array&lt;JulianDate&gt; - æ—¶é—´æ•°ç»„</span></span><br><span class="line">    <span class="comment">// values: Array&lt;Object&gt; - å€¼æ•°ç»„</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// removeSample - ç§»é™¤é‡‡æ ·ç‚¹</span></span><br><span class="line">  <span class="title function_">removeSample</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="comment">// time: JulianDate - æ—¶é—´</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// setInterpolationOptions - è®¾ç½®æ’å€¼é€‰é¡¹</span></span><br><span class="line">  <span class="title function_">setInterpolationOptions</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// options.interpolationDegree: number - æ’å€¼åº¦æ•°</span></span><br><span class="line">    <span class="comment">// options.interpolationAlgorithm: InterpolationAlgorithm - æ’å€¼ç®—æ³•</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CallbackProperty - å›è°ƒå±æ€§ï¼ˆç¨‹åºåŒ–åŠ¨ç”»ï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CallbackProperty</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Property</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">callback, isConstant</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_callback</span> = callback</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isConstant</span> = isConstant || <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getValue</span>(<span class="params">time, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">_callback</span>(time, result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CompositeProperty - å¤åˆå±æ€§ï¼ˆåˆ†æ®µåŠ¨ç”»ï¼‰</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CompositeProperty</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Property</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_intervals</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeIntervalCollection</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addInterval - æ·»åŠ æ—¶é—´é—´éš”</span></span><br><span class="line">  <span class="title function_">addInterval</span>(<span class="params">interval</span>) &#123;</span><br><span class="line">    <span class="comment">// interval: TimeInterval - æ—¶é—´é—´éš”ï¼ˆåŒ…å«dataå±æ€§ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">addInterval</span>(interval)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨ç”»ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. ä½ç½®åŠ¨ç”»ï¼ˆå…³é”®å¸§ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> positionProperty = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SampledPositionProperty</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å…³é”®å¸§</span></span><br><span class="line"><span class="keyword">const</span> start = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line"><span class="keyword">const</span> stop = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">60</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line"></span><br><span class="line">positionProperty.<span class="title function_">addSample</span>(start, <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>))</span><br><span class="line">positionProperty.<span class="title function_">addSample</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">30</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.5</span>, <span class="number">39.95</span>, <span class="number">1000</span>),</span><br><span class="line">)</span><br><span class="line">positionProperty.<span class="title function_">addSample</span>(stop, <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.6</span>, <span class="number">40.0</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æ’å€¼æ–¹å¼</span></span><br><span class="line">positionProperty.<span class="title function_">setInterpolationOptions</span>(&#123;</span><br><span class="line">  <span class="attr">interpolationDegree</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">interpolationAlgorithm</span>: <span class="title class_">Cesium</span>.<span class="property">HermitePolynomialApproximation</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç§»åŠ¨å®ä½“</span></span><br><span class="line"><span class="keyword">const</span> movingEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: positionProperty,</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">uri</span>: <span class="string">&#x27;./models/airplane.gltf&#x27;</span>,</span><br><span class="line">    <span class="attr">scale</span>: <span class="number">2.0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">path</span>: &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">leadTime</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">trailTime</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">CYAN</span>,</span><br><span class="line">    <span class="attr">resolution</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ—‹è½¬åŠ¨ç”»ï¼ˆç¨‹åºåŒ–ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> rotationProperty = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> seconds = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(time, start)</span><br><span class="line">  <span class="keyword">const</span> angle = (seconds * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">10</span> <span class="comment">// æ¯20ç§’è½¬ä¸€åœˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Quaternion</span>.<span class="title function_">fromAxisAngle</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="property">UNIT_Z</span>, angle)</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rotatingEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">100</span>),</span><br><span class="line">  <span class="attr">orientation</span>: rotationProperty,</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">uri</span>: <span class="string">&#x27;./models/building.gltf&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. é¢œè‰²åŠ¨ç”»ï¼ˆå…³é”®å¸§ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> colorProperty = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SampledProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>)</span><br><span class="line"></span><br><span class="line">colorProperty.<span class="title function_">addSample</span>(start, <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>)</span><br><span class="line">colorProperty.<span class="title function_">addSample</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">15</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">GREEN</span>,</span><br><span class="line">)</span><br><span class="line">colorProperty.<span class="title function_">addSample</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">30</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>,</span><br><span class="line">)</span><br><span class="line">colorProperty.<span class="title function_">addSample</span>(</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">45</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line">)</span><br><span class="line">colorProperty.<span class="title function_">addSample</span>(stop, <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> coloredEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">200</span>),</span><br><span class="line">  <span class="attr">box</span>: &#123;</span><br><span class="line">    <span class="attr">dimensions</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>),</span><br><span class="line">    <span class="attr">material</span>: colorProperty,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å¤åˆåŠ¨ç”»ï¼ˆåˆ†æ®µï¼‰</span></span><br><span class="line"><span class="keyword">const</span> compositePosition = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CompositePositionProperty</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ®µï¼šé™æ­¢</span></span><br><span class="line">compositePosition.<span class="title function_">addInterval</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">    <span class="attr">start</span>: start,</span><br><span class="line">    <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">20</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ConstantPositionProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>)),</span><br><span class="line">  &#125;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ®µï¼šç§»åŠ¨</span></span><br><span class="line"><span class="keyword">const</span> movingInterval = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">20</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">40</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">  <span class="attr">data</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SampledPositionProperty</span>(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">movingInterval.<span class="property">data</span>.<span class="title function_">addSample</span>(</span><br><span class="line">  movingInterval.<span class="property">start</span>,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>),</span><br><span class="line">)</span><br><span class="line">movingInterval.<span class="property">data</span>.<span class="title function_">addSample</span>(movingInterval.<span class="property">stop</span>, <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.5</span>, <span class="number">40.0</span>, <span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line">compositePosition.<span class="title function_">addInterval</span>(movingInterval)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ®µï¼šå†æ¬¡é™æ­¢</span></span><br><span class="line">compositePosition.<span class="title function_">addInterval</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">    <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(start, <span class="number">40</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()),</span><br><span class="line">    <span class="attr">stop</span>: stop,</span><br><span class="line">    <span class="attr">data</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ConstantPositionProperty</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.5</span>, <span class="number">40.0</span>, <span class="number">1000</span>)),</span><br><span class="line">  &#125;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> compositeEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: compositePosition,</span><br><span class="line">  <span class="attr">point</span>: &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">LIME</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. æ—¶é’Ÿæ§åˆ¶</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">startTime</span> = start</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">stopTime</span> = stop</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">currentTime</span> = start</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">clockRange</span> = <span class="title class_">Cesium</span>.<span class="property">ClockRange</span>.<span class="property">LOOP_STOP</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">multiplier</span> = <span class="number">1</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">shouldAnimate</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é’Ÿäº‹ä»¶ç›‘å¬</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">onTick</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">clock</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰æ—¶é—´:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(clock.<span class="property">currentTime</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">onStop</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">clock</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åŠ¨ç”»åœæ­¢&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. æ’å€¼ç®—æ³•è¯¦è§£</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">InterpolationAlgorithm</span> = &#123;</span><br><span class="line">  <span class="comment">// çº¿æ€§æ’å€¼</span></span><br><span class="line">  <span class="attr">LINEAR</span>: <span class="title class_">Cesium</span>.<span class="property">LinearApproximation</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹‰æ ¼æœ—æ—¥æ’å€¼</span></span><br><span class="line">  <span class="attr">LAGRANGE</span>: <span class="title class_">Cesium</span>.<span class="property">LagrangePolynomialApproximation</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŸƒå°”ç±³ç‰¹æ’å€¼ï¼ˆå¹³æ»‘ï¼‰</span></span><br><span class="line">  <span class="attr">HERMITE</span>: <span class="title class_">Cesium</span>.<span class="property">HermitePolynomialApproximation</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸åŒçš„æ’å€¼ç®—æ³•</span></span><br><span class="line">positionProperty.<span class="title function_">setInterpolationOptions</span>(&#123;</span><br><span class="line">  <span class="attr">interpolationDegree</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">interpolationAlgorithm</span>: <span class="title class_">Cesium</span>.<span class="property">LinearApproximation</span>, <span class="comment">// çº¿æ€§æ’å€¼ï¼Œç›´çº¿è¿åŠ¨</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">positionProperty.<span class="title function_">setInterpolationOptions</span>(&#123;</span><br><span class="line">  <span class="attr">interpolationDegree</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">interpolationAlgorithm</span>: <span class="title class_">Cesium</span>.<span class="property">HermitePolynomialApproximation</span>, <span class="comment">// å¹³æ»‘æ›²çº¿è¿åŠ¨</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. å¤–æ¨ï¼ˆExtrapolationï¼‰</span></span><br><span class="line"><span class="keyword">const</span> extrapolationTypes = &#123;</span><br><span class="line">  <span class="attr">NONE</span>: <span class="title class_">Cesium</span>.<span class="property">ExtrapolationType</span>.<span class="property">NONE</span>, <span class="comment">// æ— å¤–æ¨</span></span><br><span class="line">  <span class="attr">HOLD</span>: <span class="title class_">Cesium</span>.<span class="property">ExtrapolationType</span>.<span class="property">HOLD</span>, <span class="comment">// ä¿æŒæœ€åå€¼</span></span><br><span class="line">  <span class="attr">EXTRAPOLATE</span>: <span class="title class_">Cesium</span>.<span class="property">ExtrapolationType</span>.<span class="property">EXTRAPOLATE</span>, <span class="comment">// ç»§ç»­å¤–æ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">positionProperty.<span class="property">forwardExtrapolationType</span> = <span class="title class_">Cesium</span>.<span class="property">ExtrapolationType</span>.<span class="property">EXTRAPOLATE</span></span><br><span class="line">positionProperty.<span class="property">forwardExtrapolationDuration</span> = <span class="number">10</span> <span class="comment">// å¤–æ¨10ç§’</span></span><br><span class="line"></span><br><span class="line">positionProperty.<span class="property">backwardExtrapolationType</span> = <span class="title class_">Cesium</span>.<span class="property">ExtrapolationType</span>.<span class="property">HOLD</span></span><br><span class="line">positionProperty.<span class="property">backwardExtrapolationDuration</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. åŠ¨ç”»æ§åˆ¶å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">playAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  viewer.<span class="property">clock</span>.<span class="property">shouldAnimate</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pauseAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  viewer.<span class="property">clock</span>.<span class="property">shouldAnimate</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resetAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  viewer.<span class="property">clock</span>.<span class="property">currentTime</span> = viewer.<span class="property">clock</span>.<span class="property">startTime</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setAnimationSpeed</span>(<span class="params">multiplier</span>) &#123;</span><br><span class="line">  viewer.<span class="property">clock</span>.<span class="property">multiplier</span> = multiplier</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reverseAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  viewer.<span class="property">clock</span>.<span class="property">multiplier</span> = -<span class="title class_">Math</span>.<span class="title function_">abs</span>(viewer.<span class="property">clock</span>.<span class="property">multiplier</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. ç²’å­ç³»ç»ŸåŠ¨ç”»ï¼ˆåŸºäºCallbackPropertyï¼‰</span></span><br><span class="line"><span class="keyword">const</span> particlePositions = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">  particlePositions.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">      <span class="number">116.4074</span> + (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">0.01</span>,</span><br><span class="line">      <span class="number">39.9042</span> + (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">0.01</span>,</span><br><span class="line">      <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1000</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">velocity</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(</span><br><span class="line">      (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">100</span>,</span><br><span class="line">      (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">100</span>,</span><br><span class="line">      (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">50</span>,</span><br><span class="line">    ),</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> particleProperty = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> seconds = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(time, start)</span><br><span class="line">  <span class="keyword">const</span> positions = []</span><br><span class="line"></span><br><span class="line">  particlePositions.<span class="title function_">forEach</span>(<span class="function">(<span class="params">particle</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newPos = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">add</span>(</span><br><span class="line">      particle.<span class="property">position</span>,</span><br><span class="line">      <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">multiplyByScalar</span>(particle.<span class="property">velocity</span>, seconds, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>()),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(),</span><br><span class="line">    )</span><br><span class="line">    positions.<span class="title function_">push</span>(newPos.<span class="property">x</span>, newPos.<span class="property">y</span>, newPos.<span class="property">z</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> positions</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨ç²’å­åŠ¨ç”»åˆ°PointPrimitiveCollection</span></span><br></pre></td></tr></table></figure>

<h2 id="å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£"><a href="#å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£" class="headerlink" title="å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£"></a>å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£</h2><h3 id="Primitive-å›¾å…ƒ"><a href="#Primitive-å›¾å…ƒ" class="headerlink" title="Primitive å›¾å…ƒ"></a>Primitive å›¾å…ƒ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Primitive - å›¾å…ƒåŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Primitive</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// geometryInstances: Array&lt;GeometryInstance&gt; | GeometryInstance</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‡ ä½•å®ä¾‹æ•°ç»„</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: å®šä¹‰å›¾å…ƒçš„å‡ ä½•å½¢çŠ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">geometryInstances</span> = options.<span class="property">geometryInstances</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// appearance: Appearance</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤–è§‚å®šä¹‰</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ§åˆ¶å›¾å…ƒçš„æ¸²æŸ“æ–¹å¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">appearance</span> = options.<span class="property">appearance</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// show: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤º</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = options.<span class="property">show</span> !== <span class="literal">undefined</span> ? options.<span class="property">show</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// modelMatrix: Matrix4</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¨¡å‹å˜æ¢çŸ©é˜µ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Matrix4.IDENTITY</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">modelMatrix</span> = options.<span class="property">modelMatrix</span> || <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="property">IDENTITY</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexCacheOptimize: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä¼˜åŒ–é¡¶ç‚¹ç¼“å­˜</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexCacheOptimize</span> =</span><br><span class="line">      options.<span class="property">vertexCacheOptimize</span> !== <span class="literal">undefined</span> ? options.<span class="property">vertexCacheOptimize</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// interleave: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦äº¤é”™é¡¶ç‚¹å±æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interleave</span> = options.<span class="property">interleave</span> !== <span class="literal">undefined</span> ? options.<span class="property">interleave</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// compressVertices: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å‹ç¼©é¡¶ç‚¹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">compressVertices</span> = options.<span class="property">compressVertices</span> !== <span class="literal">undefined</span> ? options.<span class="property">compressVertices</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// releaseGeometryInstances: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦åœ¨æ¸²æŸ“åé‡Šæ”¾å‡ ä½•å®ä¾‹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">releaseGeometryInstances</span> =</span><br><span class="line">      options.<span class="property">releaseGeometryInstances</span> !== <span class="literal">undefined</span> ? options.<span class="property">releaseGeometryInstances</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// allowPicking: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å…è®¸æ‹¾å–</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">allowPicking</span> = options.<span class="property">allowPicking</span> !== <span class="literal">undefined</span> ? options.<span class="property">allowPicking</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// cull: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨è§†é”¥å‰”é™¤</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cull</span> = options.<span class="property">cull</span> !== <span class="literal">undefined</span> ? options.<span class="property">cull</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// asynchronous: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¼‚æ­¥åˆ›å»º</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">asynchronous</span> = options.<span class="property">asynchronous</span> !== <span class="literal">undefined</span> ? options.<span class="property">asynchronous</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// debugShowBoundingVolume: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºåŒ…å›´ä½“ï¼ˆè°ƒè¯•ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">debugShowBoundingVolume</span> =</span><br><span class="line">      options.<span class="property">debugShowBoundingVolume</span> !== <span class="literal">undefined</span> ? options.<span class="property">debugShowBoundingVolume</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.DISABLED</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = options.<span class="property">shadows</span> || <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// update - æ›´æ–°å›¾å…ƒ</span></span><br><span class="line">  <span class="title function_">update</span>(<span class="params">frameState</span>) &#123;</span><br><span class="line">    <span class="comment">// frameState: FrameState - å¸§çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// è¿”å›: void</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isDestroyed - æ˜¯å¦å·²é”€æ¯</span></span><br><span class="line">  <span class="title function_">isDestroyed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// destroy - é”€æ¯å›¾å…ƒ</span></span><br><span class="line">  <span class="title function_">destroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç†èµ„æº</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getGeometryInstanceAttributes - è·å–å‡ ä½•å®ä¾‹å±æ€§</span></span><br><span class="line">  <span class="title function_">getGeometryInstanceAttributes</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="comment">// id: string - å®ä¾‹ID</span></span><br><span class="line">    <span class="comment">// è¿”å›: Object - å±æ€§å¯¹è±¡</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GeometryInstance - å‡ ä½•å®ä¾‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GeometryInstance</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// geometry: Geometry</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‡ ä½•ä½“</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">geometry</span> = options.<span class="property">geometry</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// modelMatrix: Matrix4</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¨¡å‹å˜æ¢çŸ©é˜µ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Matrix4.IDENTITY</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">modelMatrix</span> = options.<span class="property">modelMatrix</span> || <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="property">IDENTITY</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// id: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä¾‹æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: æ‹¾å–å’Œå±æ€§æ›´æ–°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = options.<span class="property">id</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// attributes: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¯å®ä¾‹å±æ€§</span></span><br><span class="line">    <span class="comment">// ç”¨é€”: é¢œè‰²ã€æ˜¾ç¤ºçŠ¶æ€ç­‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">attributes</span> = options.<span class="property">attributes</span> || &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºç¡€å‡ ä½•ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// BoxGeometry - ç›’å­å‡ ä½•ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BoxGeometry</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// dimensions: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç›’å­å°ºå¯¸ï¼ˆé•¿ã€å®½ã€é«˜ï¼‰</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dimensions</span> = options.<span class="property">dimensions</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VertexFormat.DEFAULT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">Cesium</span>.<span class="property">VertexFormat</span>.<span class="property">DEFAULT</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// createGeometry - åˆ›å»ºå‡ ä½•ä½“</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">createGeometry</span>(<span class="params">boxGeometry</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›: Geometry | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// packedLength - æ‰“åŒ…é•¿åº¦</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">packedLength</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pack - æ‰“åŒ…</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">pack</span>(<span class="params">value, array, startingIndex = <span class="number">0</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// unpack - è§£åŒ…</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">unpack</span>(<span class="params">array, startingIndex = <span class="number">0</span>, result</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SphereGeometry - çƒä½“å‡ ä½•ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SphereGeometry</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// radius: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: çƒä½“åŠå¾„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">radius</span> = options.<span class="property">radius</span> !== <span class="literal">undefined</span> ? options.<span class="property">radius</span> : <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stackPartitions: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å †å åˆ†åŒºæ•°ï¼ˆçº¬åº¦æ–¹å‘ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 64</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stackPartitions</span> = options.<span class="property">stackPartitions</span> !== <span class="literal">undefined</span> ? options.<span class="property">stackPartitions</span> : <span class="number">64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// slicePartitions: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ‡ç‰‡åˆ†åŒºæ•°ï¼ˆç»åº¦æ–¹å‘ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 64</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">slicePartitions</span> = options.<span class="property">slicePartitions</span> !== <span class="literal">undefined</span> ? options.<span class="property">slicePartitions</span> : <span class="number">64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VertexFormat.DEFAULT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">Cesium</span>.<span class="property">VertexFormat</span>.<span class="property">DEFAULT</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CylinderGeometry - åœ†æŸ±ä½“å‡ ä½•ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CylinderGeometry</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// length: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ†æŸ±ä½“é•¿åº¦ï¼ˆé«˜åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">length</span> = options.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// topRadius: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶éƒ¨åŠå¾„</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">topRadius</span> = options.<span class="property">topRadius</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// bottomRadius: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åº•éƒ¨åŠå¾„</span></span><br><span class="line">    <span class="comment">// å¿…éœ€: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bottomRadius</span> = options.<span class="property">bottomRadius</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// slices: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ‡ç‰‡æ•°é‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 128</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">slices</span> = options.<span class="property">slices</span> !== <span class="literal">undefined</span> ? options.<span class="property">slices</span> : <span class="number">128</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VertexFormat.DEFAULT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">Cesium</span>.<span class="property">VertexFormat</span>.<span class="property">DEFAULT</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PlaneGeometry - å¹³é¢å‡ ä½•ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PlaneGeometry</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VertexFormat.DEFAULT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">Cesium</span>.<span class="property">VertexFormat</span>.<span class="property">DEFAULT</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// EllipsoidGeometry - æ¤­çƒä½“å‡ ä½•ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EllipsoidGeometry</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// radii: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“åŠå¾„ï¼ˆx, y, zï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3(1, 1, 1)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">radii</span> = options.<span class="property">radii</span> || <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// innerRadii: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å†…éƒ¨åŠå¾„ï¼ˆç”¨äºåˆ›å»ºç©ºå¿ƒæ¤­çƒï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">innerRadii</span> = options.<span class="property">innerRadii</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// minimumClock: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å°æ—¶é’Ÿè§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minimumClock</span> = options.<span class="property">minimumClock</span> !== <span class="literal">undefined</span> ? options.<span class="property">minimumClock</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumClock: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§æ—¶é’Ÿè§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 2Ï€</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumClock</span> =</span><br><span class="line">      options.<span class="property">maximumClock</span> !== <span class="literal">undefined</span> ? options.<span class="property">maximumClock</span> : <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="property">TWO_PI</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// minimumCone: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å°é”¥è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minimumCone</span> = options.<span class="property">minimumCone</span> !== <span class="literal">undefined</span> ? options.<span class="property">minimumCone</span> : <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumCone: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§é”¥è§’ï¼ˆå¼§åº¦ï¼‰</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Ï€</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumCone</span> = options.<span class="property">maximumCone</span> !== <span class="literal">undefined</span> ? options.<span class="property">maximumCone</span> : <span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stackPartitions: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å †å åˆ†åŒºæ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 64</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stackPartitions</span> = options.<span class="property">stackPartitions</span> !== <span class="literal">undefined</span> ? options.<span class="property">stackPartitions</span> : <span class="number">64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// slicePartitions: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ‡ç‰‡åˆ†åŒºæ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 64</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">slicePartitions</span> = options.<span class="property">slicePartitions</span> !== <span class="literal">undefined</span> ? options.<span class="property">slicePartitions</span> : <span class="number">64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: VertexFormat.DEFAULT</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">Cesium</span>.<span class="property">VertexFormat</span>.<span class="property">DEFAULT</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Appearance - å¤–è§‚ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MaterialAppearance - æè´¨å¤–è§‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MaterialAppearance</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// material: Material</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æè´¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Material.ColorType</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">material</span> = options.<span class="property">material</span> || <span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="title function_">fromType</span>(<span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="property">ColorType</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucent: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é€æ˜</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: æ ¹æ®æè´¨ç¡®å®š</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucent</span> = options.<span class="property">translucent</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexShaderSource: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹ç€è‰²å™¨æºç </span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ä½¿ç”¨å†…ç½®ç€è‰²å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexShaderSource</span> = options.<span class="property">vertexShaderSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fragmentShaderSource: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‰‡æ®µç€è‰²å™¨æºç </span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ä½¿ç”¨å†…ç½®ç€è‰²å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fragmentShaderSource</span> = options.<span class="property">fragmentShaderSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// renderState: RenderState</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¸²æŸ“çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: é»˜è®¤æ¸²æŸ“çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">renderState</span> = options.<span class="property">renderState</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// closed: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‡ ä½•ä½“æ˜¯å¦å°é—­</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">closed</span> = options.<span class="property">closed</span> !== <span class="literal">undefined</span> ? options.<span class="property">closed</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexFormat: VertexFormat</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹æ ¼å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: MaterialAppearance.vertexFormat</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexFormat</span> = options.<span class="property">vertexFormat</span> || <span class="title class_">MaterialAppearance</span>.<span class="property">vertexFormat</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// flat: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä½¿ç”¨å¹³é¢ç€è‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">flat</span> = options.<span class="property">flat</span> !== <span class="literal">undefined</span> ? options.<span class="property">flat</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// faceForward: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é¢å‘å‰æ–¹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: !closed</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">faceForward</span> = options.<span class="property">faceForward</span> !== <span class="literal">undefined</span> ? options.<span class="property">faceForward</span> : !<span class="variable language_">this</span>.<span class="property">closed</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PerInstanceColorAppearance - æ¯å®ä¾‹é¢œè‰²å¤–è§‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PerInstanceColorAppearance</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// flat: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦ä½¿ç”¨å¹³é¢ç€è‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">flat</span> = options.<span class="property">flat</span> !== <span class="literal">undefined</span> ? options.<span class="property">flat</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// faceForward: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é¢å‘å‰æ–¹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: !closed</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">faceForward</span> = options.<span class="property">faceForward</span> !== <span class="literal">undefined</span> ? options.<span class="property">faceForward</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// translucent: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é€æ˜</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">translucent</span> = options.<span class="property">translucent</span> !== <span class="literal">undefined</span> ? options.<span class="property">translucent</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// closed: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å‡ ä½•ä½“æ˜¯å¦å°é—­</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">closed</span> = options.<span class="property">closed</span> !== <span class="literal">undefined</span> ? options.<span class="property">closed</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// vertexShaderSource: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é¡¶ç‚¹ç€è‰²å™¨æºç </span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vertexShaderSource</span> = options.<span class="property">vertexShaderSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fragmentShaderSource: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‰‡æ®µç€è‰²å™¨æºç </span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fragmentShaderSource</span> = options.<span class="property">fragmentShaderSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// renderState: RenderState</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¸²æŸ“çŠ¶æ€</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">renderState</span> = options.<span class="property">renderState</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡ ä½•ä½“ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åˆ›å»ºç›’å­å›¾å…ƒ</span></span><br><span class="line"><span class="keyword">const</span> boxInstances = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    boxInstances.<span class="title function_">push</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">        <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">BoxGeometry</span>(&#123;</span><br><span class="line">          <span class="attr">dimensions</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">1000</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="attr">modelMatrix</span>: <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByTranslation</span>(</span><br><span class="line">          <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">eastNorthUpToFixedFrame</span>(</span><br><span class="line">            <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span> + i * <span class="number">0.01</span>, <span class="number">39.9042</span> + j * <span class="number">0.01</span>),</span><br><span class="line">          ),</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>),</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(),</span><br><span class="line">        ),</span><br><span class="line">        <span class="attr">id</span>: <span class="string">`box_<span class="subst">$&#123;i&#125;</span>_<span class="subst">$&#123;j&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">attributes</span>: &#123;</span><br><span class="line">          <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(</span><br><span class="line">            <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromRandom</span>(&#123; <span class="attr">alpha</span>: <span class="number">0.8</span> &#125;),</span><br><span class="line">          ),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boxPrimitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: boxInstances,</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">    <span class="attr">translucent</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">closed</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(boxPrimitive)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. åˆ›å»ºçƒä½“å›¾å…ƒ</span></span><br><span class="line"><span class="keyword">const</span> sphereInstance = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">  <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SphereGeometry</span>(&#123;</span><br><span class="line">    <span class="attr">radius</span>: <span class="number">500.0</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">modelMatrix</span>: <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByTranslation</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">eastNorthUpToFixedFrame</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(),</span><br><span class="line">  ),</span><br><span class="line">  <span class="attr">attributes</span>: &#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">AQUA</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spherePrimitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: sphereInstance,</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(spherePrimitive)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æè´¨å¤–è§‚å›¾å…ƒ</span></span><br><span class="line"><span class="keyword">const</span> planePrimitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PlaneGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">vertexFormat</span>: <span class="title class_">Cesium</span>.<span class="property">MaterialAppearance</span>.<span class="property">vertexFormat</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">modelMatrix</span>: <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByScale</span>(</span><br><span class="line">      <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByTranslation</span>(</span><br><span class="line">        <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">eastNorthUpToFixedFrame</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>)),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2000</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">1</span>),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(),</span><br><span class="line">    ),</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">MaterialAppearance</span>(&#123;</span><br><span class="line">    <span class="attr">material</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Material</span>(&#123;</span><br><span class="line">      <span class="attr">fabric</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;Image&#x27;</span>,</span><br><span class="line">        <span class="attr">uniforms</span>: &#123;</span><br><span class="line">          <span class="attr">image</span>: <span class="string">&#x27;path/to/texture.jpg&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(planePrimitive)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. åŠ¨æ€ä¿®æ”¹å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> attributes = boxPrimitive.<span class="title function_">getGeometryInstanceAttributes</span>(<span class="string">&#x27;box_0_0&#x27;</span>)</span><br><span class="line">attributes.<span class="property">color</span> = <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">toValue</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. åˆ†ç±»å›¾å…ƒï¼ˆè´´åœ°ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> classifiedPrimitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ClassificationPrimitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonGeometry</span>(&#123;</span><br><span class="line">      <span class="attr">polygonHierarchy</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolygonHierarchy</span>(</span><br><span class="line">        <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>([<span class="number">116.4</span>, <span class="number">39.9</span>, <span class="number">116.5</span>, <span class="number">39.9</span>, <span class="number">116.5</span>, <span class="number">40.0</span>, <span class="number">116.4</span>, <span class="number">40.0</span>]),</span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">attributes</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>.<span class="title function_">withAlpha</span>(<span class="number">0.5</span>)),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">    <span class="attr">translucent</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(classifiedPrimitive)</span><br></pre></td></tr></table></figure>

<h2 id="åœºæ™¯æ§åˆ¶è¯¦è§£"><a href="#åœºæ™¯æ§åˆ¶è¯¦è§£" class="headerlink" title="åœºæ™¯æ§åˆ¶è¯¦è§£"></a>åœºæ™¯æ§åˆ¶è¯¦è§£</h2><h3 id="Scene-åœºæ™¯ç±»"><a href="#Scene-åœºæ™¯ç±»" class="headerlink" title="Scene åœºæ™¯ç±»"></a>Scene åœºæ™¯ç±»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Scene - åœºæ™¯ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Scene</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">canvas, contextOptions, creditContainer</span>) &#123;</span><br><span class="line">    <span class="comment">// canvas: HTMLCanvasElement</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¸²æŸ“ç”»å¸ƒ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span> = canvas</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === æ¸²æŸ“æ§åˆ¶å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// backgroundColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fog: Fog</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é›¾æ•ˆ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new Fog()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fog</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Fog</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// skyBox: SkyBox</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤©ç©ºç›’</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefinedï¼ˆä½¿ç”¨é»˜è®¤å¤©ç©ºï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">skyBox</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// skyAtmosphere: SkyAtmosphere</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤§æ°”æ•£å°„</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new SkyAtmosphere()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">skyAtmosphere</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SkyAtmosphere</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sun: Sun</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤ªé˜³</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new Sun()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sun</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Sun</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// moon: Moon</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœˆäº®</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new Moon()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">moon</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Moon</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sunBloom: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤ªé˜³å…‰æ™•æ•ˆæœ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sunBloom</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === åœ°çƒç›¸å…³å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// globe: Globe</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°çƒå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new Globe(Ellipsoid.WGS84)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">globe</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Globe</span>(<span class="title class_">Cesium</span>.<span class="property">Ellipsoid</span>.<span class="property">WGS84</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === æ¸²æŸ“æ€§èƒ½å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// requestRenderMode: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æŒ‰éœ€æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">requestRenderMode</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumRenderTimeChange: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§æ¸²æŸ“æ—¶é—´å˜åŒ–</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumRenderTimeChange</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// debugShowFramesPerSecond: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¾ç¤ºFPSè°ƒè¯•ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">debugShowFramesPerSecond</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// debugCommandFilter: function</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è°ƒè¯•å‘½ä»¤è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">debugCommandFilter</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === æ‹¾å–ç›¸å…³å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pickTranslucentDepth: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ‹¾å–é€æ˜ç‰©ä½“æ·±åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pickTranslucentDepth</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === åå¤„ç†æ•ˆæœ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// postProcessStages: PostProcessStageCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åå¤„ç†é˜¶æ®µé›†åˆ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new PostProcessStageCollection()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">postProcessStages</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PostProcessStageCollection</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === å…‰ç…§å±æ€§ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// light: Light</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœºæ™¯å…‰æº</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new SunLight()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">light</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SunLight</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨é˜´å½±</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadowMap: ShadowMap</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±è´´å›¾</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new ShadowMap()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadowMap</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ShadowMap</span>(&#123;</span><br><span class="line">      <span class="attr">context</span>: <span class="variable language_">this</span>.<span class="property">context</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === é«˜åŠ¨æ€èŒƒå›´æ¸²æŸ“ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// highDynamicRange: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨HDR</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">highDynamicRange</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// gamma: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ä¼½é©¬æ ¡æ­£å€¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">gamma</span> = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === åœ°ä¸‹æ¨¡å¼ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// underground: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°ä¸‹æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">underground</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// undergroundColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°ä¸‹èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLACK</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">undergroundColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// === åœ°çƒé€æ˜åº¦ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// globeTranslucencyState: GlobeTranslucencyState</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°çƒé€æ˜åº¦çŠ¶æ€</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: &#123;&#125;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">globeTranslucencyState</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === ç›¸æœºæ§åˆ¶å™¨ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// screenSpaceCameraController: ScreenSpaceCameraController</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å±å¹•ç©ºé—´ç›¸æœºæ§åˆ¶å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">screenSpaceCameraController</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceCameraController</span>(<span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// === å›¾å…ƒé›†åˆ ===</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// primitives: PrimitiveCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å›¾å…ƒé›†åˆ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">primitives</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PrimitiveCollection</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// groundPrimitives: PrimitiveCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°é¢å›¾å…ƒé›†åˆ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">groundPrimitives</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PrimitiveCollection</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === æ¸²æŸ“æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// render - æ¸²æŸ“åœºæ™¯</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="comment">// time: JulianDate - æ¸²æŸ“æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: void</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// requestRender - è¯·æ±‚æ¸²æŸ“</span></span><br><span class="line">  <span class="title function_">requestRender</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åœ¨æŒ‰éœ€æ¸²æŸ“æ¨¡å¼ä¸‹è¯·æ±‚ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === æ‹¾å–æ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// pick - æ‹¾å–å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">pick</span>(<span class="params">windowPosition</span>) &#123;</span><br><span class="line">    <span class="comment">// windowPosition: Cartesian2 - å±å¹•åæ ‡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Object | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// drillPick - é’»å–æ‹¾å–ï¼ˆè·å–æ‰€æœ‰å¯¹è±¡ï¼‰</span></span><br><span class="line">  <span class="title function_">drillPick</span>(<span class="params">windowPosition, limit</span>) &#123;</span><br><span class="line">    <span class="comment">// windowPosition: Cartesian2 - å±å¹•åæ ‡</span></span><br><span class="line">    <span class="comment">// limit: number - æœ€å¤§æ•°é‡é™åˆ¶</span></span><br><span class="line">    <span class="comment">// è¿”å›: Array&lt;Object&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pickPosition - æ‹¾å–ä½ç½®</span></span><br><span class="line">  <span class="title function_">pickPosition</span>(<span class="params">windowPosition, result</span>) &#123;</span><br><span class="line">    <span class="comment">// windowPosition: Cartesian2 - å±å¹•åæ ‡</span></span><br><span class="line">    <span class="comment">// result: Cartesian3 - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3 | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// sampleHeight - é‡‡æ ·é«˜åº¦</span></span><br><span class="line">  <span class="title function_">sampleHeight</span>(<span class="params">position, objectsToExclude, width</span>) &#123;</span><br><span class="line">    <span class="comment">// position: Cartesian3 - ä¸–ç•Œåæ ‡</span></span><br><span class="line">    <span class="comment">// objectsToExclude: Array - æ’é™¤çš„å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// width: number - é‡‡æ ·å®½åº¦</span></span><br><span class="line">    <span class="comment">// è¿”å›: number | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// clampToHeight - è´´åˆåˆ°é«˜åº¦</span></span><br><span class="line">  <span class="title function_">clampToHeight</span>(<span class="params">cartesian, objectsToExclude, width, result</span>) &#123;</span><br><span class="line">    <span class="comment">// cartesian: Cartesian3 - ä¸–ç•Œåæ ‡</span></span><br><span class="line">    <span class="comment">// objectsToExclude: Array - æ’é™¤çš„å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// width: number - é‡‡æ ·å®½åº¦</span></span><br><span class="line">    <span class="comment">// result: Cartesian3 - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3 | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === ç›¸æœºæ–¹æ³• ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// cartesianToCanvasCoordinates - ç¬›å¡å°”åæ ‡è½¬ç”»å¸ƒåæ ‡</span></span><br><span class="line">  <span class="title function_">cartesianToCanvasCoordinates</span>(<span class="params">position, result</span>) &#123;</span><br><span class="line">    <span class="comment">// position: Cartesian3 - ä¸–ç•Œåæ ‡</span></span><br><span class="line">    <span class="comment">// result: Cartesian2 - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian2 | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// === äº‹ä»¶ ===</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// preUpdate: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ›´æ–°å‰äº‹ä»¶</span></span><br><span class="line">  preUpdate = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// postUpdate: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ›´æ–°åäº‹ä»¶</span></span><br><span class="line">  postUpdate = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// preRender: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ¸²æŸ“å‰äº‹ä»¶</span></span><br><span class="line">  preRender = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// postRender: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ¸²æŸ“åäº‹ä»¶</span></span><br><span class="line">  postRender = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// morphStart: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å˜å½¢å¼€å§‹äº‹ä»¶</span></span><br><span class="line">  morphStart = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// morphComplete: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: å˜å½¢å®Œæˆäº‹ä»¶</span></span><br><span class="line">  morphComplete = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// terrainProviderChanged: Event</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: åœ°å½¢æä¾›è€…å˜åŒ–äº‹ä»¶</span></span><br><span class="line">  terrainProviderChanged = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Globe - åœ°çƒç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Globe</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">ellipsoid</span>) &#123;</span><br><span class="line">    <span class="comment">// ellipsoid: Ellipsoid</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ¤­çƒä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ellipsoid</span> = ellipsoid || <span class="title class_">Cesium</span>.<span class="property">Ellipsoid</span>.<span class="property">WGS84</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// show: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºåœ°çƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// maximumScreenSpaceError: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æœ€å¤§å±å¹•ç©ºé—´è¯¯å·®</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 2</span></span><br><span class="line">    <span class="comment">// æ€§èƒ½å½±å“: å€¼è¶Šå°è´¨é‡è¶Šé«˜ï¼Œæ€§èƒ½è¶Šä½</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maximumScreenSpaceError</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// tileCacheSize: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç“¦ç‰‡ç¼“å­˜å¤§å°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 100</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tileCacheSize</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// loadingDescendantLimit: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŠ è½½åä»£é™åˆ¶</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 20</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadingDescendantLimit</span> = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// preloadAncestors: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é¢„åŠ è½½ç¥–å…ˆç“¦ç‰‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preloadAncestors</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// preloadSiblings: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦é¢„åŠ è½½å…„å¼Ÿç“¦ç‰‡</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">preloadSiblings</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// enableLighting: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦å¯ç”¨å…‰ç…§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">enableLighting</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// lightingFadeOutDistance: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å…‰ç…§æ·¡å‡ºè·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 6500000.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lightingFadeOutDistance</span> = <span class="number">6500000.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// lightingFadeInDistance: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å…‰ç…§æ·¡å…¥è·ç¦»</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 9000000.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lightingFadeInDistance</span> = <span class="number">9000000.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// showWaterEffect: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºæ°´ä½“æ•ˆæœ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showWaterEffect</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// shadows: ShadowMode</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é˜´å½±æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: ShadowMode.RECEIVE_ONLY</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">shadows</span> = <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">RECEIVE_ONLY</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereLightIntensity: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¤§æ°”å…‰ç…§å¼ºåº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 10.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereLightIntensity</span> = <span class="number">10.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereRayleighCoefficient: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‘åˆ©æ•£å°„ç³»æ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3(5.5e-6, 13.0e-6, 28.4e-6)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereRayleighCoefficient</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">5.5e-6</span>, <span class="number">13.0e-6</span>, <span class="number">28.4e-6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereMieCoefficient: Cartesian3</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç±³æ°æ•£å°„ç³»æ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Cartesian3(21e-6, 21e-6, 21e-6)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereMieCoefficient</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">21e-6</span>, <span class="number">21e-6</span>, <span class="number">21e-6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereRayleighScaleHeight: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç‘åˆ©æ•£å°„é«˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 8000.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereRayleighScaleHeight</span> = <span class="number">8000.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereMieScaleHeight: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç±³æ°æ•£å°„é«˜åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 1200.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereMieScaleHeight</span> = <span class="number">1200.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// atmosphereMieAnisotropy: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç±³æ°æ•£å°„å„å‘å¼‚æ€§</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.9</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">atmosphereMieAnisotropy</span> = <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// baseColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŸºç¡€é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.BLUE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">baseColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clippingPlanes: ClippingPlaneCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è£å‰ªå¹³é¢é›†åˆ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clippingPlanes</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// cartographicLimitRectangle: Rectangle</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åœ°ç†é™åˆ¶çŸ©å½¢</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cartographicLimitRectangle</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// backFaceCulling: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: èƒŒé¢å‰”é™¤</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backFaceCulling</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// showSkirts: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤ºè£™è¾¹</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showSkirts</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// getHeight - è·å–é«˜åº¦</span></span><br><span class="line">  <span class="title function_">getHeight</span>(<span class="params">cartographic</span>) &#123;</span><br><span class="line">    <span class="comment">// cartographic: Cartographic - åœ°ç†åæ ‡</span></span><br><span class="line">    <span class="comment">// è¿”å›: number | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pick - æ‹¾å–åœ°çƒè¡¨é¢</span></span><br><span class="line">  <span class="title function_">pick</span>(<span class="params">ray, scene, result</span>) &#123;</span><br><span class="line">    <span class="comment">// ray: Ray - å°„çº¿</span></span><br><span class="line">    <span class="comment">// scene: Scene - åœºæ™¯</span></span><br><span class="line">    <span class="comment">// result: Cartesian3 - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: Cartesian3 | undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœºæ™¯ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åŸºç¡€åœºæ™¯é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> scene = viewer.<span class="property">scene</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">scene.<span class="property">backgroundColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">DARKSLATEGRAY</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯é˜´å½±</span></span><br><span class="line">scene.<span class="property">shadows</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">shadowMap</span>.<span class="property">maximumDistance</span> = <span class="number">10000.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯é›¾æ•ˆ</span></span><br><span class="line">scene.<span class="property">fog</span>.<span class="property">enabled</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">fog</span>.<span class="property">density</span> = <span class="number">0.0001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. åœ°çƒé…ç½®</span></span><br><span class="line"><span class="keyword">const</span> globe = scene.<span class="property">globe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ°å½¢ç»†èŠ‚çº§åˆ«</span></span><br><span class="line">globe.<span class="property">maximumScreenSpaceError</span> = <span class="number">1</span> <span class="comment">// æ›´é«˜è´¨é‡</span></span><br><span class="line">globe.<span class="property">tileCacheSize</span> = <span class="number">200</span> <span class="comment">// æ›´å¤§ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯åœ°çƒå…‰ç…§</span></span><br><span class="line">globe.<span class="property">enableLighting</span> = <span class="literal">true</span></span><br><span class="line">globe.<span class="property">atmosphereLightIntensity</span> = <span class="number">15.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ°´ä½“æ•ˆæœ</span></span><br><span class="line">globe.<span class="property">showWaterEffect</span> = <span class="literal">true</span></span><br><span class="line">globe.<span class="property">baseColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">NAVY</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åå¤„ç†æ•ˆæœ</span></span><br><span class="line"><span class="keyword">const</span> postProcess = scene.<span class="property">postProcessStages</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ FXAAæŠ—é”¯é½¿</span></span><br><span class="line"><span class="keyword">const</span> fxaa = <span class="title class_">Cesium</span>.<span class="property">PostProcessStageLibrary</span>.<span class="title function_">createFXAAStage</span>()</span><br><span class="line">postProcess.<span class="title function_">add</span>(fxaa)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è½®å»“çº¿æ•ˆæœ</span></span><br><span class="line"><span class="keyword">const</span> silhouette = <span class="title class_">Cesium</span>.<span class="property">PostProcessStageLibrary</span>.<span class="title function_">createSilhouetteStage</span>()</span><br><span class="line">postProcess.<span class="title function_">add</span>(silhouette)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰åå¤„ç†æ•ˆæœ</span></span><br><span class="line"><span class="keyword">const</span> customStage = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PostProcessStage</span>(&#123;</span><br><span class="line">  <span class="attr">fragmentShader</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    uniform sampler2D colorTexture;</span></span><br><span class="line"><span class="string">    in vec2 v_textureCoordinates;</span></span><br><span class="line"><span class="string">    out vec4 fragColor;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    void main() &#123;</span></span><br><span class="line"><span class="string">      vec4 color = texture(colorTexture, v_textureCoordinates);</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      // ç®€å•çš„ç°åº¦æ•ˆæœ</span></span><br><span class="line"><span class="string">      float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));</span></span><br><span class="line"><span class="string">      fragColor = vec4(gray, gray, gray, color.a);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="attr">uniforms</span>: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">postProcess.<span class="title function_">add</span>(customStage)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. äº‹ä»¶ç›‘å¬</span></span><br><span class="line">scene.<span class="property">preRender</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¸²æŸ“å‰çš„è‡ªå®šä¹‰é€»è¾‘</span></span><br><span class="line">  customStage.<span class="property">enabled</span> = viewer.<span class="property">clock</span>.<span class="property">currentTime</span>.<span class="property">secondsOfDay</span> &gt; <span class="number">43200</span> <span class="comment">// ä¸‹åˆå¯ç”¨ç°åº¦æ•ˆæœ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">scene.<span class="property">postRender</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¸²æŸ“åçš„ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">if</span> (scene.<span class="property">debugShowFramesPerSecond</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;FPS:&#x27;</span>, scene.<span class="property">debugShowFramesPerSecond</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. æ‹¾å–å¢å¼º</span></span><br><span class="line">scene.<span class="property">pickTranslucentDepth</span> = <span class="literal">true</span> <span class="comment">// æ‹¾å–é€æ˜ç‰©ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ‹¾å–å¤„ç†</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">enhancedPick</span>(<span class="params">windowPosition</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> picked = scene.<span class="title function_">pick</span>(windowPosition)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Cesium</span>.<span class="title function_">defined</span>(picked)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‹¾å–åˆ°å¯¹è±¡:&#x27;</span>, picked.<span class="property">id</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç²¾ç¡®ä½ç½®</span></span><br><span class="line">    <span class="keyword">const</span> position = scene.<span class="title function_">pickPosition</span>(windowPosition)</span><br><span class="line">    <span class="keyword">if</span> (position) &#123;</span><br><span class="line">      <span class="keyword">const</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(position)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç²¾ç¡®ä½ç½®:&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">longitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">longitude</span>),</span><br><span class="line">        <span class="attr">latitude</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toDegrees</span>(cartographic.<span class="property">latitude</span>),</span><br><span class="line">        <span class="attr">height</span>: cartographic.<span class="property">height</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é’»å–æ‹¾å–ï¼ˆè·å–æ‰€æœ‰å±‚çº§çš„å¯¹è±¡ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> allPicked = scene.<span class="title function_">drillPick</span>(windowPosition, <span class="number">10</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰€æœ‰æ‹¾å–å¯¹è±¡:&#x27;</span>, allPicked)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. æ€§èƒ½ä¼˜åŒ–é…ç½®</span></span><br><span class="line"><span class="comment">// æŒ‰éœ€æ¸²æŸ“</span></span><br><span class="line">scene.<span class="property">requestRenderMode</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">maximumRenderTimeChange</span> = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰‹åŠ¨è¯·æ±‚æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">requestRenderIfNeeded</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (scene.<span class="property">requestRenderMode</span> &amp;&amp; needsUpdate) &#123;</span><br><span class="line">    scene.<span class="title function_">requestRender</span>()</span><br><span class="line">    needsUpdate = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. è°ƒè¯•é…ç½®</span></span><br><span class="line">scene.<span class="property">debugShowFramesPerSecond</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">debugCommandFilter</span> = <span class="function">(<span class="params">command</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿‡æ»¤è°ƒè¯•å‘½ä»¤</span></span><br><span class="line">  <span class="keyword">return</span> command.<span class="property">pass</span> === <span class="title class_">Cesium</span>.<span class="property">Pass</span>.<span class="property">OPAQUE</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. HDRå’Œè‰²è°ƒæ˜ å°„</span></span><br><span class="line">scene.<span class="property">highDynamicRange</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">gamma</span> = <span class="number">2.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. åœ°ä¸‹æ¨¡å¼</span></span><br><span class="line">scene.<span class="property">underground</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">undergroundColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>.<span class="title function_">withAlpha</span>(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10. å…¨çƒé€æ˜åº¦</span></span><br><span class="line">scene.<span class="property">globe</span>.<span class="property">translucency</span>.<span class="property">enabled</span> = <span class="literal">true</span></span><br><span class="line">scene.<span class="property">globe</span>.<span class="property">translucency</span>.<span class="property">frontFaceAlpha</span> = <span class="number">0.5</span></span><br><span class="line">scene.<span class="property">globe</span>.<span class="property">translucency</span>.<span class="property">backFaceAlpha</span> = <span class="number">0.1</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•°æ®æºè¯¦è§£"><a href="#æ•°æ®æºè¯¦è§£" class="headerlink" title="æ•°æ®æºè¯¦è§£"></a>æ•°æ®æºè¯¦è§£</h2><h3 id="DataSource-æ•°æ®æº"><a href="#DataSource-æ•°æ®æº" class="headerlink" title="DataSource æ•°æ®æº"></a>DataSource æ•°æ®æº</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataSource - æ•°æ®æºåŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="comment">// name: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ•°æ®æºåç§°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line"></span><br><span class="line">    <span class="comment">// show: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ˜¾ç¤º</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// entities: EntityCollection</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“é›†åˆ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">entities</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EntityCollection</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// isLoading: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦æ­£åœ¨åŠ è½½</span></span><br><span class="line">    <span class="comment">// åªè¯»: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// changedEvent: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å˜åŒ–äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">changedEvent</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// errorEvent: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é”™è¯¯äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">errorEvent</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loadingEvent: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åŠ è½½äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadingEvent</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// clock: DataSourceClock</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ•°æ®æºæ—¶é’Ÿ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clock</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clustering: EntityCluster</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å®ä½“èšç±»</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clustering</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EntityCluster</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// update - æ›´æ–°æ•°æ®æº</span></span><br><span class="line">  <span class="title function_">update</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="comment">// time: JulianDate - å½“å‰æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: boolean - æ˜¯å¦éœ€è¦æ¸²æŸ“</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CzmlDataSource - CZMLæ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CzmlDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// load - åŠ è½½CZMLæ•°æ®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">load</span>(<span class="params">czml, options</span>) &#123;</span><br><span class="line">    <span class="comment">// czml: Object | string | Resource</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: CZMLæ•°æ®</span></span><br><span class="line">    <span class="comment">// options: Object</span></span><br><span class="line">    <span class="comment">// sourceUri: string - æºURI</span></span><br><span class="line">    <span class="comment">// credit: Credit - ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// è¿”å›: Promise&lt;CzmlDataSource&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// process - å¤„ç†CZMLæ•°æ®</span></span><br><span class="line">  <span class="title function_">process</span>(<span class="params">czml, options</span>) &#123;</span><br><span class="line">    <span class="comment">// czml: Object | string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: CZMLæ•°æ®</span></span><br><span class="line">    <span class="comment">// options: Object</span></span><br><span class="line">    <span class="comment">// sourceUri: string - æºURI</span></span><br><span class="line">    <span class="comment">// isUpdating: boolean - æ˜¯å¦æ›´æ–°æ¨¡å¼</span></span><br><span class="line">    <span class="comment">// è¿”å›: Promise&lt;CzmlDataSource&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GeoJsonDataSource - GeoJSONæ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GeoJsonDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// markerSize: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡è®°å¤§å°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 48</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">markerSize</span> = <span class="number">48</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// markerSymbol: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡è®°ç¬¦å·</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">markerSymbol</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// markerColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ ‡è®°é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.ROYALBLUE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">markerColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">ROYALBLUE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// stroke: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æè¾¹é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.YELLOW</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stroke</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// strokeWidth: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æè¾¹å®½åº¦</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 2</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">strokeWidth</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.YELLOW.withAlpha(0.5)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fill</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>.<span class="title function_">withAlpha</span>(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// clampToGround: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clampToGround</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// load - åŠ è½½GeoJSONæ•°æ®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">load</span>(<span class="params">data, options</span>) &#123;</span><br><span class="line">    <span class="comment">// data: Resource | string | Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: GeoJSONæ•°æ®</span></span><br><span class="line">    <span class="comment">// options: Object</span></span><br><span class="line">    <span class="comment">// sourceUri: string - æºURI</span></span><br><span class="line">    <span class="comment">// markerSize: number - æ ‡è®°å¤§å°</span></span><br><span class="line">    <span class="comment">// markerSymbol: string - æ ‡è®°ç¬¦å·</span></span><br><span class="line">    <span class="comment">// markerColor: Color - æ ‡è®°é¢œè‰²</span></span><br><span class="line">    <span class="comment">// stroke: Color - æè¾¹é¢œè‰²</span></span><br><span class="line">    <span class="comment">// strokeWidth: number - æè¾¹å®½åº¦</span></span><br><span class="line">    <span class="comment">// fill: Color - å¡«å……é¢œè‰²</span></span><br><span class="line">    <span class="comment">// clampToGround: boolean - æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="comment">// credit: Credit - ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// è¿”å›: Promise&lt;GeoJsonDataSource&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// KmlDataSource - KMLæ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KmlDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// refreshEvent: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: åˆ·æ–°äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">refreshEvent</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// unsupportedNodeEvent: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ä¸æ”¯æŒèŠ‚ç‚¹äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">unsupportedNodeEvent</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// load - åŠ è½½KMLæ•°æ®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">load</span>(<span class="params">data, options</span>) &#123;</span><br><span class="line">    <span class="comment">// data: Resource | string | Document | Blob</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: KMLæ•°æ®</span></span><br><span class="line">    <span class="comment">// options: Object</span></span><br><span class="line">    <span class="comment">// sourceUri: string - æºURI</span></span><br><span class="line">    <span class="comment">// clampToGround: boolean - æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="comment">// ellipsoid: Ellipsoid - æ¤­çƒä½“</span></span><br><span class="line">    <span class="comment">// credit: Credit - ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// è¿”å›: Promise&lt;KmlDataSource&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GpxDataSource - GPXæ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GpxDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// trackColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è½¨è¿¹é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.YELLOW</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">trackColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// routeColor: Color</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·¯çº¿é¢œè‰²</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: Color.ORANGE</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routeColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">ORANGE</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// waypointImage: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: è·¯ç‚¹å›¾åƒ</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">waypointImage</span> = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// clampToGround: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clampToGround</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// load - åŠ è½½GPXæ•°æ®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">load</span>(<span class="params">data, options</span>) &#123;</span><br><span class="line">    <span class="comment">// data: Resource | string | Document | Blob</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: GPXæ•°æ®</span></span><br><span class="line">    <span class="comment">// options: Object</span></span><br><span class="line">    <span class="comment">// è¿”å›: Promise&lt;GpxDataSource&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CustomDataSource - è‡ªå®šä¹‰æ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®æºä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. CZMLæ•°æ®æº</span></span><br><span class="line"><span class="keyword">const</span> czmlData = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;document&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;CZMLç¤ºä¾‹&#x27;</span>,</span><br><span class="line">    <span class="attr">version</span>: <span class="string">&#x27;1.0&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;satellite&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å«æ˜Ÿ&#x27;</span>,</span><br><span class="line">    <span class="attr">availability</span>: <span class="string">&#x27;2023-01-01T00:00:00Z/2023-01-02T00:00:00Z&#x27;</span>,</span><br><span class="line">    <span class="attr">position</span>: &#123;</span><br><span class="line">      <span class="attr">epoch</span>: <span class="string">&#x27;2023-01-01T00:00:00Z&#x27;</span>,</span><br><span class="line">      <span class="attr">cartographicDegrees</span>: [<span class="number">0</span>, <span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">400000</span>, <span class="number">3600</span>, <span class="number">121.4737</span>, <span class="number">31.2304</span>, <span class="number">400000</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">billboard</span>: &#123;</span><br><span class="line">      <span class="attr">image</span>:</span><br><span class="line">        <span class="string">&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==&#x27;</span>,</span><br><span class="line">      <span class="attr">scale</span>: <span class="number">2.0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">path</span>: &#123;</span><br><span class="line">      <span class="attr">material</span>: &#123;</span><br><span class="line">        <span class="attr">polylineOutline</span>: &#123;</span><br><span class="line">          <span class="attr">color</span>: &#123; <span class="attr">rgba</span>: [<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>] &#125;,</span><br><span class="line">          <span class="attr">outlineColor</span>: &#123; <span class="attr">rgba</span>: [<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>] &#125;,</span><br><span class="line">          <span class="attr">outlineWidth</span>: <span class="number">5</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">width</span>: <span class="number">8</span>,</span><br><span class="line">      <span class="attr">leadTime</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">trailTime</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="attr">resolution</span>: <span class="number">5</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">CzmlDataSource</span>.<span class="title function_">load</span>(czmlData).<span class="title function_">then</span>(<span class="function">(<span class="params">dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">  viewer.<span class="property">dataSources</span>.<span class="title function_">add</span>(dataSource)</span><br><span class="line">  viewer.<span class="title function_">zoomTo</span>(dataSource)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. GeoJSONæ•°æ®æº</span></span><br><span class="line"><span class="keyword">const</span> geoJsonData = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;FeatureCollection&#x27;</span>,</span><br><span class="line">  <span class="attr">features</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;Feature&#x27;</span>,</span><br><span class="line">      <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>,</span><br><span class="line">        <span class="attr">population</span>: <span class="number">21540000</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">geometry</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;Point&#x27;</span>,</span><br><span class="line">        <span class="attr">coordinates</span>: [<span class="number">116.4074</span>, <span class="number">39.9042</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;Feature&#x27;</span>,</span><br><span class="line">      <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ•…å®«&#x27;</span>,</span><br><span class="line">        <span class="attr">area</span>: <span class="number">720000</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">geometry</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;Polygon&#x27;</span>,</span><br><span class="line">        <span class="attr">coordinates</span>: [</span><br><span class="line">          [</span><br><span class="line">            [<span class="number">116.3906</span>, <span class="number">39.9097</span>],</span><br><span class="line">            [<span class="number">116.3971</span>, <span class="number">39.9097</span>],</span><br><span class="line">            [<span class="number">116.3971</span>, <span class="number">39.9208</span>],</span><br><span class="line">            [<span class="number">116.3906</span>, <span class="number">39.9208</span>],</span><br><span class="line">            [<span class="number">116.3906</span>, <span class="number">39.9097</span>],</span><br><span class="line">          ],</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">GeoJsonDataSource</span>.<span class="title function_">load</span>(geoJsonData, &#123;</span><br><span class="line">  <span class="attr">markerSize</span>: <span class="number">64</span>,</span><br><span class="line">  <span class="attr">markerColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span>,</span><br><span class="line">  <span class="attr">stroke</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>,</span><br><span class="line">  <span class="attr">strokeWidth</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">fill</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLUE</span>.<span class="title function_">withAlpha</span>(<span class="number">0.3</span>),</span><br><span class="line">  <span class="attr">clampToGround</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">  viewer.<span class="property">dataSources</span>.<span class="title function_">add</span>(dataSource)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰æ ·å¼</span></span><br><span class="line">  <span class="keyword">const</span> entities = dataSource.<span class="property">entities</span>.<span class="property">values</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; entities.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> entity = entities[i]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (entity.<span class="property">billboard</span>) &#123;</span><br><span class="line">      <span class="comment">// è‡ªå®šä¹‰ç‚¹æ ·å¼</span></span><br><span class="line">      entity.<span class="property">billboard</span>.<span class="property">image</span> = <span class="title function_">createCustomIcon</span>(entity.<span class="property">properties</span>.<span class="property">name</span>)</span><br><span class="line">      entity.<span class="property">billboard</span>.<span class="property">scale</span> = <span class="number">1.5</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (entity.<span class="property">polygon</span>) &#123;</span><br><span class="line">      <span class="comment">// è‡ªå®šä¹‰å¤šè¾¹å½¢æ ·å¼</span></span><br><span class="line">      entity.<span class="property">polygon</span>.<span class="property">material</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromCssColorString</span>(<span class="string">&#x27;#ff6b6b&#x27;</span>).<span class="title function_">withAlpha</span>(<span class="number">0.4</span>)</span><br><span class="line">      entity.<span class="property">polygon</span>.<span class="property">outline</span> = <span class="literal">true</span></span><br><span class="line">      entity.<span class="property">polygon</span>.<span class="property">outlineColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromCssColorString</span>(<span class="string">&#x27;#ff4757&#x27;</span>)</span><br><span class="line">      entity.<span class="property">polygon</span>.<span class="property">height</span> = <span class="number">50</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ æ ‡ç­¾</span></span><br><span class="line">    entity.<span class="property">label</span> = &#123;</span><br><span class="line">      <span class="attr">text</span>: entity.<span class="property">properties</span>.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">font</span>: <span class="string">&#x27;16pt Microsoft YaHei&#x27;</span>,</span><br><span class="line">      <span class="attr">fillColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>,</span><br><span class="line">      <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">      <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">style</span>: <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL_AND_OUTLINE</span>,</span><br><span class="line">      <span class="attr">pixelOffset</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">0</span>, -<span class="number">50</span>),</span><br><span class="line">      <span class="attr">showBackground</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>.<span class="title function_">withAlpha</span>(<span class="number">0.7</span>),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. KMLæ•°æ®æºï¼ˆä»æ–‡ä»¶åŠ è½½ï¼‰</span></span><br><span class="line"><span class="title class_">Cesium</span>.<span class="property">KmlDataSource</span>.<span class="title function_">load</span>(<span class="string">&#x27;./data/sample.kml&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">clampToGround</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">  viewer.<span class="property">dataSources</span>.<span class="title function_">add</span>(dataSource)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›‘å¬ä¸æ”¯æŒçš„KMLèŠ‚ç‚¹</span></span><br><span class="line">  dataSource.<span class="property">unsupportedNodeEvent</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">    <span class="function">(<span class="params">dataSource, parentEntity, node, entityCollection, styleCollection</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;ä¸æ”¯æŒçš„KMLèŠ‚ç‚¹:&#x27;</span>, node.<span class="property">nodeName</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. è‡ªå®šä¹‰æ•°æ®æº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RealtimeDataSource</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Cesium.CustomDataSource</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(<span class="string">&#x27;å®æ—¶æ•°æ®&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_timer</span> = <span class="literal">undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_isLoading</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å§‹å®æ—¶æ•°æ®æ›´æ–°</span></span><br><span class="line">  <span class="title function_">startRealtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">updateData</span>()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢å®æ—¶æ•°æ®æ›´æ–°</span></span><br><span class="line">  <span class="title function_">stopRealtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_timer</span>) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">_timer</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_timer</span> = <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">updateData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_isLoading</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_isLoading</span> = <span class="literal">true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loadingEvent</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// æ¨¡æ‹Ÿä»APIè·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/realtime-data&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ›´æ–°å®ä½“</span></span><br><span class="line">      data.<span class="property">vehicles</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">vehicle</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> entity = <span class="variable language_">this</span>.<span class="property">entities</span>.<span class="title function_">getById</span>(vehicle.<span class="property">id</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!entity) &#123;</span><br><span class="line">          <span class="comment">// åˆ›å»ºæ–°å®ä½“</span></span><br><span class="line">          entity = <span class="variable language_">this</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">            <span class="attr">id</span>: vehicle.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">name</span>: vehicle.<span class="property">name</span>,</span><br><span class="line">            <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(vehicle.<span class="property">lon</span>, vehicle.<span class="property">lat</span>, vehicle.<span class="property">alt</span>),</span><br><span class="line">            <span class="attr">billboard</span>: &#123;</span><br><span class="line">              <span class="attr">image</span>: <span class="string">&#x27;./icons/vehicle.png&#x27;</span>,</span><br><span class="line">              <span class="attr">scale</span>: <span class="number">1.0</span>,</span><br><span class="line">              <span class="attr">verticalOrigin</span>: <span class="title class_">Cesium</span>.<span class="property">VerticalOrigin</span>.<span class="property">BOTTOM</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">label</span>: &#123;</span><br><span class="line">              <span class="attr">text</span>: vehicle.<span class="property">name</span>,</span><br><span class="line">              <span class="attr">font</span>: <span class="string">&#x27;12pt sans-serif&#x27;</span>,</span><br><span class="line">              <span class="attr">pixelOffset</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">0</span>, -<span class="number">40</span>),</span><br><span class="line">              <span class="attr">fillColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span>,</span><br><span class="line">              <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">              <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">              <span class="attr">style</span>: <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL_AND_OUTLINE</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// æ›´æ–°ä½ç½®</span></span><br><span class="line">          entity.<span class="property">position</span> = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(vehicle.<span class="property">lon</span>, vehicle.<span class="property">lat</span>, vehicle.<span class="property">alt</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°å±æ€§</span></span><br><span class="line">        entity.<span class="property">description</span> = <span class="string">`</span></span><br><span class="line"><span class="string">          &lt;div&gt;</span></span><br><span class="line"><span class="string">            &lt;h3&gt;<span class="subst">$&#123;vehicle.name&#125;</span>&lt;/h3&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;é€Ÿåº¦: <span class="subst">$&#123;vehicle.speed&#125;</span> km/h&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;æ–¹å‘: <span class="subst">$&#123;vehicle.heading&#125;</span>Â°&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;æ›´æ–°æ—¶é—´: <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>(vehicle.timestamp).toLocaleString()&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">changedEvent</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ›´æ–°å®æ—¶æ•°æ®å¤±è´¥:&#x27;</span>, error)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">errorEvent</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>, error)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_isLoading</span> = <span class="literal">false</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loadingEvent</span>.<span class="title function_">raiseEvent</span>(<span class="variable language_">this</span>, <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®æº</span></span><br><span class="line"><span class="keyword">const</span> realtimeDataSource = <span class="keyword">new</span> <span class="title class_">RealtimeDataSource</span>()</span><br><span class="line">viewer.<span class="property">dataSources</span>.<span class="title function_">add</span>(realtimeDataSource)</span><br><span class="line">realtimeDataSource.<span class="title function_">startRealtime</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. æ•°æ®æºç®¡ç†</span></span><br><span class="line"><span class="keyword">const</span> dataSources = viewer.<span class="property">dataSources</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ•°æ®æº</span></span><br><span class="line">dataSources.<span class="title function_">add</span>(dataSource)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤æ•°æ®æº</span></span><br><span class="line">dataSources.<span class="title function_">remove</span>(dataSource)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ•°æ®æº</span></span><br><span class="line"><span class="keyword">const</span> firstDataSource = dataSources.<span class="title function_">get</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> dataSourceByName = dataSources.<span class="title function_">getByName</span>(<span class="string">&#x27;å®æ—¶æ•°æ®&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤º/éšè—æ•°æ®æº</span></span><br><span class="line">dataSource.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æ•°æ®æºå˜åŒ–</span></span><br><span class="line">dataSources.<span class="property">dataSourceAdded</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">collection, dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ·»åŠ æ•°æ®æº:&#x27;</span>, dataSource.<span class="property">name</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">dataSources.<span class="property">dataSourceRemoved</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">collection, dataSource</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç§»é™¤æ•°æ®æº:&#x27;</span>, dataSource.<span class="property">name</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. å®ä½“èšç±»</span></span><br><span class="line"><span class="keyword">const</span> clustering = dataSource.<span class="property">clustering</span></span><br><span class="line">clustering.<span class="property">enabled</span> = <span class="literal">true</span></span><br><span class="line">clustering.<span class="property">pixelRange</span> = <span class="number">15</span></span><br><span class="line">clustering.<span class="property">minimumClusterSize</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰èšç±»æ ·å¼</span></span><br><span class="line">clustering.<span class="property">clusterBillboards</span> = <span class="literal">false</span></span><br><span class="line">clustering.<span class="property">clusterLabels</span> = <span class="literal">false</span></span><br><span class="line">clustering.<span class="property">clusterPoints</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// èšç±»äº‹ä»¶</span></span><br><span class="line">clustering.<span class="property">clusterEvent</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">clusteredEntities, cluster</span>) =&gt;</span> &#123;</span><br><span class="line">  cluster.<span class="property">billboard</span>.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">text</span> = clusteredEntities.<span class="property">length</span>.<span class="title function_">toString</span>()</span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">font</span> = <span class="string">&#x27;16pt sans-serif&#x27;</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">fillColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">WHITE</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">outlineColor</span> = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">outlineWidth</span> = <span class="number">2</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">style</span> = <span class="title class_">Cesium</span>.<span class="property">LabelStyle</span>.<span class="property">FILL_AND_OUTLINE</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ è‡ªå®šä¹‰ç‚¹</span></span><br><span class="line">  cluster.<span class="property">point</span> = &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">CYAN</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCustomIcon</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºè‡ªå®šä¹‰å›¾æ ‡</span></span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">  canvas.<span class="property">width</span> = <span class="number">64</span></span><br><span class="line">  canvas.<span class="property">height</span> = <span class="number">64</span></span><br><span class="line">  <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»˜åˆ¶èƒŒæ™¯åœ†</span></span><br><span class="line">  ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;#ff6b6b&#x27;</span></span><br><span class="line">  ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">  ctx.<span class="title function_">arc</span>(<span class="number">32</span>, <span class="number">32</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>)</span><br><span class="line">  ctx.<span class="title function_">fill</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»˜åˆ¶è¾¹æ¡†</span></span><br><span class="line">  ctx.<span class="property">strokeStyle</span> = <span class="string">&#x27;#ff4757&#x27;</span></span><br><span class="line">  ctx.<span class="property">lineWidth</span> = <span class="number">3</span></span><br><span class="line">  ctx.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»˜åˆ¶æ–‡å­—</span></span><br><span class="line">  ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;white&#x27;</span></span><br><span class="line">  ctx.<span class="property">font</span> = <span class="string">&#x27;12px Arial&#x27;</span></span><br><span class="line">  ctx.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span></span><br><span class="line">  ctx.<span class="title function_">fillText</span>(name.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">2</span>), <span class="number">32</span>, <span class="number">38</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> canvas.<span class="title function_">toDataURL</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´ç³»ç»Ÿè¯¦è§£"><a href="#æ—¶é—´ç³»ç»Ÿè¯¦è§£" class="headerlink" title="æ—¶é—´ç³»ç»Ÿè¯¦è§£"></a>æ—¶é—´ç³»ç»Ÿè¯¦è§£</h2><h3 id="JulianDate-å„’ç•¥æ—¥æœŸ"><a href="#JulianDate-å„’ç•¥æ—¥æœŸ" class="headerlink" title="JulianDate å„’ç•¥æ—¥æœŸ"></a>JulianDate å„’ç•¥æ—¥æœŸ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JulianDate - å„’ç•¥æ—¥æœŸç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JulianDate</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">julianDayNumber, secondsOfDay, timeStandard</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDayNumber: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å„’ç•¥æ—¥æ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">julianDayNumber</span> = julianDayNumber || <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// secondsOfDay: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ä¸€å¤©ä¸­çš„ç§’æ•°</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: 0.0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">secondsOfDay</span> = secondsOfDay || <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// timeStandard: TimeStandard</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ—¶é—´æ ‡å‡†</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: TimeStandard.UTC</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timeStandard</span> = timeStandard || <span class="title class_">Cesium</span>.<span class="property">TimeStandard</span>.<span class="property">UTC</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// now - è·å–å½“å‰æ—¶é—´</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">now</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="comment">// result: JulianDate - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: JulianDate</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>(result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromDate - ä»JavaScript Dateåˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromDate</span>(<span class="params">date, result</span>) &#123;</span><br><span class="line">    <span class="comment">// date: Date - JavaScriptæ—¥æœŸå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// result: JulianDate - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: JulianDate</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(date, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// fromIso8601 - ä»ISO 8601å­—ç¬¦ä¸²åˆ›å»º</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">fromIso8601</span>(<span class="params">iso8601String, result</span>) &#123;</span><br><span class="line">    <span class="comment">// iso8601String: string - ISO 8601æ ¼å¼å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚: &quot;2023-01-01T12:00:00Z&quot;</span></span><br><span class="line">    <span class="comment">// result: JulianDate - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: JulianDate</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(iso8601String, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// toDate - è½¬æ¢ä¸ºJavaScript Date</span></span><br><span class="line">  <span class="title function_">toDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›: Date</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// toIso8601 - è½¬æ¢ä¸ºISO 8601å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="title function_">toIso8601</span>(<span class="params">precision</span>) &#123;</span><br><span class="line">    <span class="comment">// precision: number - ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰</span></span><br><span class="line">    <span class="comment">// è¿”å›: string</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toIso8601</span>(<span class="variable language_">this</span>, precision)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addSeconds - æ·»åŠ ç§’æ•°</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">addSeconds</span>(<span class="params">julianDate, seconds, result</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDate: JulianDate - å„’ç•¥æ—¥æœŸ</span></span><br><span class="line">    <span class="comment">// seconds: number - ç§’æ•°</span></span><br><span class="line">    <span class="comment">// result: JulianDate - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: JulianDate</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(julianDate, seconds, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addMinutes - æ·»åŠ åˆ†é’Ÿæ•°</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">addMinutes</span>(<span class="params">julianDate, minutes, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addMinutes</span>(julianDate, minutes, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addHours - æ·»åŠ å°æ—¶æ•°</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">addHours</span>(<span class="params">julianDate, hours, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addHours</span>(julianDate, hours, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// addDays - æ·»åŠ å¤©æ•°</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">addDays</span>(<span class="params">julianDate, days, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addDays</span>(julianDate, days, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// secondsDifference - è®¡ç®—ç§’æ•°å·®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">secondsDifference</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">    <span class="comment">// left: JulianDate - å·¦æ“ä½œæ•°</span></span><br><span class="line">    <span class="comment">// right: JulianDate - å³æ“ä½œæ•°</span></span><br><span class="line">    <span class="comment">// è¿”å›: number - ç§’æ•°å·® (left - right)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(left, right)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// daysDifference - è®¡ç®—å¤©æ•°å·®</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">daysDifference</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">daysDifference</span>(left, right)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// compare - æ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸ</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">compare</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›: number</span></span><br><span class="line">    <span class="comment">// -1: left &lt; right</span></span><br><span class="line">    <span class="comment">//  0: left === right</span></span><br><span class="line">    <span class="comment">//  1: left &gt; right</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">compare</span>(left, right)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// equals - åˆ¤æ–­ç›¸ç­‰</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">equals</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›: boolean</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">equals</span>(left, right)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// equalsEpsilon - åœ¨æŒ‡å®šç²¾åº¦å†…åˆ¤æ–­ç›¸ç­‰</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">equalsEpsilon</span>(<span class="params">left, right, epsilon</span>) &#123;</span><br><span class="line">    <span class="comment">// epsilon: number - è¯¯å·®èŒƒå›´ï¼ˆç§’ï¼‰</span></span><br><span class="line">    <span class="comment">// è¿”å›: boolean</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">equalsEpsilon</span>(left, right, epsilon)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// clone - å…‹éš†</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">clone</span>(<span class="params">julianDate, result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">clone</span>(julianDate, result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TimeInterval - æ—¶é—´é—´éš”</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TimeInterval</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// start: JulianDate</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new JulianDate()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">start</span> = options.<span class="property">start</span> || <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// stop: JulianDate</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: new JulianDate()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stop</span> = options.<span class="property">stop</span> || <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// isStartIncluded: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦åŒ…å«å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isStartIncluded</span> = options.<span class="property">isStartIncluded</span> !== <span class="literal">undefined</span> ? options.<span class="property">isStartIncluded</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// isStopIncluded: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦åŒ…å«ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isStopIncluded</span> = options.<span class="property">isStopIncluded</span> !== <span class="literal">undefined</span> ? options.<span class="property">isStopIncluded</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// data: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: å…³è”æ•°æ®</span></span><br><span class="line">    <span class="comment">// é»˜è®¤: undefined</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span> = options.<span class="property">data</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// contains - æ˜¯å¦åŒ…å«æŒ‡å®šæ—¶é—´</span></span><br><span class="line">  <span class="title function_">contains</span>(<span class="params">julianDate</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDate: JulianDate - è¦æ£€æŸ¥çš„æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: boolean</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">TimeInterval</span>.<span class="title function_">contains</span>(<span class="variable language_">this</span>, julianDate)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// intersect - æ±‚äº¤é›†</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">intersect</span>(<span class="params">left, right, result</span>) &#123;</span><br><span class="line">    <span class="comment">// left: TimeInterval - å·¦é—´éš”</span></span><br><span class="line">    <span class="comment">// right: TimeInterval - å³é—´éš”</span></span><br><span class="line">    <span class="comment">// result: TimeInterval - ç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›: TimeInterval</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">TimeInterval</span>.<span class="title function_">intersect</span>(left, right, result)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isEmpty - æ˜¯å¦ä¸ºç©ºé—´éš”</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">isEmpty</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">TimeInterval</span>.<span class="title function_">isEmpty</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TimeIntervalCollection - æ—¶é—´é—´éš”é›†åˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TimeIntervalCollection</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">intervals</span>) &#123;</span><br><span class="line">    <span class="comment">// intervals: Array&lt;TimeInterval&gt; - æ—¶é—´é—´éš”æ•°ç»„</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_intervals</span> = intervals || []</span><br><span class="line"></span><br><span class="line">    <span class="comment">// changed: Event</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é›†åˆå˜åŒ–äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">changed</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Event</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// changedEventHelper: EventHelper</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">changedEventHelper</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">EventHelper</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å±æ€§</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// start: JulianDate</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: ç¬¬ä¸€ä¸ªé—´éš”çš„å¼€å§‹æ—¶é—´</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">start</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="variable language_">this</span>.<span class="property">_intervals</span>[<span class="number">0</span>].<span class="property">start</span> : <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// stop: JulianDate</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æœ€åä¸€ä¸ªé—´éš”çš„ç»“æŸæ—¶é—´</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">stop</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="variable language_">this</span>.<span class="property">_intervals</span>[<span class="variable language_">this</span>.<span class="property">length</span> - <span class="number">1</span>].<span class="property">stop</span> : <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// length: number</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: é—´éš”æ•°é‡</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">length</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="property">length</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// isEmpty: boolean</span></span><br><span class="line">  <span class="comment">// ä½œç”¨: æ˜¯å¦ä¸ºç©ºé›†åˆ</span></span><br><span class="line">  <span class="comment">// åªè¯»: true</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">isEmpty</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">length</span> === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// addInterval - æ·»åŠ é—´éš”</span></span><br><span class="line">  <span class="title function_">addInterval</span>(<span class="params">interval, dataComparer</span>) &#123;</span><br><span class="line">    <span class="comment">// interval: TimeInterval - è¦æ·»åŠ çš„é—´éš”</span></span><br><span class="line">    <span class="comment">// dataComparer: function - æ•°æ®æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">push</span>(interval)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">changed</span>.<span class="title function_">raiseEvent</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// removeInterval - ç§»é™¤é—´éš”</span></span><br><span class="line">  <span class="title function_">removeInterval</span>(<span class="params">interval</span>) &#123;</span><br><span class="line">    <span class="comment">// interval: TimeInterval - è¦ç§»é™¤çš„é—´éš”</span></span><br><span class="line">    <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">indexOf</span>(interval)</span><br><span class="line">    <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">changed</span>.<span class="title function_">raiseEvent</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// contains - æ˜¯å¦åŒ…å«æŒ‡å®šæ—¶é—´</span></span><br><span class="line">  <span class="title function_">contains</span>(<span class="params">julianDate</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDate: JulianDate - è¦æ£€æŸ¥çš„æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: boolean</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">some</span>(<span class="function">(<span class="params">interval</span>) =&gt;</span> interval.<span class="title function_">contains</span>(julianDate))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// findInterval - æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ—¶é—´çš„é—´éš”</span></span><br><span class="line">  <span class="title function_">findInterval</span>(<span class="params">julianDate</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDate: JulianDate - è¦æŸ¥æ‰¾çš„æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: TimeInterval | undefined</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">interval</span>) =&gt;</span> interval.<span class="title function_">contains</span>(julianDate))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// findDataForIntervalContainingDate - æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ—¶é—´çš„é—´éš”æ•°æ®</span></span><br><span class="line">  <span class="title function_">findDataForIntervalContainingDate</span>(<span class="params">julianDate</span>) &#123;</span><br><span class="line">    <span class="comment">// julianDate: JulianDate - è¦æŸ¥æ‰¾çš„æ—¶é—´</span></span><br><span class="line">    <span class="comment">// è¿”å›: Object | undefined</span></span><br><span class="line">    <span class="keyword">const</span> interval = <span class="variable language_">this</span>.<span class="title function_">findInterval</span>(julianDate)</span><br><span class="line">    <span class="keyword">return</span> interval ? interval.<span class="property">data</span> : <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get - è·å–æŒ‡å®šç´¢å¼•çš„é—´éš”</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    <span class="comment">// index: number - ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// è¿”å›: TimeInterval</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_intervals</span>[index]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// removeAll - ç§»é™¤æ‰€æœ‰é—´éš”</span></span><br><span class="line">  <span class="title function_">removeAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_intervals</span>.<span class="property">length</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">changed</span>.<span class="title function_">raiseEvent</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// intersect - æ±‚ä¸å¦ä¸€ä¸ªé›†åˆçš„äº¤é›†</span></span><br><span class="line">  <span class="title function_">intersect</span>(<span class="params">other, dataComparer, mergeCallback</span>) &#123;</span><br><span class="line">    <span class="comment">// other: TimeIntervalCollection - å¦ä¸€ä¸ªé›†åˆ</span></span><br><span class="line">    <span class="comment">// dataComparer: function - æ•°æ®æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line">    <span class="comment">// mergeCallback: function - åˆå¹¶å›è°ƒ</span></span><br><span class="line">    <span class="comment">// è¿”å›: TimeIntervalCollection</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´ç³»ç»Ÿä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åŸºç¡€æ—¶é—´æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> now = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰æ—¶é—´:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(now))</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸åŒæ ¼å¼åˆ›å»ºæ—¶é—´</span></span><br><span class="line"><span class="keyword">const</span> fromDate = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-01-01T12:00:00Z&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> fromIso = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T12:00:00Z&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fromComponents = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>(<span class="number">2459945</span>, <span class="number">43200</span>) <span class="comment">// 2023-01-01 12:00:00 UTC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´è¿ç®—</span></span><br><span class="line"><span class="keyword">const</span> futureTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addHours</span>(now, <span class="number">24</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line"><span class="keyword">const</span> pastTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addDays</span>(now, -<span class="number">7</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å·®è®¡ç®—</span></span><br><span class="line"><span class="keyword">const</span> secondsDiff = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(futureTime, now)</span><br><span class="line"><span class="keyword">const</span> daysDiff = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">daysDifference</span>(futureTime, now)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœªæ¥æ—¶é—´ç›¸å·® <span class="subst">$&#123;secondsDiff&#125;</span> ç§’ï¼Œ<span class="subst">$&#123;daysDiff&#125;</span> å¤©`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´æ¯”è¾ƒ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">compare</span>(futureTime, now) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;futureTime åœ¨ now ä¹‹å&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ—¶é—´é—´éš”æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> interval1 = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T00:00:00Z&#x27;</span>),</span><br><span class="line">  <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T12:00:00Z&#x27;</span>),</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">period</span>: <span class="string">&#x27;ä¸Šåˆ&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> interval2 = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T12:00:00Z&#x27;</span>),</span><br><span class="line">  <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-02T00:00:00Z&#x27;</span>),</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">period</span>: <span class="string">&#x27;ä¸‹åˆ&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥æ—¶é—´æ˜¯å¦åœ¨é—´éš”å†…</span></span><br><span class="line"><span class="keyword">const</span> testTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T10:00:00Z&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æµ‹è¯•æ—¶é—´åœ¨interval1å†…:&#x27;</span>, interval1.<span class="title function_">contains</span>(testTime))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚äº¤é›†</span></span><br><span class="line"><span class="keyword">const</span> intersection = <span class="title class_">Cesium</span>.<span class="property">TimeInterval</span>.<span class="title function_">intersect</span>(interval1, interval2, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;äº¤é›†æ˜¯å¦ä¸ºç©º:&#x27;</span>, intersection.<span class="property">isEmpty</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æ—¶é—´é—´éš”é›†åˆ</span></span><br><span class="line"><span class="keyword">const</span> collection = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeIntervalCollection</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å¤šä¸ªé—´éš”</span></span><br><span class="line">collection.<span class="title function_">addInterval</span>(interval1)</span><br><span class="line">collection.<span class="title function_">addInterval</span>(interval2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ›´å¤šé—´éš”ï¼ˆæ¨¡æ‹Ÿä¸€å¤©çš„æ—¶é—´æ®µï¼‰</span></span><br><span class="line"><span class="keyword">const</span> hourlyIntervals = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> hour = <span class="number">0</span>; hour &lt; <span class="number">24</span>; hour++) &#123;</span><br><span class="line">  <span class="keyword">const</span> startTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(</span><br><span class="line">    <span class="string">`2023-01-01T<span class="subst">$&#123;hour.toString().padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>:00:00Z`</span>,</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">const</span> stopTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addHours</span>(startTime, <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> interval = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">    <span class="attr">start</span>: startTime,</span><br><span class="line">    <span class="attr">stop</span>: stopTime,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">hour</span>: hour,</span><br><span class="line">      <span class="attr">period</span>: hour &lt; <span class="number">6</span> ? <span class="string">&#x27;å‡Œæ™¨&#x27;</span> : hour &lt; <span class="number">12</span> ? <span class="string">&#x27;ä¸Šåˆ&#x27;</span> : hour &lt; <span class="number">18</span> ? <span class="string">&#x27;ä¸‹åˆ&#x27;</span> : <span class="string">&#x27;æ™šä¸Š&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  collection.<span class="title function_">addInterval</span>(interval)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ç‰¹å®šæ—¶é—´çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> queryTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T15:30:00Z&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> intervalData = collection.<span class="title function_">findDataForIntervalContainingDate</span>(queryTime)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;15:30çš„æ—¶é—´æ®µæ•°æ®:&#x27;</span>, intervalData)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬é›†åˆå˜åŒ–</span></span><br><span class="line">collection.<span class="property">changed</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ—¶é—´é—´éš”é›†åˆå‘ç”Ÿå˜åŒ–ï¼Œå½“å‰åŒ…å«&#x27;</span>, collection.<span class="property">length</span>, <span class="string">&#x27;ä¸ªé—´éš”&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å®ä½“å¯ç”¨æ€§æ—¶é—´</span></span><br><span class="line"><span class="keyword">const</span> entity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;é™æ—¶æ˜¾ç¤ºçš„å®ä½“&#x27;</span>,</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="attr">point</span>: &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¾ç½®å¯ç”¨æ€§æ—¶é—´</span></span><br><span class="line">  <span class="attr">availability</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeIntervalCollection</span>([</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeInterval</span>(&#123;</span><br><span class="line">      <span class="attr">start</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T08:00:00Z&#x27;</span>),</span><br><span class="line">      <span class="attr">stop</span>: <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T18:00:00Z&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ]),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. æ—¶é’Ÿæ§åˆ¶</span></span><br><span class="line"><span class="keyword">const</span> clock = viewer.<span class="property">clock</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æ—¶é—´èŒƒå›´</span></span><br><span class="line">clock.<span class="property">startTime</span> = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-01T00:00:00Z&#x27;</span>)</span><br><span class="line">clock.<span class="property">stopTime</span> = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromIso8601</span>(<span class="string">&#x27;2023-01-02T00:00:00Z&#x27;</span>)</span><br><span class="line">clock.<span class="property">currentTime</span> = clock.<span class="property">startTime</span>.<span class="title function_">clone</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´æ§åˆ¶</span></span><br><span class="line">clock.<span class="property">multiplier</span> = <span class="number">3600</span> <span class="comment">// 1ç§’ä»£è¡¨1å°æ—¶</span></span><br><span class="line">clock.<span class="property">clockRange</span> = <span class="title class_">Cesium</span>.<span class="property">ClockRange</span>.<span class="property">LOOP_STOP</span> <span class="comment">// å¾ªç¯æ’­æ”¾</span></span><br><span class="line">clock.<span class="property">shouldAnimate</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æ—¶é’Ÿäº‹ä»¶</span></span><br><span class="line">clock.<span class="property">onTick</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">clock</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> currentHour = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(clock.<span class="property">currentTime</span>).<span class="title function_">getHours</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®æ—¶é—´æ”¹å˜åœºæ™¯</span></span><br><span class="line">  <span class="keyword">if</span> (currentHour &gt;= <span class="number">6</span> &amp;&amp; currentHour &lt; <span class="number">18</span>) &#123;</span><br><span class="line">    <span class="comment">// ç™½å¤©</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">skyAtmosphere</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">sun</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">moon</span>.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤œæ™š</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">skyAtmosphere</span>.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">sun</span>.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="property">moon</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. æ—¶é—´ç›¸å…³çš„å±æ€§åŠ¨ç”»</span></span><br><span class="line"><span class="keyword">const</span> timeBasedPosition = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> secondsIntoDay = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsOfDay</span>(time)</span><br><span class="line">  <span class="keyword">const</span> angle = (secondsIntoDay / <span class="number">86400</span>) * <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="property">TWO_PI</span> <span class="comment">// ä¸€å¤©è½¬ä¸€åœˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> radius = <span class="number">1000</span></span><br><span class="line">  <span class="keyword">const</span> x = radius * <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle)</span><br><span class="line">  <span class="keyword">const</span> y = radius * <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">    <span class="number">116.4074</span> + x / <span class="number">111320</span>, <span class="comment">// è½¬æ¢ä¸ºç»åº¦åç§»</span></span><br><span class="line">    <span class="number">39.9042</span> + y / <span class="number">110540</span>, <span class="comment">// è½¬æ¢ä¸ºçº¬åº¦åç§»</span></span><br><span class="line">    <span class="number">100</span>,</span><br><span class="line">  )</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> orbitingEntity = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: timeBasedPosition,</span><br><span class="line">  <span class="attr">point</span>: &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">LIME</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">path</span>: &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">leadTime</span>: <span class="number">3600</span>, <span class="comment">// æ˜¾ç¤ºæœªæ¥1å°æ—¶çš„è½¨è¿¹</span></span><br><span class="line">    <span class="attr">trailTime</span>: <span class="number">3600</span>, <span class="comment">// æ˜¾ç¤ºè¿‡å»1å°æ—¶çš„è½¨è¿¹</span></span><br><span class="line">    <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">LIME</span>,</span><br><span class="line">    <span class="attr">resolution</span>: <span class="number">60</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. æ—¶åŒºè½¬æ¢</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convertToLocalTime</span>(<span class="params">julianDate, timezoneOffset</span>) &#123;</span><br><span class="line">  <span class="comment">// timezoneOffset: æ—¶åŒºåç§»ï¼ˆå°æ—¶ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> offsetSeconds = timezoneOffset * <span class="number">3600</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">addSeconds</span>(julianDate, offsetSeconds, <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">JulianDate</span>())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´ï¼ˆUTC+8ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> utcTime = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line"><span class="keyword">const</span> beijingTime = <span class="title function_">convertToLocalTime</span>(utcTime, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;UTCæ—¶é—´:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(utcTime))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åŒ—äº¬æ—¶é—´:&#x27;</span>, <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">toDate</span>(beijingTime))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. æ€§èƒ½æ—¶é—´æµ‹é‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">measurePerformance</span>(<span class="params">fn, name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> start = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">fn</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> end = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">now</span>()</span><br><span class="line">  <span class="keyword">const</span> elapsed = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(end, start)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;name&#125;</span> æ‰§è¡Œæ—¶é—´: <span class="subst">$&#123;elapsed * <span class="number">1000</span>&#125;</span> æ¯«ç§’`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="title function_">measurePerformance</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä¸€äº›è®¡ç®—å¯†é›†çš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">    <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(i)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="string">&#x27;æ•°å­¦è®¡ç®—&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="ç»˜åˆ¶åŠŸèƒ½è¯¦è§£"><a href="#ç»˜åˆ¶åŠŸèƒ½è¯¦è§£" class="headerlink" title="ç»˜åˆ¶åŠŸèƒ½è¯¦è§£"></a>ç»˜åˆ¶åŠŸèƒ½è¯¦è§£</h2><h3 id="ç»˜åˆ¶å·¥å…·åŸºç±»"><a href="#ç»˜åˆ¶å·¥å…·åŸºç±»" class="headerlink" title="ç»˜åˆ¶å·¥å…·åŸºç±»"></a>ç»˜åˆ¶å·¥å…·åŸºç±»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cesiumç»˜åˆ¶å·¥å…·åŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CesiumDrawTool</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewer</span> = viewer</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">scene</span> = viewer.<span class="property">scene</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">camera</span> = viewer.<span class="property">camera</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span> = viewer.<span class="property">canvas</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// type: string</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»˜åˆ¶ç±»å‹</span></span><br><span class="line">    <span class="comment">// é€‰é¡¹: &#x27;point&#x27;, &#x27;polyline&#x27;, &#x27;polygon&#x27;, &#x27;rectangle&#x27;, &#x27;circle&#x27;, &#x27;billboard&#x27;, &#x27;model&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">type</span> = options.<span class="property">type</span> || <span class="string">&#x27;point&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// style: Object</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»˜åˆ¶æ ·å¼é…ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span> = options.<span class="property">style</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// clampToGround: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: æ˜¯å¦è´´åœ°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">clampToGround</span> = options.<span class="property">clampToGround</span> !== <span class="literal">undefined</span> ? options.<span class="property">clampToGround</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// enableEdit: boolean</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: ç»˜åˆ¶å®Œæˆåæ˜¯å¦å¯ç¼–è¾‘</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">enableEdit</span> = options.<span class="property">enableEdit</span> !== <span class="literal">undefined</span> ? options.<span class="property">enableEdit</span> : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// heightOffset: number</span></span><br><span class="line">    <span class="comment">// ä½œç”¨: é«˜åº¦åç§»é‡ï¼ˆç±³ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heightOffset</span> = options.<span class="property">heightOffset</span> || <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isActive</span> = <span class="literal">false</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">positions</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeEntity</span> = <span class="literal">null</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tempEntities</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¿€æ´»ç»˜åˆ¶å·¥å…·</span></span><br><span class="line">  <span class="title function_">activate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isActive</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isActive</span> = <span class="literal">true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">positions</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clearTempEntities</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºäº‹ä»¶å¤„ç†å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span> = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceEventHandler</span>(<span class="variable language_">this</span>.<span class="property">canvas</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">bindEvents</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ”¹å˜é¼ æ ‡æ ·å¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;crosshair&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§¦å‘æ¿€æ´»äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onActivate</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœç”¨ç»˜åˆ¶å·¥å…·</span></span><br><span class="line">  <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isActive</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isActive</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">unbindEvents</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç†ä¸´æ—¶å®ä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clearTempEntities</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¢å¤é¼ æ ‡æ ·å¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;default&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§¦å‘åœç”¨äº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onDeactivate</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»‘å®šé¼ æ ‡äº‹ä»¶</span></span><br><span class="line">  <span class="title function_">bindEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å·¦é”®ç‚¹å‡»</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span>.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">click</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> position = <span class="variable language_">this</span>.<span class="title function_">pickPosition</span>(click.<span class="property">position</span>)</span><br><span class="line">      <span class="keyword">if</span> (position) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">handleClick</span>(position)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¼ æ ‡ç§»åŠ¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span>.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">movement</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> position = <span class="variable language_">this</span>.<span class="title function_">pickPosition</span>(movement.<span class="property">endPosition</span>)</span><br><span class="line">      <span class="keyword">if</span> (position) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">handleMouseMove</span>(position)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å³é”®å®Œæˆ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span>.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">click</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">finishDrawing</span>()</span><br><span class="line">    &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">RIGHT_CLICK</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒå‡»å®Œæˆ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handler</span>.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">click</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">finishDrawing</span>()</span><br><span class="line">    &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_DOUBLE_CLICK</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">  <span class="title function_">unbindEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">handler</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">handler</span>.<span class="title function_">destroy</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">handler</span> = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹¾å–ä½ç½®</span></span><br><span class="line">  <span class="title function_">pickPosition</span>(<span class="params">windowPosition</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pickedPosition</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">clampToGround</span>) &#123;</span><br><span class="line">      <span class="comment">// è´´åœ°æ¨¡å¼ - æ‹¾å–åœ°å½¢</span></span><br><span class="line">      <span class="keyword">const</span> ray = <span class="variable language_">this</span>.<span class="property">camera</span>.<span class="title function_">getPickRay</span>(windowPosition)</span><br><span class="line">      pickedPosition = <span class="variable language_">this</span>.<span class="property">scene</span>.<span class="property">globe</span>.<span class="title function_">pick</span>(ray, <span class="variable language_">this</span>.<span class="property">scene</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ç©ºé—´æ¨¡å¼ - æ‹¾å–æ¤­çƒé¢</span></span><br><span class="line">      pickedPosition = <span class="variable language_">this</span>.<span class="property">camera</span>.<span class="title function_">pickEllipsoid</span>(windowPosition, <span class="variable language_">this</span>.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">ellipsoid</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pickedPosition) &#123;</span><br><span class="line">      <span class="comment">// æ·»åŠ é«˜åº¦åç§»</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">heightOffset</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> cartographic = <span class="title class_">Cesium</span>.<span class="property">Cartographic</span>.<span class="title function_">fromCartesian</span>(pickedPosition)</span><br><span class="line">        cartographic.<span class="property">height</span> += <span class="variable language_">this</span>.<span class="property">heightOffset</span></span><br><span class="line">        pickedPosition = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromRadians</span>(</span><br><span class="line">          cartographic.<span class="property">longitude</span>,</span><br><span class="line">          cartographic.<span class="property">latitude</span>,</span><br><span class="line">          cartographic.<span class="property">height</span>,</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pickedPosition</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="title function_">push</span>(position)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updateDrawing</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦æ»¡è¶³å®Œæˆæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">shouldFinish</span>()) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">finishDrawing</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†é¼ æ ‡ç§»åŠ¨</span></span><br><span class="line">  <span class="title function_">handleMouseMove</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">updatePreview</span>(position)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°ç»˜åˆ¶çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">updateDrawing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å­ç±»å®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°é¢„è§ˆ</span></span><br><span class="line">  <span class="title function_">updatePreview</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="comment">// å­ç±»å®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ˜¯å¦åº”è¯¥å®Œæˆç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">shouldFinish</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;point&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;billboard&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;model&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt;= <span class="number">1</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;polyline&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt;= <span class="number">2</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;polygon&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt;= <span class="number">3</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;rectangle&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;circle&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt;= <span class="number">2</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®Œæˆç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">finishDrawing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &lt; <span class="variable language_">this</span>.<span class="title function_">getMinPointCount</span>()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæœ€ç»ˆå®ä½“</span></span><br><span class="line">    <span class="keyword">const</span> entity = <span class="variable language_">this</span>.<span class="title function_">createFinalEntity</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç†ä¸´æ—¶å®ä½“</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clearTempEntities</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœç”¨å·¥å…·</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">deactivate</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§¦å‘å®Œæˆäº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onComplete</span>(entity)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> entity</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–æœ€å°ç‚¹æ•°</span></span><br><span class="line">  <span class="title function_">getMinPointCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;point&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;billboard&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;model&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;polyline&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;polygon&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;rectangle&#x27;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;circle&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºæœ€ç»ˆå®ä½“ï¼ˆå­ç±»å®ç°ï¼‰</span></span><br><span class="line">  <span class="title function_">createFinalEntity</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†ä¸´æ—¶å®ä½“</span></span><br><span class="line">  <span class="title function_">clearTempEntities</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tempEntities</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">entity</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">remove</span>(entity)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tempEntities</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// äº‹ä»¶å›è°ƒ</span></span><br><span class="line">  <span class="title function_">onActivate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.type&#125;</span> ç»˜åˆ¶å·¥å…·å·²æ¿€æ´»`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onDeactivate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.type&#125;</span> ç»˜åˆ¶å·¥å…·å·²åœç”¨`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onComplete</span>(<span class="params">entity</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.type&#125;</span> ç»˜åˆ¶å®Œæˆ:`</span>, entity)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹ç»˜åˆ¶å·¥å…·</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PointDrawTool</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CesiumDrawTool</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(viewer, &#123; ...options, <span class="attr">type</span>: <span class="string">&#x27;point&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é»˜è®¤ç‚¹æ ·å¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// pixelSize: number - ç‚¹çš„åƒç´ å¤§å°</span></span><br><span class="line">        <span class="attr">pixelSize</span>: <span class="number">10</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// color: Cesium.Color - ç‚¹çš„é¢œè‰²</span></span><br><span class="line">        <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// outlineColor: Cesium.Color - è½®å»“é¢œè‰²</span></span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// outlineWidth: number - è½®å»“å®½åº¦</span></span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// heightReference: Cesium.HeightReference - é«˜åº¦å‚è€ƒ</span></span><br><span class="line">        <span class="attr">heightReference</span>: <span class="variable language_">this</span>.<span class="property">clampToGround</span></span><br><span class="line">          ? <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span></span><br><span class="line">          : <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// disableDepthTestDistance: number - ç¦ç”¨æ·±åº¦æµ‹è¯•è·ç¦»</span></span><br><span class="line">        <span class="attr">disableDepthTestDistance</span>: <span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// scaleByDistance: Cesium.NearFarScalar - åŸºäºè·ç¦»çš„ç¼©æ”¾</span></span><br><span class="line">        <span class="attr">scaleByDistance</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// distanceDisplayCondition: Cesium.DistanceDisplayCondition - è·ç¦»æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="literal">undefined</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      options.<span class="property">style</span>,</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createFinalEntity</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> entity = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;DrawPoint&#x27;</span>,</span><br><span class="line">      <span class="attr">position</span>: <span class="variable language_">this</span>.<span class="property">positions</span>[<span class="number">0</span>],</span><br><span class="line">      <span class="attr">point</span>: &#123;</span><br><span class="line">        <span class="attr">pixelSize</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">pixelSize</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span>,</span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineColor</span>,</span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineWidth</span>,</span><br><span class="line">        <span class="attr">heightReference</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">heightReference</span>,</span><br><span class="line">        <span class="attr">disableDepthTestDistance</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">disableDepthTestDistance</span>,</span><br><span class="line">        <span class="attr">scaleByDistance</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">scaleByDistance</span>,</span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">distanceDisplayCondition</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> entity</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿ç»˜åˆ¶å·¥å…·</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PolylineDrawTool</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CesiumDrawTool</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(viewer, &#123; ...options, <span class="attr">type</span>: <span class="string">&#x27;polyline&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// width: number - çº¿å®½</span></span><br><span class="line">        <span class="attr">width</span>: <span class="number">3</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// material: Cesium.MaterialProperty - æè´¨</span></span><br><span class="line">        <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// clampToGround: boolean - æ˜¯å¦è´´åœ°</span></span><br><span class="line">        <span class="attr">clampToGround</span>: <span class="variable language_">this</span>.<span class="property">clampToGround</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// classificationType: Cesium.ClassificationType - åˆ†ç±»ç±»å‹</span></span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">clampToGround</span> ? <span class="title class_">Cesium</span>.<span class="property">ClassificationType</span>.<span class="property">TERRAIN</span> : <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// shadows: Cesium.ShadowMode - é˜´å½±æ¨¡å¼</span></span><br><span class="line">        <span class="attr">shadows</span>: <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// distanceDisplayCondition: Cesium.DistanceDisplayCondition</span></span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// zIndex: number - å±‚çº§ï¼ˆè´´åœ°æ—¶æœ‰æ•ˆï¼‰</span></span><br><span class="line">        <span class="attr">zIndex</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      options.<span class="property">style</span>,</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateDrawing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &lt; <span class="number">2</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤ä¹‹å‰çš„ä¸´æ—¶çº¿</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clearTempEntities</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸´æ—¶çº¿</span></span><br><span class="line">    <span class="keyword">const</span> tempEntity = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;TempPolyline&#x27;</span>,</span><br><span class="line">      <span class="attr">polyline</span>: &#123;</span><br><span class="line">        <span class="attr">positions</span>: <span class="variable language_">this</span>.<span class="property">positions</span>,</span><br><span class="line">        <span class="attr">width</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">width</span>,</span><br><span class="line">        <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">material</span>,</span><br><span class="line">        <span class="attr">clampToGround</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">clampToGround</span>,</span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">classificationType</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tempEntities</span>.<span class="title function_">push</span>(tempEntity)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updatePreview</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºé¢„è§ˆä½ç½®æ•°ç»„</span></span><br><span class="line">    <span class="keyword">const</span> previewPositions = [...<span class="variable language_">this</span>.<span class="property">positions</span>, position]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ä¸´æ—¶çº¿çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">tempEntities</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tempEntities</span>[<span class="number">0</span>].<span class="property">polyline</span>.<span class="property">positions</span> = previewPositions</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createFinalEntity</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> entity = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;DrawPolyline&#x27;</span>,</span><br><span class="line">      <span class="attr">polyline</span>: &#123;</span><br><span class="line">        <span class="attr">positions</span>: <span class="variable language_">this</span>.<span class="property">positions</span>,</span><br><span class="line">        <span class="attr">width</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">width</span>,</span><br><span class="line">        <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">material</span>,</span><br><span class="line">        <span class="attr">clampToGround</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">clampToGround</span>,</span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">classificationType</span>,</span><br><span class="line">        <span class="attr">shadows</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">shadows</span>,</span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">distanceDisplayCondition</span>,</span><br><span class="line">        <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">zIndex</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> entity</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢ç»˜åˆ¶å·¥å…·</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PolygonDrawTool</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CesiumDrawTool</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(viewer, &#123; ...options, <span class="attr">type</span>: <span class="string">&#x27;polygon&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// material: Cesium.MaterialProperty - å¡«å……æè´¨</span></span><br><span class="line">        <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>.<span class="title function_">withAlpha</span>(<span class="number">0.5</span>),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// outline: boolean - æ˜¯å¦æ˜¾ç¤ºè½®å»“</span></span><br><span class="line">        <span class="attr">outline</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// outlineColor: Cesium.Color - è½®å»“é¢œè‰²</span></span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// outlineWidth: number - è½®å»“å®½åº¦</span></span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// height: number - é«˜åº¦</span></span><br><span class="line">        <span class="attr">height</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// extrudedHeight: number - æ‹‰ä¼¸é«˜åº¦</span></span><br><span class="line">        <span class="attr">extrudedHeight</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// heightReference: Cesium.HeightReference - é«˜åº¦å‚è€ƒ</span></span><br><span class="line">        <span class="attr">heightReference</span>: <span class="variable language_">this</span>.<span class="property">clampToGround</span></span><br><span class="line">          ? <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">CLAMP_TO_GROUND</span></span><br><span class="line">          : <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// extrudedHeightReference: Cesium.HeightReference - æ‹‰ä¼¸é«˜åº¦å‚è€ƒ</span></span><br><span class="line">        <span class="attr">extrudedHeightReference</span>: <span class="title class_">Cesium</span>.<span class="property">HeightReference</span>.<span class="property">NONE</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// fill: boolean - æ˜¯å¦å¡«å……</span></span><br><span class="line">        <span class="attr">fill</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// shadows: Cesium.ShadowMode - é˜´å½±æ¨¡å¼</span></span><br><span class="line">        <span class="attr">shadows</span>: <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// distanceDisplayCondition: Cesium.DistanceDisplayCondition</span></span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// classificationType: Cesium.ClassificationType - åˆ†ç±»ç±»å‹</span></span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">clampToGround</span> ? <span class="title class_">Cesium</span>.<span class="property">ClassificationType</span>.<span class="property">TERRAIN</span> : <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// zIndex: number - å±‚çº§</span></span><br><span class="line">        <span class="attr">zIndex</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      options.<span class="property">style</span>,</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateDrawing</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &lt; <span class="number">3</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">clearTempEntities</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> tempEntity = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;TempPolygon&#x27;</span>,</span><br><span class="line">      <span class="attr">polygon</span>: &#123;</span><br><span class="line">        <span class="attr">hierarchy</span>: <span class="variable language_">this</span>.<span class="property">positions</span>,</span><br><span class="line">        <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">material</span>,</span><br><span class="line">        <span class="attr">outline</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outline</span>,</span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineColor</span>,</span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineWidth</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">height</span>,</span><br><span class="line">        <span class="attr">heightReference</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">heightReference</span>,</span><br><span class="line">        <span class="attr">fill</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">fill</span>,</span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">classificationType</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tempEntities</span>.<span class="title function_">push</span>(tempEntity)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updatePreview</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &lt; <span class="number">2</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> previewPositions = [...<span class="variable language_">this</span>.<span class="property">positions</span>, position]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">tempEntities</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tempEntities</span>[<span class="number">0</span>].<span class="property">polygon</span>.<span class="property">hierarchy</span> = previewPositions</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createFinalEntity</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> entity = <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;DrawPolygon&#x27;</span>,</span><br><span class="line">      <span class="attr">polygon</span>: &#123;</span><br><span class="line">        <span class="attr">hierarchy</span>: <span class="variable language_">this</span>.<span class="property">positions</span>,</span><br><span class="line">        <span class="attr">material</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">material</span>,</span><br><span class="line">        <span class="attr">outline</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outline</span>,</span><br><span class="line">        <span class="attr">outlineColor</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineColor</span>,</span><br><span class="line">        <span class="attr">outlineWidth</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">outlineWidth</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">height</span>,</span><br><span class="line">        <span class="attr">extrudedHeight</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">extrudedHeight</span>,</span><br><span class="line">        <span class="attr">heightReference</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">heightReference</span>,</span><br><span class="line">        <span class="attr">extrudedHeightReference</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">extrudedHeightReference</span>,</span><br><span class="line">        <span class="attr">fill</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">fill</span>,</span><br><span class="line">        <span class="attr">shadows</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">shadows</span>,</span><br><span class="line">        <span class="attr">distanceDisplayCondition</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">distanceDisplayCondition</span>,</span><br><span class="line">        <span class="attr">classificationType</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">classificationType</span>,</span><br><span class="line">        <span class="attr">zIndex</span>: <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">zIndex</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> entity</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»˜åˆ¶ç®¡ç†å™¨"><a href="#ç»˜åˆ¶ç®¡ç†å™¨" class="headerlink" title="ç»˜åˆ¶ç®¡ç†å™¨"></a>ç»˜åˆ¶ç®¡ç†å™¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cesiumç»˜åˆ¶ç®¡ç†å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CesiumDrawManager</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewer</span> = viewer</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">options</span> = options</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰æ¿€æ´»çš„ç»˜åˆ¶å·¥å…·</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeTool</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»˜åˆ¶å·¥å…·å®ä¾‹</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tools</span> = &#123;</span><br><span class="line">      <span class="attr">point</span>: <span class="keyword">new</span> <span class="title class_">PointDrawTool</span>(viewer),</span><br><span class="line">      <span class="attr">polyline</span>: <span class="keyword">new</span> <span class="title class_">PolylineDrawTool</span>(viewer),</span><br><span class="line">      <span class="attr">polygon</span>: <span class="keyword">new</span> <span class="title class_">PolygonDrawTool</span>(viewer),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»˜åˆ¶ç»“æœå­˜å‚¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawResults</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">bindToolEvents</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»‘å®šå·¥å…·äº‹ä»¶</span></span><br><span class="line">  <span class="title function_">bindToolEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">values</span>(<span class="variable language_">this</span>.<span class="property">tools</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">tool</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// é‡å†™å®Œæˆäº‹ä»¶</span></span><br><span class="line">      <span class="keyword">const</span> originalOnComplete = tool.<span class="property">onComplete</span>.<span class="title function_">bind</span>(tool)</span><br><span class="line">      tool.<span class="property">onComplete</span> = <span class="function">(<span class="params">entity</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">originalOnComplete</span>(entity)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onDrawComplete</span>(entity, tool.<span class="property">type</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å§‹ç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">startDraw</span>(<span class="params">type, style = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// åœæ­¢å½“å‰ç»˜åˆ¶</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">stopDraw</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥å·¥å…·ç±»å‹</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">tools</span>[type]) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ä¸æ”¯æŒçš„ç»˜åˆ¶ç±»å‹:&#x27;</span>, type)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°å·¥å…·æ ·å¼</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="title function_">keys</span>(style).<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>.<span class="property">tools</span>[type].<span class="property">style</span>, style)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¿€æ´»å·¥å…·</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeTool</span> = <span class="variable language_">this</span>.<span class="property">tools</span>[type]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeTool</span>.<span class="title function_">activate</span>()</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¼€å§‹ç»˜åˆ¶ <span class="subst">$&#123;type&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢ç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">stopDraw</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">activeTool</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">activeTool</span>.<span class="title function_">deactivate</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">activeTool</span> = <span class="literal">null</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åœæ­¢ç»˜åˆ¶&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»˜åˆ¶å®Œæˆå¤„ç†</span></span><br><span class="line">  <span class="title function_">onDrawComplete</span>(<span class="params">entity, type</span>) &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ°ç»“æœæ•°ç»„</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawResults</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">entity</span>: entity,</span><br><span class="line">      <span class="attr">type</span>: type,</span><br><span class="line">      <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">      <span class="attr">id</span>: entity.<span class="property">id</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;type&#125;</span> ç»˜åˆ¶å®Œæˆ`</span>, entity)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç©ºæ‰€æœ‰ç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">clearAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawResults</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">remove</span>(result.<span class="property">entity</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawResults</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ’¤é”€ä¸Šä¸€æ­¥ç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">undo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">drawResults</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> lastResult = <span class="variable language_">this</span>.<span class="property">drawResults</span>.<span class="title function_">pop</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">viewer</span>.<span class="property">entities</span>.<span class="title function_">remove</span>(lastResult.<span class="property">entity</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»˜åˆ¶å·¥å…·æ "><a href="#ç»˜åˆ¶å·¥å…·æ " class="headerlink" title="ç»˜åˆ¶å·¥å…·æ "></a>ç»˜åˆ¶å·¥å…·æ </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»˜åˆ¶å·¥å…·æ æ§ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DrawToolbar</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">viewer, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewer</span> = viewer</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawManager</span> = <span class="keyword">new</span> <span class="title class_">CesiumDrawManager</span>(viewer, options)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¥å…·æ é…ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tools</span> = options.<span class="property">tools</span> || [</span><br><span class="line">      &#123; <span class="attr">type</span>: <span class="string">&#x27;point&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚¹&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;ğŸ“&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;ç»˜åˆ¶ç‚¹&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">type</span>: <span class="string">&#x27;polyline&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;çº¿&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;ğŸ“&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;ç»˜åˆ¶çº¿&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">type</span>: <span class="string">&#x27;polygon&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;é¢&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;ğŸ”²&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;ç»˜åˆ¶å¤šè¾¹å½¢&#x27;</span> &#125;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">container</span> = <span class="literal">null</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeToolType</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createToolbar</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºå·¥å…·æ </span></span><br><span class="line">  <span class="title function_">createToolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå®¹å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">container</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">container</span>.<span class="property">className</span> = <span class="string">&#x27;cesium-draw-toolbar&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®æ ·å¼</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>.<span class="property">container</span>.<span class="property">style</span>, &#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">      <span class="attr">top</span>: <span class="string">&#x27;10px&#x27;</span>,</span><br><span class="line">      <span class="attr">left</span>: <span class="string">&#x27;10px&#x27;</span>,</span><br><span class="line">      <span class="attr">zIndex</span>: <span class="string">&#x27;1000&#x27;</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;rgba(42, 42, 42, 0.9)&#x27;</span>,</span><br><span class="line">      <span class="attr">borderRadius</span>: <span class="string">&#x27;5px&#x27;</span>,</span><br><span class="line">      <span class="attr">padding</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">display</span>: <span class="string">&#x27;flex&#x27;</span>,</span><br><span class="line">      <span class="attr">flexDirection</span>: <span class="string">&#x27;column&#x27;</span>,</span><br><span class="line">      <span class="attr">gap</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå·¥å…·æŒ‰é’®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createToolButtons</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ“ä½œæŒ‰é’®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createActionButtons</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ°é¡µé¢</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">container</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºå·¥å…·æŒ‰é’®</span></span><br><span class="line">  <span class="title function_">createToolButtons</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tools</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">tool</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> button = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">      button.<span class="property">innerHTML</span> = <span class="string">`<span class="subst">$&#123;tool.icon&#125;</span> <span class="subst">$&#123;tool.name&#125;</span>`</span></span><br><span class="line">      button.<span class="property">title</span> = tool.<span class="property">title</span></span><br><span class="line"></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(button.<span class="property">style</span>, &#123;</span><br><span class="line">        <span class="attr">padding</span>: <span class="string">&#x27;6px 12px&#x27;</span>,</span><br><span class="line">        <span class="attr">border</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">        <span class="attr">borderRadius</span>: <span class="string">&#x27;3px&#x27;</span>,</span><br><span class="line">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#ffffff&#x27;</span>,</span><br><span class="line">        <span class="attr">cursor</span>: <span class="string">&#x27;pointer&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      button.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">selectTool</span>(tool.<span class="property">type</span>, button)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">container</span>.<span class="title function_">appendChild</span>(button)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºæ“ä½œæŒ‰é’®</span></span><br><span class="line">  <span class="title function_">createActionButtons</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> actions = [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;åœæ­¢&#x27;</span>, <span class="attr">action</span>: <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">stopDraw</span>() &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;æ’¤é”€&#x27;</span>, <span class="attr">action</span>: <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">drawManager</span>.<span class="title function_">undo</span>() &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;æ¸…ç©º&#x27;</span>, <span class="attr">action</span>: <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">drawManager</span>.<span class="title function_">clearAll</span>() &#125;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    actions.<span class="title function_">forEach</span>(<span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> button = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">      button.<span class="property">innerHTML</span> = action.<span class="property">name</span></span><br><span class="line"></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(button.<span class="property">style</span>, &#123;</span><br><span class="line">        <span class="attr">padding</span>: <span class="string">&#x27;4px 8px&#x27;</span>,</span><br><span class="line">        <span class="attr">border</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">        <span class="attr">borderRadius</span>: <span class="string">&#x27;3px&#x27;</span>,</span><br><span class="line">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#ffffff&#x27;</span>,</span><br><span class="line">        <span class="attr">cursor</span>: <span class="string">&#x27;pointer&#x27;</span>,</span><br><span class="line">        <span class="attr">fontSize</span>: <span class="string">&#x27;11px&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      button.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, action.<span class="property">action</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">container</span>.<span class="title function_">appendChild</span>(button)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€‰æ‹©å·¥å…·</span></span><br><span class="line">  <span class="title function_">selectTool</span>(<span class="params">toolType, buttonElement</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">activeToolType</span> === toolType) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">stopDraw</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">activeToolType</span> = toolType</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">drawManager</span>.<span class="title function_">startDraw</span>(toolType)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢ç»˜åˆ¶</span></span><br><span class="line">  <span class="title function_">stopDraw</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">activeToolType</span> = <span class="literal">null</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">drawManager</span>.<span class="title function_">stopDraw</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&#x27;cesiumContainer&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> drawToolbar = <span class="keyword">new</span> <span class="title class_">DrawToolbar</span>(viewer)</span><br></pre></td></tr></table></figure>

<h2 id="âš¡-æ€§èƒ½ä¼˜åŒ–è¯¦è§£"><a href="#âš¡-æ€§èƒ½ä¼˜åŒ–è¯¦è§£" class="headerlink" title="âš¡ æ€§èƒ½ä¼˜åŒ–è¯¦è§£"></a>âš¡ æ€§èƒ½ä¼˜åŒ–è¯¦è§£</h2><h3 id="ğŸ“‹-ç›®å½•-1"><a href="#ğŸ“‹-ç›®å½•-1" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h3><ul>
<li><a href="#%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96">æ¸²æŸ“ä¼˜åŒ–</a></li>
<li><a href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86">å†…å­˜ç®¡ç†</a></li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E4%BC%98%E5%8C%96">äº‹ä»¶ä¼˜åŒ–</a></li>
<li><a href="#%E6%82%AC%E5%81%9C%E4%BA%8B%E4%BB%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="#%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96">å¼‚æ­¥åŠ è½½ä¼˜åŒ–</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93">æœ€ä½³å®è·µæ€»ç»“</a></li>
</ul>
<hr>
<h3 id="ğŸ¯-æ¸²æŸ“ä¼˜åŒ–"><a href="#ğŸ¯-æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="ğŸ¯ æ¸²æŸ“ä¼˜åŒ–"></a>ğŸ¯ æ¸²æŸ“ä¼˜åŒ–</h3><h4 id="1-æŒ‰éœ€æ¸²æŸ“-On-Demand-Rendering"><a href="#1-æŒ‰éœ€æ¸²æŸ“-On-Demand-Rendering" class="headerlink" title="1. æŒ‰éœ€æ¸²æŸ“ (On-Demand Rendering)"></a>1. æŒ‰éœ€æ¸²æŸ“ (On-Demand Rendering)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯ç”¨æŒ‰éœ€æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">requestRenderMode</span> = <span class="literal">true</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">maximumRenderTimeChange</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰‹åŠ¨è§¦å‘æ¸²æŸ“å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">requestRenderIfNeeded</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (needsUpdate) &#123;</span><br><span class="line">    viewer.<span class="property">scene</span>.<span class="title function_">requestRender</span>()</span><br><span class="line">    needsUpdate = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æ•°æ®å˜åŒ–ï¼Œè‡ªåŠ¨è§¦å‘æ¸²æŸ“</span></span><br><span class="line">viewer.<span class="property">entities</span>.<span class="property">collectionChanged</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  needsUpdate = <span class="literal">true</span></span><br><span class="line">  <span class="title function_">requestRenderIfNeeded</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-LOD-Level-of-Detail-ä¼˜åŒ–"><a href="#2-LOD-Level-of-Detail-ä¼˜åŒ–" class="headerlink" title="2. LOD (Level of Detail) ä¼˜åŒ–"></a>2. LOD (Level of Detail) ä¼˜åŒ–</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é™ä½åœ°å½¢ç»†èŠ‚ï¼Œæå‡æ€§èƒ½</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">maximumScreenSpaceError</span> = <span class="number">1</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">tileCacheSize</span> = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§†é”¥å‰”é™¤ä¼˜åŒ–</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">showSkirts</span> = <span class="literal">false</span> <span class="comment">// ç¦ç”¨åœ°å½¢è£™è¾¹</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">fog</span>.<span class="property">enabled</span> = <span class="literal">true</span> <span class="comment">// å¯ç”¨é›¾æ•ˆéšè—è¿œå¤„ç»†èŠ‚</span></span><br></pre></td></tr></table></figure>

<h4 id="3-å®ä½“ä¼˜åŒ–-Entity-Optimization"><a href="#3-å®ä½“ä¼˜åŒ–-Entity-Optimization" class="headerlink" title="3. å®ä½“ä¼˜åŒ– (Entity Optimization)"></a>3. å®ä½“ä¼˜åŒ– (Entity Optimization)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Primitive æ›¿ä»£å¤§é‡ Entityï¼Œæå‡æ€§èƒ½</span></span><br><span class="line"><span class="keyword">const</span> instances = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">  instances.<span class="title function_">push</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">      <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">BoxGeometry</span>(&#123;</span><br><span class="line">        <span class="attr">dimensions</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>),</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="attr">modelMatrix</span>: <span class="title class_">Cesium</span>.<span class="property">Matrix4</span>.<span class="title function_">multiplyByTranslation</span>(</span><br><span class="line">        <span class="title class_">Cesium</span>.<span class="property">Transforms</span>.<span class="title function_">eastNorthUpToFixedFrame</span>(</span><br><span class="line">          <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(</span><br><span class="line">            <span class="number">116.4074</span> + (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">0.1</span>,</span><br><span class="line">            <span class="number">39.9042</span> + (<span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>) * <span class="number">0.1</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Matrix4</span>(),</span><br><span class="line">      ),</span><br><span class="line">      <span class="attr">attributes</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">ColorGeometryInstanceAttribute</span>.<span class="title function_">fromColor</span>(<span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromRandom</span>()),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> primitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Primitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: instances,</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PerInstanceColorAppearance</span>(&#123;</span><br><span class="line">    <span class="attr">translucent</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">closed</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="title function_">add</span>(primitive)</span><br></pre></td></tr></table></figure>

<h4 id="4-èšç±»ä¼˜åŒ–-Clustering"><a href="#4-èšç±»ä¼˜åŒ–-Clustering" class="headerlink" title="4. èšç±»ä¼˜åŒ– (Clustering)"></a>4. èšç±»ä¼˜åŒ– (Clustering)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯ç”¨èšç±»åŠŸèƒ½ï¼Œå‡å°‘æ¸²æŸ“è´Ÿæ‹…</span></span><br><span class="line"><span class="keyword">const</span> dataSource = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CustomDataSource</span>(<span class="string">&#x27;ä¼˜åŒ–æ•°æ®æº&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> clustering = dataSource.<span class="property">clustering</span></span><br><span class="line"></span><br><span class="line">clustering.<span class="property">enabled</span> = <span class="literal">true</span></span><br><span class="line">clustering.<span class="property">pixelRange</span> = <span class="number">15</span></span><br><span class="line">clustering.<span class="property">minimumClusterSize</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰èšç±»æ ·å¼</span></span><br><span class="line">clustering.<span class="property">clusterEvent</span>.<span class="title function_">addEventListener</span>(<span class="function">(<span class="params">clusteredEntities, cluster</span>) =&gt;</span> &#123;</span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">show</span> = <span class="literal">true</span></span><br><span class="line">  cluster.<span class="property">label</span>.<span class="property">text</span> = clusteredEntities.<span class="property">length</span>.<span class="title function_">toString</span>()</span><br><span class="line">  cluster.<span class="property">billboard</span>.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  cluster.<span class="property">point</span> = &#123;</span><br><span class="line">    <span class="attr">pixelSize</span>: <span class="title class_">Math</span>.<span class="title function_">min</span>(clusteredEntities.<span class="property">length</span> * <span class="number">2</span> + <span class="number">10</span>, <span class="number">50</span>),</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span>,</span><br><span class="line">    <span class="attr">outlineColor</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">BLACK</span>,</span><br><span class="line">    <span class="attr">outlineWidth</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="5-æè´¨ä¼˜åŒ–-Material-Optimization"><a href="#5-æè´¨ä¼˜åŒ–-Material-Optimization" class="headerlink" title="5. æè´¨ä¼˜åŒ– (Material Optimization)"></a>5. æè´¨ä¼˜åŒ– (Material Optimization)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨é¢œè‰²è€Œéçº¹ç†ï¼Œå‡å°‘å†…å­˜å ç”¨</span></span><br><span class="line"><span class="keyword">const</span> colorMaterial = <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">RED</span></span><br><span class="line"><span class="keyword">const</span> imageMaterial = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ImageMaterialProperty</span>(&#123;</span><br><span class="line">  <span class="attr">image</span>: <span class="string">&#x27;texture.jpg&#x27;</span>, <span class="comment">// é¿å…å¤§çº¹ç†</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="6-æ¨¡å‹ä¼˜åŒ–-Model-Optimization"><a href="#6-æ¨¡å‹ä¼˜åŒ–-Model-Optimization" class="headerlink" title="6. æ¨¡å‹ä¼˜åŒ– (Model Optimization)"></a>6. æ¨¡å‹ä¼˜åŒ– (Model Optimization)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–3Dæ¨¡å‹åŠ è½½å’Œæ¸²æŸ“</span></span><br><span class="line"><span class="keyword">const</span> optimizedModel = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(<span class="number">116.4074</span>, <span class="number">39.9042</span>),</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">uri</span>: <span class="string">&#x27;./models/optimized.glb&#x27;</span>, <span class="comment">// ä½¿ç”¨ glb æ ¼å¼</span></span><br><span class="line">    <span class="attr">scale</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="attr">minimumPixelSize</span>: <span class="number">128</span>, <span class="comment">// è®¾ç½®æœ€å°åƒç´ å¤§å°</span></span><br><span class="line">    <span class="attr">maximumScale</span>: <span class="number">20000</span>, <span class="comment">// é™åˆ¶æœ€å¤§ç¼©æ”¾</span></span><br><span class="line">    <span class="attr">incrementallyLoadTextures</span>: <span class="literal">true</span>, <span class="comment">// æ¸è¿›å¼çº¹ç†åŠ è½½</span></span><br><span class="line">    <span class="attr">runAnimations</span>: <span class="literal">false</span>, <span class="comment">// ç¦ç”¨ä¸å¿…è¦çš„åŠ¨ç”»</span></span><br><span class="line">    <span class="attr">clampAnimations</span>: <span class="literal">true</span>, <span class="comment">// é™åˆ¶åŠ¨ç”»</span></span><br><span class="line">    <span class="attr">shadows</span>: <span class="title class_">Cesium</span>.<span class="property">ShadowMode</span>.<span class="property">DISABLED</span>, <span class="comment">// ç¦ç”¨é˜´å½±</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ’¾-å†…å­˜ç®¡ç†"><a href="#ğŸ’¾-å†…å­˜ç®¡ç†" class="headerlink" title="ğŸ’¾ å†…å­˜ç®¡ç†"></a>ğŸ’¾ å†…å­˜ç®¡ç†</h3><h4 id="1-èµ„æºæ¸…ç†æœºåˆ¶"><a href="#1-èµ„æºæ¸…ç†æœºåˆ¶" class="headerlink" title="1. èµ„æºæ¸…ç†æœºåˆ¶"></a>1. èµ„æºæ¸…ç†æœºåˆ¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„èµ„æº</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cleanupResources</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// æ¸…ç†å®ä½“</span></span><br><span class="line">  <span class="keyword">const</span> entities = viewer.<span class="property">entities</span>.<span class="property">values</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = entities.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> entity = entities[i]</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">isEntityVisible</span>(entity)) &#123;</span><br><span class="line">      viewer.<span class="property">entities</span>.<span class="title function_">remove</span>(entity)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†å›¾å…ƒ</span></span><br><span class="line">  <span class="keyword">const</span> primitives = viewer.<span class="property">scene</span>.<span class="property">primitives</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = primitives.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> primitive = primitives.<span class="title function_">get</span>(i)</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_">isPrimitiveVisible</span>(primitive)) &#123;</span><br><span class="line">      primitives.<span class="title function_">remove</span>(primitive)</span><br><span class="line">      <span class="keyword">if</span> (!primitive.<span class="title function_">isDestroyed</span>()) &#123;</span><br><span class="line">        primitive.<span class="title function_">destroy</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼ºåˆ¶åƒåœ¾å›æ”¶</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">gc</span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">gc</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥å®ä½“å¯è§æ€§</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isEntityVisible</span>(<span class="params">entity</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> position = entity.<span class="property">position</span></span><br><span class="line">  <span class="keyword">if</span> (!position) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cartesian = position.<span class="title function_">getValue</span>(viewer.<span class="property">clock</span>.<span class="property">currentTime</span>)</span><br><span class="line">  <span class="keyword">if</span> (!cartesian) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> distance = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">distance</span>(cartesian, viewer.<span class="property">camera</span>.<span class="property">position</span>)</span><br><span class="line">  <span class="keyword">return</span> distance &lt; <span class="number">10000000</span> <span class="comment">// 10,000 km</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥å›¾å…ƒå¯è§æ€§</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isPrimitiveVisible</span>(<span class="params">primitive</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> primitive.<span class="property">show</span> &amp;&amp; !primitive.<span class="title function_">isDestroyed</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæœŸæ¸…ç†ï¼ˆæ¯30ç§’æ‰§è¡Œä¸€æ¬¡ï¼‰</span></span><br><span class="line"><span class="built_in">setInterval</span>(cleanupResources, <span class="number">30000</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2-å†…å­˜ç›‘æ§"><a href="#2-å†…å­˜ç›‘æ§" class="headerlink" title="2. å†…å­˜ç›‘æ§"></a>2. å†…å­˜ç›‘æ§</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†…å­˜ä½¿ç”¨ç›‘æ§</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">monitorMemoryUsage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (performance.<span class="property">memory</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> memoryInfo = &#123;</span><br><span class="line">      <span class="attr">usedJSHeapSize</span>: performance.<span class="property">memory</span>.<span class="property">usedJSHeapSize</span> / <span class="number">1024</span> / <span class="number">1024</span>, <span class="comment">// MB</span></span><br><span class="line">      <span class="attr">totalJSHeapSize</span>: performance.<span class="property">memory</span>.<span class="property">totalJSHeapSize</span> / <span class="number">1024</span> / <span class="number">1024</span>, <span class="comment">// MB</span></span><br><span class="line">      <span class="attr">jsHeapSizeLimit</span>: performance.<span class="property">memory</span>.<span class="property">jsHeapSizeLimit</span> / <span class="number">1024</span> / <span class="number">1024</span>, <span class="comment">// MB</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å†…å­˜ä½¿ç”¨æƒ…å†µ:&#x27;</span>, memoryInfo)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†…å­˜ä½¿ç”¨è¶…è¿‡80%æ—¶å‘å‡ºè­¦å‘Š</span></span><br><span class="line">    <span class="keyword">if</span> (memoryInfo.<span class="property">usedJSHeapSize</span> / memoryInfo.<span class="property">jsHeapSizeLimit</span> &gt; <span class="number">0.8</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;âš ï¸ å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œå»ºè®®æ¸…ç†èµ„æº&#x27;</span>)</span><br><span class="line">      <span class="title function_">cleanupResources</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæœŸç›‘æ§å†…å­˜</span></span><br><span class="line"><span class="built_in">setInterval</span>(monitorMemoryUsage, <span class="number">10000</span>) <span class="comment">// æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ®-äº‹ä»¶ä¼˜åŒ–"><a href="#ğŸ®-äº‹ä»¶ä¼˜åŒ–" class="headerlink" title="ğŸ® äº‹ä»¶ä¼˜åŒ–"></a>ğŸ® äº‹ä»¶ä¼˜åŒ–</h3><h4 id="1-äº‹ä»¶èŠ‚æµ-Event-Throttling"><a href="#1-äº‹ä»¶èŠ‚æµ-Event-Throttling" class="headerlink" title="1. äº‹ä»¶èŠ‚æµ (Event Throttling)"></a>1. äº‹ä»¶èŠ‚æµ (Event Throttling)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šç”¨èŠ‚æµå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, limit</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> inThrottle</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> args = <span class="variable language_">arguments</span></span><br><span class="line">    <span class="keyword">const</span> context = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">if</span> (!inThrottle) &#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(context, args)</span><br><span class="line">      inThrottle = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> (inThrottle = <span class="literal">false</span>), limit)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŠ‚æµé¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line"><span class="keyword">const</span> throttledMouseMove = <span class="title function_">throttle</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(event.<span class="property">endPosition</span>)</span><br><span class="line">  <span class="title function_">updateTooltip</span>(pickedObject)</span><br><span class="line">&#125;, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">viewer.<span class="property">cesiumWidget</span>.<span class="property">screenSpaceEventHandler</span>.<span class="title function_">setInputAction</span>(</span><br><span class="line">  throttledMouseMove,</span><br><span class="line">  <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="2-äº‹ä»¶å§”æ‰˜-Event-Delegation"><a href="#2-äº‹ä»¶å§”æ‰˜-Event-Delegation" class="headerlink" title="2. äº‹ä»¶å§”æ‰˜ (Event Delegation)"></a>2. äº‹ä»¶å§”æ‰˜ (Event Delegation)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setupEventDelegation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  viewer.<span class="property">cesiumWidget</span>.<span class="property">screenSpaceEventHandler</span>.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(event.<span class="property">position</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pickedObject &amp;&amp; pickedObject.<span class="property">id</span>) &#123;</span><br><span class="line">      <span class="comment">// ç»Ÿä¸€å¤„ç†æ‰€æœ‰å®ä½“ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">      <span class="title function_">handleEntityClick</span>(pickedObject.<span class="property">id</span>, event)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_CLICK</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleEntityClick</span>(<span class="params">entity, event</span>) &#123;</span><br><span class="line">  <span class="comment">// æ ¹æ®å®ä½“ç±»å‹æ‰§è¡Œä¸åŒæ“ä½œ</span></span><br><span class="line">  <span class="keyword">switch</span> (entity.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;point&#x27;</span>:</span><br><span class="line">      <span class="title function_">showPointInfo</span>(entity)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;polygon&#x27;</span>:</span><br><span class="line">      <span class="title function_">showPolygonInfo</span>(entity)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;line&#x27;</span>:</span><br><span class="line">      <span class="title function_">showLineInfo</span>(entity)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æœªçŸ¥å®ä½“ç±»å‹:&#x27;</span>, entity.<span class="property">type</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ¯-æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–"><a href="#ğŸ¯-æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ğŸ¯ æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–"></a>ğŸ¯ æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–</h3><h4 id="ğŸ“Š-é—®é¢˜åˆ†æ"><a href="#ğŸ“Š-é—®é¢˜åˆ†æ" class="headerlink" title="ğŸ“Š é—®é¢˜åˆ†æ"></a>ğŸ“Š é—®é¢˜åˆ†æ</h4><p>åœ¨ç‚¹ä½æ•°é‡è¿‡å¤šæ—¶ï¼Œ<code>setupHoverEvents</code> å‡½æ•°ä¼šå¯¼è‡´åœ°å›¾ç§»åŠ¨å¡é¡¿ï¼Œä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>é¢‘ç¹çš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†</strong>ï¼šæ¯æ¬¡é¼ æ ‡ç§»åŠ¨éƒ½ä¼šè§¦å‘ <code>viewer.scene.pick()</code> æ“ä½œ</li>
<li><strong>å¤æ‚çš„ç‚¹ä½æŸ¥æ‰¾é€»è¾‘</strong>ï¼šåœ¨ <code>handlePointHover</code> ä¸­æœ‰å¤æ‚çš„å­—ç¬¦ä¸²è§£æå’Œæ•°ç»„æŸ¥æ‰¾</li>
<li><strong>ç¼ºä¹èŠ‚æµæœºåˆ¶</strong>ï¼šæ²¡æœ‰å¯¹é¼ æ ‡ç§»åŠ¨äº‹ä»¶è¿›è¡ŒèŠ‚æµå¤„ç†</li>
<li><strong>å¤§é‡å®ä½“çš„æ‹¾å–å¼€é”€</strong>ï¼šå½“ç‚¹ä½æ•°é‡å¤šæ—¶ï¼Œæ‹¾å–æ“ä½œçš„å¼€é”€ä¼šæ˜¾è‘—å¢åŠ </li>
</ol>
<h4 id="ğŸš€-ä¼˜åŒ–æ–¹æ¡ˆå®ç°"><a href="#ğŸš€-ä¼˜åŒ–æ–¹æ¡ˆå®ç°" class="headerlink" title="ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆå®ç°"></a>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆå®ç°</h4><h5 id="1-èŠ‚æµæœºåˆ¶-Throttling"><a href="#1-èŠ‚æµæœºåˆ¶-Throttling" class="headerlink" title="1. èŠ‚æµæœºåˆ¶ (Throttling)"></a>1. èŠ‚æµæœºåˆ¶ (Throttling)</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€è°ƒæ•´èŠ‚æµå‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getThrottleInterval</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pointCount = pointsData.<span class="property">value</span>.<span class="property">length</span></span><br><span class="line">  <span class="keyword">if</span> (pointCount &gt; <span class="variable constant_">HIGH_PERFORMANCE_THRESHOLD</span>) &#123;</span><br><span class="line">    isHighPerformanceMode = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">25</span> <span class="comment">// ç‚¹ä½å¤šæ—¶ï¼Œé™ä½å¤„ç†é¢‘ç‡åˆ°40fps</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isHighPerformanceMode = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">16</span> <span class="comment">// ç‚¹ä½å°‘æ—¶ï¼Œä¿æŒ60fps</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®é¼ æ ‡æ‚¬åœäº‹ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setupHoverEvents</span> = (<span class="params">Cesium</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (hoverHandler) &#123;</span><br><span class="line">    hoverHandler.<span class="title function_">destroy</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  hoverHandler = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceEventHandler</span>(viewer.<span class="property">scene</span>.<span class="property">canvas</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ èŠ‚æµæœºåˆ¶</span></span><br><span class="line">  <span class="keyword">let</span> lastHoverTime = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> lastPickedObject = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span><br><span class="line">  hoverHandler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentTime = performance.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">const</span> hoverThrottle = <span class="title function_">getThrottleInterval</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èŠ‚æµå¤„ç†ï¼šé™åˆ¶å¤„ç†é¢‘ç‡</span></span><br><span class="line">    <span class="keyword">if</span> (currentTime - lastHoverTime &lt; hoverThrottle) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    lastHoverTime = currentTime</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é«˜æ€§èƒ½æ¨¡å¼ä¸‹çš„ä¼˜åŒ–</span></span><br><span class="line">    <span class="keyword">if</span> (isHighPerformanceMode) &#123;</span><br><span class="line">      <span class="comment">// åœ¨é«˜æ€§èƒ½æ¨¡å¼ä¸‹ï¼Œé€‚åº¦å‡å°‘å¤„ç†é¢‘ç‡</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.05</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ requestAnimationFrame æ¥ä¼˜åŒ–æ€§èƒ½</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(event.<span class="property">endPosition</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¿å…é‡å¤å¤„ç†ç›¸åŒçš„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (pickedObject === lastPickedObject) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        lastPickedObject = pickedObject</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isValidPointObject</span>(pickedObject)) &#123;</span><br><span class="line">          <span class="title function_">handlePointHover</span>(pickedObject)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">handlePointLeave</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// é™çº§å¤„ç†</span></span><br><span class="line">      <span class="keyword">const</span> pickedObject = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(event.<span class="property">endPosition</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (pickedObject === lastPickedObject) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      lastPickedObject = pickedObject</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isValidPointObject</span>(pickedObject)) &#123;</span><br><span class="line">        <span class="title function_">handlePointHover</span>(pickedObject)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">handlePointLeave</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-ç¼“å­˜æœºåˆ¶-Caching"><a href="#2-ç¼“å­˜æœºåˆ¶-Caching" class="headerlink" title="2. ç¼“å­˜æœºåˆ¶ (Caching)"></a>2. ç¼“å­˜æœºåˆ¶ (Caching)</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ç¼“å­˜æœºåˆ¶</span></span><br><span class="line"><span class="keyword">const</span> pointCache = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handlePointHover</span> = (<span class="params">pickedObject</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å–æ¶ˆä¹‹å‰çš„éšè—å®šæ—¶å™¨</span></span><br><span class="line">  <span class="title function_">clearHideTooltipTimer</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> entityId = pickedObject.<span class="property">id</span>.<span class="property">id</span>.<span class="title function_">toString</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ£€æŸ¥ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">let</span> cached = pointCache.<span class="title function_">get</span>(entityId)</span><br><span class="line">  <span class="keyword">if</span> (cached) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; point, isParentPoint &#125; = cached</span><br><span class="line">    <span class="keyword">if</span> (point) &#123;</span><br><span class="line">      hoveredPoint.<span class="property">value</span> = point</span><br><span class="line">      <span class="comment">// æ ¹æ®åˆ¤æ–­ç»“æœè®¾ç½®å½“å‰å±‚çº§ï¼ˆå¦‚æœéœ€è¦ï¼‰</span></span><br><span class="line">      <span class="keyword">if</span> (isParentPoint &amp;&amp; currentLevel.<span class="property">value</span> !== <span class="string">&#x27;parent&#x27;</span>) &#123;</span><br><span class="line">        currentLevel.<span class="property">value</span> = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isParentPoint &amp;&amp; currentLevel.<span class="property">value</span> !== <span class="string">&#x27;child&#x27;</span>) &#123;</span><br><span class="line">        currentLevel.<span class="property">value</span> = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">updateTooltipPosition</span>(pickedObject)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> point = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> isParentPoint = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ™ºèƒ½åŒºåˆ†çˆ¶ç‚¹ä½å’Œå­ç‚¹ä½</span></span><br><span class="line">  <span class="keyword">if</span> (entityId.<span class="title function_">startsWith</span>(<span class="string">&#x27;point_&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> pointId = <span class="built_in">parseInt</span>(entityId.<span class="title function_">replace</span>(<span class="string">&#x27;point_&#x27;</span>, <span class="string">&#x27;&#x27;</span>))</span><br><span class="line">    point = pointsData.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> p.<span class="property">id</span> === pointId) || <span class="literal">null</span></span><br><span class="line">    isParentPoint = <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (entityId.<span class="title function_">startsWith</span>(<span class="string">&#x27;child_&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> childId = <span class="built_in">parseInt</span>(entityId.<span class="title function_">replace</span>(<span class="string">&#x27;child_&#x27;</span>, <span class="string">&#x27;&#x27;</span>))</span><br><span class="line">    <span class="keyword">const</span> parentId = <span class="title class_">Math</span>.<span class="title function_">floor</span>(childId / <span class="number">100</span>)</span><br><span class="line">    <span class="keyword">const</span> parentPoint = pointsData.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> p.<span class="property">id</span> === parentId)</span><br><span class="line">    <span class="keyword">if</span> (parentPoint?.<span class="property">children</span>) &#123;</span><br><span class="line">      point = parentPoint.<span class="property">children</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="property">id</span> === childId) || <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    isParentPoint = <span class="literal">false</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> pointId = <span class="built_in">parseInt</span>(entityId)</span><br><span class="line">    point = <span class="title function_">findPointById</span>(pointId)</span><br><span class="line">    <span class="keyword">if</span> (point) &#123;</span><br><span class="line">      isParentPoint = <span class="title function_">getPointTypeById</span>(pointId) === <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼“å­˜ç»“æœ</span></span><br><span class="line">  pointCache.<span class="title function_">set</span>(entityId, &#123; point, isParentPoint &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (point) &#123;</span><br><span class="line">    hoveredPoint.<span class="property">value</span> = point</span><br><span class="line">    <span class="keyword">if</span> (isParentPoint &amp;&amp; currentLevel.<span class="property">value</span> !== <span class="string">&#x27;parent&#x27;</span>) &#123;</span><br><span class="line">      currentLevel.<span class="property">value</span> = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isParentPoint &amp;&amp; currentLevel.<span class="property">value</span> !== <span class="string">&#x27;child&#x27;</span>) &#123;</span><br><span class="line">      currentLevel.<span class="property">value</span> = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">updateTooltipPosition</span>(pickedObject)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-æ€§èƒ½ç›‘æ§ç³»ç»Ÿ"><a href="#3-æ€§èƒ½ç›‘æ§ç³»ç»Ÿ" class="headerlink" title="3. æ€§èƒ½ç›‘æ§ç³»ç»Ÿ"></a>3. æ€§èƒ½ç›‘æ§ç³»ç»Ÿ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€§èƒ½ç›‘æ§ç›¸å…³</span></span><br><span class="line"><span class="keyword">let</span> performanceMonitor = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> isHighPerformanceMode = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">HIGH_PERFORMANCE_THRESHOLD</span> = <span class="number">200</span> <span class="comment">// ç‚¹ä½æ•°é‡é˜ˆå€¼</span></span><br><span class="line"><span class="keyword">const</span> performanceStats = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">fps</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">memoryUsage</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">pointCount</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">isHighPerformanceMode</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€§èƒ½ç›‘æ§å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">monitorPerformance</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pointCount = pointsData.<span class="property">value</span>.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> status = performanceMonitor?.<span class="title function_">getStatus</span>() || &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> currentFPS = status.<span class="property">fps</span> || <span class="number">0</span></span><br><span class="line">  <span class="keyword">const</span> memoryUsage = status.<span class="property">memoryUsage</span> || <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°æ€§èƒ½ç»Ÿè®¡</span></span><br><span class="line">  performanceStats.<span class="property">value</span> = &#123;</span><br><span class="line">    <span class="attr">fps</span>: currentFPS,</span><br><span class="line">    memoryUsage,</span><br><span class="line">    pointCount,</span><br><span class="line">    isHighPerformanceMode,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®æ€§èƒ½æŒ‡æ ‡åŠ¨æ€è°ƒæ•´</span></span><br><span class="line">  <span class="keyword">if</span> (pointCount &gt; <span class="variable constant_">HIGH_PERFORMANCE_THRESHOLD</span> &amp;&amp; currentFPS &lt; <span class="number">30</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`âš ï¸ æ€§èƒ½è­¦å‘Š: ç‚¹ä½æ•°é‡(<span class="subst">$&#123;pointCount&#125;</span>)è¿‡å¤šï¼ŒFPS(<span class="subst">$&#123;currentFPS&#125;</span>)è¿‡ä½`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–æ€§èƒ½ç›‘æ§</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">initPerformanceMonitor</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; createPerformanceMonitor &#125; = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;./modules/performanceMonitor.js&#x27;</span>)</span><br><span class="line">    performanceMonitor = <span class="title function_">createPerformanceMonitor</span>()</span><br><span class="line">    performanceMonitor.<span class="title function_">start</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;âœ… æ€§èƒ½ç›‘æ§å·²å¯åŠ¨&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;âš ï¸ æ€§èƒ½ç›‘æ§æ¨¡å—åŠ è½½å¤±è´¥:&#x27;</span>, error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-åŠ¨æ€è°ƒæ•´ç­–ç•¥"><a href="#4-åŠ¨æ€è°ƒæ•´ç­–ç•¥" class="headerlink" title="4. åŠ¨æ€è°ƒæ•´ç­–ç•¥"></a>4. åŠ¨æ€è°ƒæ•´ç­–ç•¥</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€è°ƒæ•´èŠ‚æµå‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getThrottleInterval</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pointCount = pointsData.<span class="property">value</span>.<span class="property">length</span></span><br><span class="line">  <span class="keyword">if</span> (pointCount &gt; <span class="variable constant_">HIGH_PERFORMANCE_THRESHOLD</span>) &#123;</span><br><span class="line">    isHighPerformanceMode = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">25</span> <span class="comment">// ç‚¹ä½å¤šæ—¶ï¼Œé™ä½å¤„ç†é¢‘ç‡åˆ°40fps</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    isHighPerformanceMode = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">16</span> <span class="comment">// ç‚¹ä½å°‘æ—¶ï¼Œä¿æŒ60fps</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜æ€§èƒ½æ¨¡å¼ä¸‹çš„ä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">if</span> (isHighPerformanceMode) &#123;</span><br><span class="line">  <span class="comment">// åœ¨é«˜æ€§èƒ½æ¨¡å¼ä¸‹ï¼Œé€‚åº¦å‡å°‘å¤„ç†é¢‘ç‡</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.05</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€§èƒ½æ•°æ®å¯¹æ¯”"><a href="#æ€§èƒ½æ•°æ®å¯¹æ¯”" class="headerlink" title="æ€§èƒ½æ•°æ®å¯¹æ¯”"></a>æ€§èƒ½æ•°æ®å¯¹æ¯”</h3><h4 id="æµ‹è¯•ç¯å¢ƒ"><a href="#æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æµ‹è¯•ç¯å¢ƒ"></a>æµ‹è¯•ç¯å¢ƒ</h4><ul>
<li><strong>ç‚¹ä½æ•°é‡</strong>: 500ä¸ª</li>
<li><strong>é«˜æ€§èƒ½é˜ˆå€¼</strong>: 200ä¸ªç‚¹ä½</li>
<li><strong>èŠ‚æµé—´éš”</strong>: 25ms (40fps)</li>
<li><strong>è·³è¿‡æ¦‚ç‡</strong>: 5% (é«˜æ€§èƒ½æ¨¡å¼)</li>
</ul>
<h4 id="ä¼˜åŒ–å‰åå¯¹æ¯”"><a href="#ä¼˜åŒ–å‰åå¯¹æ¯”" class="headerlink" title="ä¼˜åŒ–å‰åå¯¹æ¯”"></a>ä¼˜åŒ–å‰åå¯¹æ¯”</h4><table>
<thead>
<tr>
<th>æŒ‡æ ‡</th>
<th>ä¼˜åŒ–å‰</th>
<th>ä¼˜åŒ–å</th>
<th>æå‡å¹…åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>å¤„ç†é¢‘ç‡</td>
<td>æ— é™åˆ¶</td>
<td>40fps</td>
<td>æ˜¾è‘—é™ä½CPUè´Ÿè½½</td>
</tr>
<tr>
<td>ç¼“å­˜å‘½ä¸­ç‡</td>
<td>0%</td>
<td>100%</td>
<td>é¿å…é‡å¤è®¡ç®—</td>
</tr>
<tr>
<td>å†…å­˜ä½¿ç”¨</td>
<td>é«˜</td>
<td>ä½</td>
<td>å‡å°‘é‡å¤åˆ†é…</td>
</tr>
<tr>
<td>å“åº”æ—¶é—´</td>
<td>ä¸ç¨³å®š</td>
<td>&lt;100ms</td>
<td>æå‡ç”¨æˆ·ä½“éªŒ</td>
</tr>
<tr>
<td>FPS</td>
<td>æ³¢åŠ¨å¤§</td>
<td>ç¨³å®š30+</td>
<td>ä¿è¯æµç•…åº¦</td>
</tr>
</tbody></table>
<h4 id="è¯¦ç»†æ€§èƒ½æ•°æ®"><a href="#è¯¦ç»†æ€§èƒ½æ•°æ®" class="headerlink" title="è¯¦ç»†æ€§èƒ½æ•°æ®"></a>è¯¦ç»†æ€§èƒ½æ•°æ®</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 500ç‚¹ä½æ€§èƒ½æµ‹è¯•ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> performanceResults = &#123;</span><br><span class="line">  <span class="comment">// ä¼˜åŒ–å‰</span></span><br><span class="line">  <span class="attr">beforeOptimization</span>: &#123;</span><br><span class="line">    <span class="attr">averageEventsPerSecond</span>: <span class="number">364283.44</span>,</span><br><span class="line">    <span class="attr">totalTime</span>: <span class="number">1.46</span>,</span><br><span class="line">    <span class="attr">processedEvents</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">memoryUsage</span>: <span class="string">&#x27;é«˜&#x27;</span>,</span><br><span class="line">    <span class="attr">fps</span>: <span class="string">&#x27;ä¸ç¨³å®š&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼˜åŒ–å</span></span><br><span class="line">  <span class="attr">afterOptimization</span>: &#123;</span><br><span class="line">    <span class="attr">averageEventsPerSecond</span>: <span class="string">&#x27;å¹³è¡¡å¤„ç†&#x27;</span>,</span><br><span class="line">    <span class="attr">totalTime</span>: <span class="string">&#x27;æ˜¾è‘—å‡å°‘&#x27;</span>,</span><br><span class="line">    <span class="attr">processedEvents</span>: <span class="string">&#x27;æ™ºèƒ½æ§åˆ¶&#x27;</span>,</span><br><span class="line">    <span class="attr">memoryUsage</span>: <span class="string">&#x27;ä½&#x27;</span>,</span><br><span class="line">    <span class="attr">fps</span>: <span class="string">&#x27;ç¨³å®š30+&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼˜åŒ–æ•ˆæœ</span></span><br><span class="line">  <span class="attr">improvements</span>: &#123;</span><br><span class="line">    <span class="attr">timeReduction</span>: <span class="string">&#x27;90%+&#x27;</span>,</span><br><span class="line">    <span class="attr">cacheHitRate</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">    <span class="attr">memoryEfficiency</span>: <span class="string">&#x27;æ˜¾è‘—æå‡&#x27;</span>,</span><br><span class="line">    <span class="attr">userExperience</span>: <span class="string">&#x27;å¤§å¹…æ”¹å–„&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®é™…åº”ç”¨æ•ˆæœ"><a href="#å®é™…åº”ç”¨æ•ˆæœ" class="headerlink" title="å®é™…åº”ç”¨æ•ˆæœ"></a>å®é™…åº”ç”¨æ•ˆæœ</h3><h4 id="ç”¨æˆ·ä½“éªŒæ”¹å–„"><a href="#ç”¨æˆ·ä½“éªŒæ”¹å–„" class="headerlink" title="ç”¨æˆ·ä½“éªŒæ”¹å–„"></a>ç”¨æˆ·ä½“éªŒæ”¹å–„</h4><ol>
<li><strong>åœ°å›¾ç§»åŠ¨æµç•…åº¦</strong>: æ˜¾è‘—å‡å°‘å¡é¡¿ç°è±¡</li>
<li><strong>æ‚¬åœå“åº”é€Ÿåº¦</strong>: ç¼“å­˜æœºåˆ¶æå‡å“åº”é€Ÿåº¦</li>
<li><strong>å®æ—¶æ€§èƒ½åé¦ˆ</strong>: æ€§èƒ½ç›‘æ§é¢æ¿æ˜¾ç¤ºå½“å‰çŠ¶æ€</li>
<li><strong>æ™ºèƒ½ä¼˜åŒ–</strong>: æ ¹æ®ç‚¹ä½æ•°é‡è‡ªåŠ¨è°ƒæ•´å¤„ç†ç­–ç•¥</li>
</ol>
<h4 id="æ€§èƒ½æå‡"><a href="#æ€§èƒ½æå‡" class="headerlink" title="æ€§èƒ½æå‡"></a>æ€§èƒ½æå‡</h4><ol>
<li><strong>å¤„ç†é¢‘ç‡ä¼˜åŒ–</strong>: ä»æ— é™åˆ¶åˆ°æœ€å¤§40fps</li>
<li><strong>ç¼“å­˜å‘½ä¸­ç‡</strong>: å‡å°‘é‡å¤è®¡ç®—ï¼Œæå‡å“åº”é€Ÿåº¦</li>
<li><strong>å†…å­˜ä½¿ç”¨</strong>: é€šè¿‡ç¼“å­˜æœºåˆ¶å‡å°‘å†…å­˜åˆ†é…</li>
<li><strong>CPUä½¿ç”¨</strong>: é€šè¿‡èŠ‚æµå’Œé‡å¤æ£€æµ‹å‡å°‘CPUè´Ÿè½½</li>
</ol>
<h3 id="é…ç½®å‚æ•°"><a href="#é…ç½®å‚æ•°" class="headerlink" title="é…ç½®å‚æ•°"></a>é…ç½®å‚æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€§èƒ½ä¼˜åŒ–é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PERFORMANCE_CONFIG</span> = &#123;</span><br><span class="line">  <span class="attr">HIGH_PERFORMANCE_THRESHOLD</span>: <span class="number">200</span>, <span class="comment">// ç‚¹ä½æ•°é‡é˜ˆå€¼</span></span><br><span class="line">  <span class="attr">THROTTLE_INTERVAL_STANDARD</span>: <span class="number">16</span>, <span class="comment">// æ ‡å‡†æ¨¡å¼èŠ‚æµé—´éš”(ms)</span></span><br><span class="line">  <span class="attr">THROTTLE_INTERVAL_HIGH</span>: <span class="number">25</span>, <span class="comment">// é«˜æ€§èƒ½æ¨¡å¼èŠ‚æµé—´éš”(ms)</span></span><br><span class="line">  <span class="attr">SKIP_PROBABILITY</span>: <span class="number">0.05</span>, <span class="comment">// é«˜æ€§èƒ½æ¨¡å¼è·³è¿‡æ¦‚ç‡</span></span><br><span class="line">  <span class="attr">CACHE_CLEANUP_INTERVAL</span>: <span class="number">30000</span>, <span class="comment">// ç¼“å­˜æ¸…ç†é—´éš”(ms)</span></span><br><span class="line">  <span class="attr">PERFORMANCE_CHECK_INTERVAL</span>: <span class="number">2000</span>, <span class="comment">// æ€§èƒ½æ£€æŸ¥é—´éš”(ms)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹ä½é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CONFIG</span> = &#123;</span><br><span class="line">  <span class="attr">POINT_COUNT</span>: <span class="number">500</span>, <span class="comment">// æµ‹è¯•ç”¨ç‚¹ä½æ•°é‡</span></span><br><span class="line">  <span class="attr">TOOLTIP_HIDE_DELAY</span>: <span class="number">200</span>, <span class="comment">// å¼¹æ¡†éšè—å»¶è¿Ÿ</span></span><br><span class="line">  <span class="attr">INITIAL_VIEW</span>: &#123;</span><br><span class="line">    <span class="attr">longitude</span>: <span class="number">116.4074</span>,</span><br><span class="line">    <span class="attr">latitude</span>: <span class="number">39.9042</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">4500</span>,</span><br><span class="line">    <span class="attr">pitch</span>: -<span class="number">30</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å»ºè®®"><a href="#ä½¿ç”¨å»ºè®®" class="headerlink" title="ä½¿ç”¨å»ºè®®"></a>ä½¿ç”¨å»ºè®®</h3><h4 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h4><ol>
<li>ä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·</li>
<li>æ ¹æ®ç‚¹ä½æ•°é‡è°ƒæ•´ <code>HIGH_PERFORMANCE_THRESHOLD</code> é˜ˆå€¼</li>
<li>ç›‘æ§æ§åˆ¶å°è¾“å‡ºçš„æ€§èƒ½è­¦å‘Šä¿¡æ¯</li>
<li>ä½¿ç”¨â€ğŸ§ª 500ç‚¹ä½æµ‹è¯•â€æŒ‰é’®è¿›è¡Œå¿«é€Ÿæµ‹è¯•</li>
</ol>
<h4 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒ"></a>ç”Ÿäº§ç¯å¢ƒ</h4><ol>
<li>æ ¹æ®å®é™…ç‚¹ä½æ•°é‡è°ƒæ•´é…ç½®å‚æ•°</li>
<li>å®šæœŸæ£€æŸ¥æ€§èƒ½ç›‘æ§æ•°æ®</li>
<li>è€ƒè™‘è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¦‚LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰ç®¡ç†</li>
<li>ç›‘æ§FPSï¼Œä½äº30æ—¶è§¦å‘æ€§èƒ½è­¦å‘Š</li>
</ol>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><h4 id="1-ç¼“å­˜ç®¡ç†"><a href="#1-ç¼“å­˜ç®¡ç†" class="headerlink" title="1. ç¼“å­˜ç®¡ç†"></a>1. ç¼“å­˜ç®¡ç†</h4><ul>
<li>ç¼“å­˜æœºåˆ¶ä¼šå ç”¨ä¸€å®šå†…å­˜</li>
<li>éœ€è¦å®šæœŸæ¸…ç†ç¼“å­˜</li>
<li>åœ¨ç‚¹ä½æ•°æ®æ›´æ–°æ—¶æ¸…ç†ç¼“å­˜</li>
</ul>
<h4 id="2-æ€§èƒ½å¹³è¡¡"><a href="#2-æ€§èƒ½å¹³è¡¡" class="headerlink" title="2. æ€§èƒ½å¹³è¡¡"></a>2. æ€§èƒ½å¹³è¡¡</h4><ul>
<li>é«˜æ€§èƒ½æ¨¡å¼ä¼šé™ä½äº¤äº’å“åº”æ€§</li>
<li>ä½†ä¿è¯åœ°å›¾æµç•…åº¦</li>
<li>æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´å‚æ•°</li>
</ul>
<h4 id="3-æ¨¡å—ä¾èµ–"><a href="#3-æ¨¡å—ä¾èµ–" class="headerlink" title="3. æ¨¡å—ä¾èµ–"></a>3. æ¨¡å—ä¾èµ–</h4><ul>
<li>æ€§èƒ½ç›‘æ§æ¨¡å—éœ€è¦é¢å¤–åŠ è½½</li>
<li>å¤±è´¥æ—¶ä¼šé™çº§å¤„ç†</li>
<li>ä¸å½±å“åŸºæœ¬åŠŸèƒ½</li>
</ul>
<h4 id="4-é˜ˆå€¼è°ƒæ•´"><a href="#4-é˜ˆå€¼è°ƒæ•´" class="headerlink" title="4. é˜ˆå€¼è°ƒæ•´"></a>4. é˜ˆå€¼è°ƒæ•´</h4><ul>
<li>å»ºè®®æ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯è°ƒæ•´é˜ˆå€¼å‚æ•°</li>
<li>500ä¸ªç‚¹ä½æ˜¯è¾ƒå¤§çš„æ•°æ®é‡</li>
<li>å¯èƒ½éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–</li>
</ul>
<h3 id="æœªæ¥ä¼˜åŒ–æ–¹å‘"><a href="#æœªæ¥ä¼˜åŒ–æ–¹å‘" class="headerlink" title="æœªæ¥ä¼˜åŒ–æ–¹å‘"></a>æœªæ¥ä¼˜åŒ–æ–¹å‘</h3><h4 id="1-LODç®¡ç†"><a href="#1-LODç®¡ç†" class="headerlink" title="1. LODç®¡ç†"></a>1. LODç®¡ç†</h4><ul>
<li>å®ç°ç»†èŠ‚å±‚æ¬¡ç®¡ç†</li>
<li>æ ¹æ®è·ç¦»æ˜¾ç¤ºä¸åŒç²¾åº¦çš„ç‚¹ä½</li>
<li>å‡å°‘æ¸²æŸ“è´Ÿæ‹…</li>
</ul>
<h4 id="2-èšç±»ä¼˜åŒ–"><a href="#2-èšç±»ä¼˜åŒ–" class="headerlink" title="2. èšç±»ä¼˜åŒ–"></a>2. èšç±»ä¼˜åŒ–</h4><ul>
<li>å¯¹å¯†é›†ç‚¹ä½è¿›è¡Œèšç±»æ˜¾ç¤º</li>
<li>å‡å°‘å¯è§ç‚¹ä½æ•°é‡</li>
<li>æå‡äº¤äº’æ€§èƒ½</li>
</ul>
<h4 id="3-Web-Workers"><a href="#3-Web-Workers" class="headerlink" title="3. Web Workers"></a>3. Web Workers</h4><ul>
<li>ä½¿ç”¨Web Workersè¿›è¡Œåå°è®¡ç®—</li>
<li>é¿å…é˜»å¡ä¸»çº¿ç¨‹</li>
<li>æå‡æ•´ä½“æ€§èƒ½</li>
</ul>
<h4 id="4-è™šæ‹ŸåŒ–"><a href="#4-è™šæ‹ŸåŒ–" class="headerlink" title="4. è™šæ‹ŸåŒ–"></a>4. è™šæ‹ŸåŒ–</h4><ul>
<li>å®ç°ç‚¹ä½è™šæ‹ŸåŒ–</li>
<li>åªæ¸²æŸ“å¯è§åŒºåŸŸå†…çš„ç‚¹ä½</li>
<li>å¤§å¹…å‡å°‘æ¸²æŸ“è´Ÿæ‹…</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é€šè¿‡ä»¥ä¸Šä¼˜åŒ–æ–¹æ¡ˆï¼Œ500ä¸ªç‚¹ä½çš„æ‚¬åœäº‹ä»¶å¤„ç†å¾—åˆ°äº†æ˜¾è‘—æ”¹å–„ï¼š</p>
<ol>
<li><strong>æ€§èƒ½æå‡</strong>: é€šè¿‡èŠ‚æµã€ç¼“å­˜ã€é‡å¤æ£€æµ‹ç­‰æœºåˆ¶æå‡æ€§èƒ½</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>: ä¿æŒæµç•…çš„åœ°å›¾äº¤äº’å’ŒåŠæ—¶çš„æ‚¬åœå“åº”</li>
<li><strong>æ™ºèƒ½ä¼˜åŒ–</strong>: æ ¹æ®ç‚¹ä½æ•°é‡è‡ªåŠ¨è°ƒæ•´å¤„ç†ç­–ç•¥</li>
<li><strong>å®æ—¶ç›‘æ§</strong>: æä¾›å®æ—¶çš„æ€§èƒ½ç›‘æ§å’Œåé¦ˆ</li>
</ol>
<p>è¿™äº›ä¼˜åŒ–ç¡®ä¿äº†åœ¨å¤§é‡ç‚¹ä½åœºæ™¯ä¸‹ä»èƒ½ä¿æŒè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p>&#x2F;&#x2F; 10. å¼‚æ­¥åŠ è½½ä¼˜åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">### ğŸ“¦ å¼‚æ­¥åŠ è½½ä¼˜åŒ–</span><br><span class="line"></span><br><span class="line">#### 1. åˆ†æ‰¹åŠ è½½ç­–ç•¥</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">// å¼‚æ­¥åŠ è½½å¤§æ•°æ®é›†</span><br><span class="line">async function loadLargeDataset(url) &#123;</span><br><span class="line">  const loadingIndicator = showLoadingIndicator()</span><br><span class="line"></span><br><span class="line">  try &#123;</span><br><span class="line">    // åˆ†æ‰¹åŠ è½½æ•°æ®</span><br><span class="line">    const batchSize = 1000</span><br><span class="line">    let offset = 0</span><br><span class="line">    let hasMore = true</span><br><span class="line"></span><br><span class="line">    while (hasMore) &#123;</span><br><span class="line">      const response = await fetch(`$&#123;url&#125;?offset=$&#123;offset&#125;&amp;limit=$&#123;batchSize&#125;`)</span><br><span class="line">      const batch = await response.json()</span><br><span class="line"></span><br><span class="line">      if (batch.length === 0) &#123;</span><br><span class="line">        hasMore = false</span><br><span class="line">        break</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // å¼‚æ­¥å¤„ç†æ‰¹æ¬¡</span><br><span class="line">      await new Promise((resolve) =&gt; &#123;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">          processBatch(batch)</span><br><span class="line">          resolve()</span><br><span class="line">        &#125;, 0)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      offset += batchSize</span><br><span class="line"></span><br><span class="line">      // æ›´æ–°è¿›åº¦</span><br><span class="line">      updateProgress(offset)</span><br><span class="line"></span><br><span class="line">      // è®©æµè§ˆå™¨æœ‰æœºä¼šæ›´æ–°UI</span><br><span class="line">      await new Promise((resolve) =&gt; requestAnimationFrame(resolve))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.error(&#x27;åŠ è½½æ•°æ®å¤±è´¥:&#x27;, error)</span><br><span class="line">  &#125; finally &#123;</span><br><span class="line">    hideLoadingIndicator(loadingIndicator)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¤„ç†æ‰¹æ¬¡æ•°æ®</span><br><span class="line">function processBatch(data) &#123;</span><br><span class="line">  const entities = []</span><br><span class="line"></span><br><span class="line">  data.forEach((item) =&gt; &#123;</span><br><span class="line">    entities.push(&#123;</span><br><span class="line">      position: Cesium.Cartesian3.fromDegrees(item.lon, item.lat, item.alt),</span><br><span class="line">      point: &#123;</span><br><span class="line">        pixelSize: 5,</span><br><span class="line">        color: Cesium.Color.fromCssColorString(item.color),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  viewer.entities.add(entities)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-WebWorker-ä¼˜åŒ–"><a href="#2-WebWorker-ä¼˜åŒ–" class="headerlink" title="2. WebWorker ä¼˜åŒ–"></a>2. WebWorker ä¼˜åŒ–</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»çº¿ç¨‹ - ä½¿ç”¨WebWorkerå¤„ç†å¤§æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&#x27;./workers/dataProcessor.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line">worker.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;PROCESS_LARGE_DATASET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: largeDataArray,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">worker.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, result &#125; = event.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;PROCESSING_COMPLETE&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// åœ¨ä¸»çº¿ç¨‹ä¸­æ·»åŠ å¤„ç†ç»“æœ</span></span><br><span class="line">    result.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      viewer.<span class="property">entities</span>.<span class="title function_">add</span>(item)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// dataProcessor.js (WebWorker)</span></span><br><span class="line">self.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = event.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;PROCESS_LARGE_DATASET&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨Workerä¸­è¿›è¡Œé‡è®¡ç®—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> item = data[i]</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¤æ‚çš„æ•°æ®å¤„ç†</span></span><br><span class="line">      <span class="keyword">const</span> processed = <span class="title function_">complexCalculation</span>(item)</span><br><span class="line">      result.<span class="title function_">push</span>(processed)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å®šæœŸå‘é€è¿›åº¦æ›´æ–°</span></span><br><span class="line">      <span class="keyword">if</span> (i % <span class="number">1000</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        self.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;PROGRESS_UPDATE&#x27;</span>,</span><br><span class="line">          <span class="attr">progress</span>: i / data.<span class="property">length</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    self.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;PROCESSING_COMPLETE&#x27;</span>,</span><br><span class="line">      <span class="attr">result</span>: result,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">complexCalculation</span>(<span class="params">item</span>) &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå¤æ‚è®¡ç®—</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">position</span>: [item.<span class="property">x</span> * <span class="number">1.5</span>, item.<span class="property">y</span> * <span class="number">1.5</span>, item.<span class="property">z</span> * <span class="number">1.5</span>],</span><br><span class="line">    <span class="attr">color</span>: <span class="title function_">generateColor</span>(item.<span class="property">value</span>),</span><br><span class="line">    <span class="attr">properties</span>: <span class="title function_">processProperties</span>(item.<span class="property">attributes</span>),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-è§†å£ä¼˜åŒ–"><a href="#3-è§†å£ä¼˜åŒ–" class="headerlink" title="3. è§†å£ä¼˜åŒ–"></a>3. è§†å£ä¼˜åŒ–</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–è§†å£å’Œåˆ†è¾¨ç‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">optimizeForViewport</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> canvas = viewer.<span class="property">canvas</span></span><br><span class="line">  <span class="keyword">const</span> rect = canvas.<span class="title function_">getBoundingClientRect</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒæ•´ç”»å¸ƒåˆ†è¾¨ç‡</span></span><br><span class="line">  <span class="keyword">const</span> devicePixelRatio = <span class="variable language_">window</span>.<span class="property">devicePixelRatio</span> || <span class="number">1</span></span><br><span class="line">  <span class="keyword">const</span> displayWidth = rect.<span class="property">width</span></span><br><span class="line">  <span class="keyword">const</span> displayHeight = rect.<span class="property">height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é™åˆ¶æœ€å¤§åˆ†è¾¨ç‡ä»¥æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="keyword">const</span> maxPixelRatio = <span class="number">2</span></span><br><span class="line"><span class="keyword">const</span> actualPixelRatio = <span class="title class_">Math</span>.<span class="title function_">min</span>(devicePixelRatio, maxPixelRatio)</span><br><span class="line"></span><br><span class="line">canvas.<span class="property">width</span> = displayWidth _actualPixelRatio</span><br><span class="line">canvas.<span class="property">height</span> = displayHeight_ actualPixelRatio</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°WebGLè§†å£</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">context</span>.\_gl.<span class="title function_">viewport</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”çª—å£å¤§å°å˜åŒ–</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="title function_">throttle</span>(optimizeForViewport, <span class="number">250</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 13. ç¼“å­˜ç­–ç•¥</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResourceCache</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">maxSize = <span class="number">100</span></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">maxSize</span> = maxSize</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line"><span class="comment">// LRU: ç§»åˆ°æœ«å°¾</span></span><br><span class="line"><span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(key)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value)</span><br><span class="line"><span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">set</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="property">size</span> &gt;= <span class="variable language_">this</span>.<span class="property">maxSize</span>) &#123;</span><br><span class="line"><span class="comment">// åˆ é™¤æœ€å°‘ä½¿ç”¨çš„é¡¹ç›®</span></span><br><span class="line"><span class="keyword">const</span> firstKey = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">keys</span>().<span class="title function_">next</span>().<span class="property">value</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(firstKey)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">clear</span>()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resourceCache = <span class="keyword">new</span> <span class="title class_">ResourceCache</span>(<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼“å­˜çº¹ç†åŠ è½½</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadTextureWithCache</span>(<span class="params">url</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> cached = resourceCache.<span class="title function_">get</span>(url)</span><br><span class="line"><span class="keyword">if</span> (cached) &#123;</span><br><span class="line"><span class="keyword">return</span> cached</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> texture = <span class="keyword">await</span> <span class="title function_">loadTexture</span>(url)</span><br><span class="line">resourceCache.<span class="title function_">set</span>(url, texture)</span><br><span class="line"><span class="keyword">return</span> texture</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 14. æ€§èƒ½ç›‘æ§</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PerformanceMonitor</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">metrics</span> = &#123;</span><br><span class="line"><span class="attr">fps</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">frameTime</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">memoryUsage</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">primitiveCount</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">entityCount</span>: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastTime</span> = performance.<span class="title function_">now</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">frameCount</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fpsUpdateInterval</span> = <span class="number">1000</span> <span class="comment">// 1ç§’æ›´æ–°ä¸€æ¬¡FPS</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> currentTime = performance.<span class="title function_">now</span>()</span><br><span class="line"><span class="keyword">const</span> deltaTime = currentTime - <span class="variable language_">this</span>.<span class="property">lastTime</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">frameCount</span>++</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (deltaTime &gt;= <span class="variable language_">this</span>.<span class="property">fpsUpdateInterval</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">fps</span> = <span class="title class_">Math</span>.<span class="title function_">round</span>((<span class="variable language_">this</span>.<span class="property">frameCount</span> * <span class="number">1000</span>) / deltaTime)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">frameTime</span> = deltaTime / <span class="variable language_">this</span>.<span class="property">frameCount</span></span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">frameCount</span> = <span class="number">0</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lastTime</span> = currentTime</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ›´æ–°å…¶ä»–æŒ‡æ ‡</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">updateMemoryUsage</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">updateCounts</span>()</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è§¦å‘æ€§èƒ½è­¦å‘Š</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">checkPerformance</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">updateMemoryUsage</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (performance.<span class="property">memory</span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">memoryUsage</span> = performance.<span class="property">memory</span>.<span class="property">usedJSHeapSize</span> / <span class="number">1024</span> / <span class="number">1024</span> <span class="comment">// MB</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">updateCounts</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">primitiveCount</span> = viewer.<span class="property">scene</span>.<span class="property">primitives</span>.<span class="property">length</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">entityCount</span> = viewer.<span class="property">entities</span>.<span class="property">values</span>.<span class="property">length</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">checkPerformance</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">fps</span> &lt; <span class="number">30</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;æ€§èƒ½è­¦å‘Š: FPSè¿‡ä½&#x27;</span>, <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">fps</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">suggestOptimizations</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">memoryUsage</span> &gt; <span class="number">500</span>) &#123;</span><br><span class="line">      <span class="comment">// 500MB</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;å†…å­˜è­¦å‘Š: å†…å­˜ä½¿ç”¨è¿‡é«˜&#x27;</span>, <span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">memoryUsage</span>, <span class="string">&#x27;MB&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">suggestMemoryOptimizations</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">suggestOptimizations</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> suggestions = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">entityCount</span> &gt; <span class="number">10000</span>) &#123;</span><br><span class="line">      suggestions.<span class="title function_">push</span>(<span class="string">&#x27;å®ä½“æ•°é‡è¿‡å¤šï¼Œè€ƒè™‘ä½¿ç”¨Primitiveæˆ–èšç±»&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">metrics</span>.<span class="property">primitiveCount</span> &gt; <span class="number">100</span>) &#123;</span><br><span class="line">      suggestions.<span class="title function_">push</span>(<span class="string">&#x27;å›¾å…ƒæ•°é‡è¿‡å¤šï¼Œè€ƒè™‘åˆå¹¶å‡ ä½•ä½“&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!viewer.<span class="property">scene</span>.<span class="property">requestRenderMode</span>) &#123;</span><br><span class="line">      suggestions.<span class="title function_">push</span>(<span class="string">&#x27;å¯ç”¨æŒ‰éœ€æ¸²æŸ“æ¨¡å¼&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ€§èƒ½ä¼˜åŒ–å»ºè®®:&#x27;</span>, suggestions)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">suggestMemoryOptimizations</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å†…å­˜ä¼˜åŒ–å»ºè®®:&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;- æ¸…ç†æœªä½¿ç”¨çš„å®ä½“å’Œå›¾å…ƒ&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;- å‡å°‘é«˜åˆ†è¾¨ç‡çº¹ç†çš„ä½¿ç”¨&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;- å¯ç”¨ç“¦ç‰‡ç¼“å­˜é™åˆ¶&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;- æ£€æŸ¥å†…å­˜æ³„æ¼&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getReport</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">...<span class="variable language_">this</span>.<span class="property">metrics</span>,</span><br><span class="line"><span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>(),</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> performanceMonitor = <span class="keyword">new</span> <span class="title class_">PerformanceMonitor</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ¸²æŸ“å¾ªç¯ä¸­æ›´æ–°æ€§èƒ½ç›‘æ§</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">postRender</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">performanceMonitor.<span class="title function_">update</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºæ€§èƒ½ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">displayPerformanceInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> report = performanceMonitor.<span class="title function_">getReport</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> infoDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;performance-info&#x27;</span>) || <span class="title function_">createPerformanceInfoDiv</span>()</span><br><span class="line">infoDiv.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;div&gt;FPS: <span class="subst">$&#123;report.fps&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;å¸§æ—¶é—´: <span class="subst">$&#123;report.frameTime.toFixed(<span class="number">2</span>)&#125;</span>ms&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;å†…å­˜ä½¿ç”¨: <span class="subst">$&#123;report.memoryUsage.toFixed(<span class="number">2</span>)&#125;</span>MB&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;å›¾å…ƒæ•°é‡: <span class="subst">$&#123;report.primitiveCount&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;å®ä½“æ•°é‡: <span class="subst">$&#123;report.entityCount&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerformanceInfoDiv</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.<span class="property">id</span> = <span class="string">&#x27;performance-info&#x27;</span></span><br><span class="line">div.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`position: absolute;</span></span><br><span class="line"><span class="string">    top: 10px;</span></span><br><span class="line"><span class="string">    right: 10px;</span></span><br><span class="line"><span class="string">    background: rgba(0,0,0,0.8);</span></span><br><span class="line"><span class="string">    color: white;</span></span><br><span class="line"><span class="string">    padding: 10px;</span></span><br><span class="line"><span class="string">    border-radius: 5px;</span></span><br><span class="line"><span class="string">    font-family: monospace;</span></span><br><span class="line"><span class="string">    font-size: 12px;</span></span><br><span class="line"><span class="string">    z-index: 1000;</span></span><br><span class="line"><span class="string"> `</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div)</span><br><span class="line"><span class="keyword">return</span> div</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæœŸæ›´æ–°æ˜¾ç¤º</span></span><br><span class="line"><span class="built_in">setInterval</span>(displayPerformanceInfo, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 15. æœ€ä½³å®è·µæ€»ç»“</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PERFORMANCE_BEST_PRACTICES</span> = &#123;</span><br><span class="line"><span class="comment">// æ¸²æŸ“ä¼˜åŒ–</span></span><br><span class="line"><span class="attr">rendering</span>: [<span class="string">&#x27;å¯ç”¨æŒ‰éœ€æ¸²æŸ“æ¨¡å¼&#x27;</span>, <span class="string">&#x27;ä½¿ç”¨é€‚å½“çš„LODè®¾ç½®&#x27;</span>, <span class="string">&#x27;å¯ç”¨è§†é”¥å‰”é™¤&#x27;</span>, <span class="string">&#x27;åˆç†ä½¿ç”¨åå¤„ç†æ•ˆæœ&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä½“ä¼˜åŒ–</span></span><br><span class="line"><span class="attr">entities</span>: [</span><br><span class="line"><span class="string">&#x27;å¤§é‡å‡ ä½•ä½“ä½¿ç”¨Primitive&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;å¯ç”¨å®ä½“èšç±»&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;è®¾ç½®è·ç¦»æ˜¾ç¤ºæ¡ä»¶&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ä½¿ç”¨ç®€å•æè´¨è€Œéå¤æ‚çº¹ç†&#x27;</span>,</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…å­˜ç®¡ç†</span></span><br><span class="line"><span class="attr">memory</span>: [</span><br><span class="line"><span class="string">&#x27;å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„èµ„æº&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;é™åˆ¶åŒæ—¶åŠ è½½çš„æ•°æ®é‡&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ä½¿ç”¨å¯¹è±¡æ± é‡ç”¨èµ„æº&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ&#x27;</span>,</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®åŠ è½½</span></span><br><span class="line"><span class="attr">dataLoading</span>: [</span><br><span class="line"><span class="string">&#x27;å¼‚æ­¥åˆ†æ‰¹åŠ è½½å¤§æ•°æ®é›†&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ä½¿ç”¨WebWorkerå¤„ç†å¤æ‚è®¡ç®—&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;å®ç°èµ„æºç¼“å­˜ç­–ç•¥&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;å‹ç¼©å’Œä¼˜åŒ–æ•°æ®æ ¼å¼&#x27;</span>,</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æˆ·äº¤äº’</span></span><br><span class="line"><span class="attr">interaction</span>: [<span class="string">&#x27;èŠ‚æµé«˜é¢‘äº‹ä»¶&#x27;</span>, <span class="string">&#x27;é˜²æŠ–ç”¨æˆ·è¾“å…¥&#x27;</span>, <span class="string">&#x27;å¼‚æ­¥å¤„ç†UIæ›´æ–°&#x27;</span>, <span class="string">&#x27;æä¾›åŠ è½½è¿›åº¦åé¦ˆ&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Cesiumæ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ:&#x27;</span>, <span class="variable constant_">PERFORMANCE_BEST_PRACTICES</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“š-æ€»ç»“"><a href="#ğŸ“š-æ€»ç»“" class="headerlink" title="ğŸ“š æ€»ç»“"></a>ğŸ“š æ€»ç»“</h2><p>æœ¬æŒ‡å—æ¶µç›–äº†Cesiumç¦»çº¿å¼€å‘çš„æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µå’Œè¯¦ç»†å±æ€§è¯´æ˜ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç¯å¢ƒé…ç½®</strong>: å®Œæ•´çš„ç¦»çº¿å¼€å‘ç¯å¢ƒæ­å»º</li>
<li><strong>Vieweré…ç½®</strong>: è¯¦ç»†çš„æ„é€ å‚æ•°å’Œæ¸²æŸ“é€‰é¡¹</li>
<li><strong>åæ ‡ç³»ç»Ÿ</strong>: å®Œæ•´çš„åæ ‡è½¬æ¢å’Œæ•°å­¦è¿ç®—</li>
<li><strong>å®ä½“ç³»ç»Ÿ</strong>: æ‰€æœ‰å›¾å½¢ç±»å‹çš„è¯¦ç»†å±æ€§</li>
<li><strong>å½±åƒåœ°å½¢</strong>: å„ç§æä¾›è€…çš„é…ç½®é€‰é¡¹</li>
<li><strong>ç›¸æœºæ§åˆ¶</strong>: å®Œæ•´çš„ç›¸æœºæ“ä½œæ–¹æ³•</li>
<li><strong>äº‹ä»¶å¤„ç†</strong>: å±å¹•ç©ºé—´äº‹ä»¶çš„è¯¦ç»†å¤„ç†</li>
<li><strong>æè´¨ç³»ç»Ÿ</strong>: å„ç§å†…ç½®å’Œè‡ªå®šä¹‰æè´¨</li>
<li><strong>åŠ¨ç”»ç³»ç»Ÿ</strong>: å±æ€§åŠ¨ç”»å’Œæ—¶é—´æ§åˆ¶</li>
<li><strong>å‡ ä½•å›¾å…ƒ</strong>: ä½çº§åˆ«å›¾å½¢æ¸²æŸ“</li>
<li><strong>åœºæ™¯æ§åˆ¶</strong>: åœºæ™¯å’Œåœ°çƒçš„é«˜çº§é…ç½®</li>
<li><strong>æ•°æ®æº</strong>: å„ç§æ ¼å¼æ•°æ®çš„åŠ è½½å’Œå¤„ç†</li>
<li><strong>æ—¶é—´ç³»ç»Ÿ</strong>: æ—¶é—´æ“ä½œå’ŒåŠ¨ç”»æ§åˆ¶</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</li>
</ul>
<hr>
<h3 id="ğŸ“š-æœ€ä½³å®è·µæ€»ç»“"><a href="#ğŸ“š-æœ€ä½³å®è·µæ€»ç»“" class="headerlink" title="ğŸ“š æœ€ä½³å®è·µæ€»ç»“"></a>ğŸ“š æœ€ä½³å®è·µæ€»ç»“</h3><h4 id="ğŸ¯-æ€§èƒ½ä¼˜åŒ–åŸåˆ™"><a href="#ğŸ¯-æ€§èƒ½ä¼˜åŒ–åŸåˆ™" class="headerlink" title="ğŸ¯ æ€§èƒ½ä¼˜åŒ–åŸåˆ™"></a>ğŸ¯ æ€§èƒ½ä¼˜åŒ–åŸåˆ™</h4><ol>
<li><strong>æŒ‰éœ€æ¸²æŸ“</strong>: åªåœ¨å¿…è¦æ—¶è§¦å‘æ¸²æŸ“</li>
<li><strong>LODç®¡ç†</strong>: æ ¹æ®è·ç¦»æ˜¾ç¤ºä¸åŒç²¾åº¦</li>
<li><strong>å†…å­˜ç®¡ç†</strong>: å®šæœŸæ¸…ç†æœªä½¿ç”¨èµ„æº</li>
<li><strong>äº‹ä»¶ä¼˜åŒ–</strong>: ä½¿ç”¨èŠ‚æµå’Œå§”æ‰˜</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>: é¿å…é˜»å¡ä¸»çº¿ç¨‹</li>
</ol>
<h4 id="ğŸ“Š-æ€§èƒ½ç›‘æ§æŒ‡æ ‡"><a href="#ğŸ“Š-æ€§èƒ½ç›‘æ§æŒ‡æ ‡" class="headerlink" title="ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡"></a>ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡</h4><table>
<thead>
<tr>
<th>æŒ‡æ ‡</th>
<th>ç›®æ ‡å€¼</th>
<th>ç›‘æ§æ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>FPS</td>
<td>â‰¥30</td>
<td>å®æ—¶ç›‘æ§</td>
</tr>
<tr>
<td>å†…å­˜ä½¿ç”¨</td>
<td>&lt;80%</td>
<td>å®šæœŸæ£€æŸ¥</td>
</tr>
<tr>
<td>å“åº”æ—¶é—´</td>
<td>&lt;100ms</td>
<td>ç”¨æˆ·äº¤äº’æµ‹è¯•</td>
</tr>
<tr>
<td>åŠ è½½æ—¶é—´</td>
<td>&lt;3s</td>
<td>ç½‘ç»œç›‘æ§</td>
</tr>
</tbody></table>
<h4 id="ğŸ”§-é…ç½®å»ºè®®"><a href="#ğŸ”§-é…ç½®å»ºè®®" class="headerlink" title="ğŸ”§ é…ç½®å»ºè®®"></a>ğŸ”§ é…ç½®å»ºè®®</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€§èƒ½ä¼˜åŒ–é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PERFORMANCE_CONFIG</span> = &#123;</span><br><span class="line">  <span class="comment">// æ¸²æŸ“è®¾ç½®</span></span><br><span class="line">  <span class="attr">REQUEST_RENDER_MODE</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">MAXIMUM_RENDER_TIME_CHANGE</span>: <span class="number">0.0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// LODè®¾ç½®</span></span><br><span class="line">  <span class="attr">MAXIMUM_SCREEN_SPACE_ERROR</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">TILE_CACHE_SIZE</span>: <span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†…å­˜ç®¡ç†</span></span><br><span class="line">  <span class="attr">CLEANUP_INTERVAL</span>: <span class="number">30000</span>,</span><br><span class="line">  <span class="attr">MEMORY_WARNING_THRESHOLD</span>: <span class="number">0.8</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// äº‹ä»¶ä¼˜åŒ–</span></span><br><span class="line">  <span class="attr">THROTTLE_INTERVAL</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">HOVER_THROTTLE</span>: <span class="number">25</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼‚æ­¥åŠ è½½</span></span><br><span class="line">  <span class="attr">BATCH_SIZE</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">PROGRESS_UPDATE_INTERVAL</span>: <span class="number">1000</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ğŸš€-å¼€å‘å»ºè®®"><a href="#ğŸš€-å¼€å‘å»ºè®®" class="headerlink" title="ğŸš€ å¼€å‘å»ºè®®"></a>ğŸš€ å¼€å‘å»ºè®®</h4><ol>
<li><p><strong>å¼€å‘é˜¶æ®µ</strong></p>
<ul>
<li>ä½¿ç”¨æ€§èƒ½ç›‘æ§å·¥å…·</li>
<li>å®šæœŸæ£€æŸ¥å†…å­˜ä½¿ç”¨</li>
<li>æµ‹è¯•å¤§æ•°æ®é‡åœºæ™¯</li>
</ul>
</li>
<li><p><strong>ç”Ÿäº§ç¯å¢ƒ</strong></p>
<ul>
<li>å¯ç”¨æ‰€æœ‰ä¼˜åŒ–é€‰é¡¹</li>
<li>ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡</li>
<li>å‡†å¤‡é™çº§æ–¹æ¡ˆ</li>
</ul>
</li>
<li><p><strong>ç»´æŠ¤é˜¶æ®µ</strong></p>
<ul>
<li>å®šæœŸæ¸…ç†ç¼“å­˜</li>
<li>ç›‘æ§ç”¨æˆ·åé¦ˆ</li>
<li>æŒç»­ä¼˜åŒ–æ€§èƒ½</li>
</ul>
</li>
</ol>
<h4 id="âš ï¸-æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ æ³¨æ„äº‹é¡¹"></a>âš ï¸ æ³¨æ„äº‹é¡¹</h4><ol>
<li><strong>å…¼å®¹æ€§</strong>: ç¡®ä¿ä¼˜åŒ–æ–¹æ¡ˆåœ¨ä¸åŒæµè§ˆå™¨ä¸­æ­£å¸¸å·¥ä½œ</li>
<li><strong>é™çº§å¤„ç†</strong>: æä¾›ä¼˜åŒ–å¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>: å¹³è¡¡æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ</li>
<li><strong>å†…å­˜æ³„æ¼</strong>: æ³¨æ„åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œç¼“å­˜</li>
</ol>
<h4 id="ğŸ”®-æœªæ¥å‘å±•æ–¹å‘"><a href="#ğŸ”®-æœªæ¥å‘å±•æ–¹å‘" class="headerlink" title="ğŸ”® æœªæ¥å‘å±•æ–¹å‘"></a>ğŸ”® æœªæ¥å‘å±•æ–¹å‘</h4><ol>
<li><strong>WebGPU</strong>: åˆ©ç”¨æ–°ä¸€ä»£å›¾å½¢API</li>
<li><strong>è™šæ‹ŸåŒ–</strong>: åªæ¸²æŸ“å¯è§åŒºåŸŸ</li>
<li><strong>AIä¼˜åŒ–</strong>: æ™ºèƒ½é¢„æµ‹ç”¨æˆ·è¡Œä¸º</li>
<li><strong>è¾¹ç¼˜è®¡ç®—</strong>: åˆ†å¸ƒå¼æ¸²æŸ“</li>
</ol>
<hr>
<p>è¿™ä»½æŒ‡å—ä¸ºç¦»çº¿Cesiumå¼€å‘æä¾›äº†å®Œæ•´çš„å‚è€ƒï¼Œæ¯ä¸ªå±æ€§éƒ½åŒ…å«äº†ä½œç”¨è¯´æ˜ã€é»˜è®¤å€¼ã€ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨æ— ç½‘ç»œç¯å¢ƒä¸‹ä¹Ÿèƒ½é«˜æ•ˆå¼€å‘Cesiumåº”ç”¨ã€‚</p>
<h3 id="æ—¶é—´è½´ä¸åŠ¨ç”»ï¼ˆè¿›é˜¶ç¤ºä¾‹ï¼‰"><a href="#æ—¶é—´è½´ä¸åŠ¨ç”»ï¼ˆè¿›é˜¶ç¤ºä¾‹ï¼‰" class="headerlink" title="æ—¶é—´è½´ä¸åŠ¨ç”»ï¼ˆè¿›é˜¶ç¤ºä¾‹ï¼‰"></a>æ—¶é—´è½´ä¸åŠ¨ç”»ï¼ˆè¿›é˜¶ç¤ºä¾‹ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æ—¶é—´è½´ä¸é€Ÿç‡</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">startTime</span> = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2024-01-01T00:00:00Z&#x27;</span>))</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">stopTime</span> = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2024-01-01T01:00:00Z&#x27;</span>))</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">currentTime</span> = viewer.<span class="property">clock</span>.<span class="property">startTime</span>.<span class="title function_">clone</span>()</span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">clockRange</span> = <span class="title class_">Cesium</span>.<span class="property">ClockRange</span>.<span class="property">LOOP_STOP</span> <span class="comment">// å¾ªç¯</span></span><br><span class="line">viewer.<span class="property">clock</span>.<span class="property">multiplier</span> = <span class="number">10</span> <span class="comment">// æ—¶é—´åŠ é€Ÿ10å€</span></span><br><span class="line">viewer.<span class="property">timeline</span>.<span class="title function_">zoomTo</span>(viewer.<span class="property">clock</span>.<span class="property">startTime</span>, viewer.<span class="property">clock</span>.<span class="property">stopTime</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºäºæ—¶åºå˜åŒ–å®ä½“å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> movingPoint = viewer.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">position</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">CallbackProperty</span>(<span class="function">(<span class="params">time</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> seconds = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">secondsDifference</span>(time, viewer.<span class="property">clock</span>.<span class="property">startTime</span>)</span><br><span class="line">    <span class="keyword">const</span> lon = <span class="number">116.4</span> + seconds * <span class="number">0.0001</span></span><br><span class="line">    <span class="keyword">const</span> lat = <span class="number">39.9</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(lon, lat)</span><br><span class="line">  &#125;, <span class="literal">false</span>),</span><br><span class="line">  <span class="attr">point</span>: &#123; <span class="attr">pixelSize</span>: <span class="number">8</span>, <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">YELLOW</span> &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å‡ ä½•å›¾å…ƒï¼ˆä½çº§-Primitiveï¼‰å®æˆ˜"><a href="#å‡ ä½•å›¾å…ƒï¼ˆä½çº§-Primitiveï¼‰å®æˆ˜" class="headerlink" title="å‡ ä½•å›¾å…ƒï¼ˆä½çº§ Primitiveï¼‰å®æˆ˜"></a>å‡ ä½•å›¾å…ƒï¼ˆä½çº§ Primitiveï¼‰å®æˆ˜</h2><p>å½“ Entity æ•°é‡å·¨å¤§ä¸”æ ·å¼ç»Ÿä¸€æ—¶ï¼Œä½¿ç”¨ Primitive å¯æ˜¾è‘—é™ä½ç®¡ç†å¼€é”€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ GroundPolylinePrimitive æ‰¹é‡ç»˜åˆ¶è´´åœ°çº¿</span></span><br><span class="line"><span class="keyword">await</span> <span class="title class_">Cesium</span>.<span class="property">GroundPolylinePrimitive</span>.<span class="title function_">initializeTerrainHeights</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instances = lines.<span class="title function_">map</span>(</span><br><span class="line">  <span class="function">(<span class="params">l</span>) =&gt;</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GeometryInstance</span>(&#123;</span><br><span class="line">      <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GroundPolylineGeometry</span>(&#123;</span><br><span class="line">        <span class="attr">positions</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegreesArray</span>(l.<span class="title function_">flat</span>()),</span><br><span class="line">        <span class="attr">width</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">arcType</span>: <span class="title class_">Cesium</span>.<span class="property">ArcType</span>.<span class="property">GEODESIC</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> primitive = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">GroundPolylinePrimitive</span>(&#123;</span><br><span class="line">  <span class="attr">geometryInstances</span>: instances,</span><br><span class="line">  <span class="attr">appearance</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PolylineMaterialAppearance</span>(&#123;</span><br><span class="line">    <span class="attr">material</span>: <span class="title class_">Cesium</span>.<span class="property">Material</span>.<span class="title function_">fromType</span>(<span class="string">&#x27;Color&#x27;</span>, &#123; <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">CYAN</span>.<span class="title function_">withAlpha</span>(<span class="number">0.7</span>) &#125;),</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">groundPrimitives</span>.<span class="title function_">add</span>(primitive)</span><br></pre></td></tr></table></figure>

<p>è¦ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨å•ä¸€æè´¨ä¸ç»Ÿä¸€å®½åº¦ï¼Œä¾¿äºåˆå¹¶ã€‚</li>
<li>éœ€è¦è´´åœ°&#x2F;åœ°å½¢æ”¯æŒæ—¶ï¼Œä¼˜å…ˆ GroundPolyline ç³»åˆ—ã€‚</li>
</ul>
<hr>
<h2 id="å±å¹•ç©ºé—´äº‹ä»¶æœ€ä½³å®è·µ"><a href="#å±å¹•ç©ºé—´äº‹ä»¶æœ€ä½³å®è·µ" class="headerlink" title="å±å¹•ç©ºé—´äº‹ä»¶æœ€ä½³å®è·µ"></a>å±å¹•ç©ºé—´äº‹ä»¶æœ€ä½³å®è·µ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// èŠ‚æµ + å‘½ä¸­ç¼“å­˜ï¼Œå‡å°‘ pick é¢‘ç‡</span></span><br><span class="line"><span class="keyword">const</span> handler = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ScreenSpaceEventHandler</span>(viewer.<span class="property">canvas</span>)</span><br><span class="line"><span class="keyword">let</span> lastPickId = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> lastPickTime = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PICK_THROTTLE</span> = <span class="number">16</span> <span class="comment">// ms</span></span><br><span class="line"></span><br><span class="line">handler.<span class="title function_">setInputAction</span>(<span class="function">(<span class="params">movement</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> now = performance.<span class="title function_">now</span>()</span><br><span class="line">  <span class="keyword">if</span> (now - lastPickTime &lt; <span class="variable constant_">PICK_THROTTLE</span>) <span class="keyword">return</span></span><br><span class="line">  lastPickTime = now</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> picked = viewer.<span class="property">scene</span>.<span class="title function_">pick</span>(movement.<span class="property">endPosition</span>)</span><br><span class="line">  <span class="keyword">const</span> id = picked?.<span class="property">id</span> || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">if</span> (id === lastPickId) <span class="keyword">return</span></span><br><span class="line">  lastPickId = id</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–° UI æˆ– Tooltip</span></span><br><span class="line">  <span class="keyword">if</span> (id) &#123;</span><br><span class="line">    <span class="comment">// showTooltip(...)</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// hideTooltip()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">MOUSE_MOVE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…ç†</span></span><br><span class="line"><span class="comment">// handler.destroy()</span></span><br></pre></td></tr></table></figure>

<p>å»ºè®®ï¼š</p>
<ul>
<li>é¼ æ ‡ç§»åŠ¨äº‹ä»¶åˆå¹¶&#x2F;èŠ‚æµï¼Œé¿å…æ¯å¸§ pickã€‚</li>
<li>ä½¿ç”¨ <code>scene.pickPositionSupported</code> åˆ¤æ–­æ˜¯å¦æ”¯æŒæ·±åº¦æ‹¾å–ï¼Œå†å†³å®š <code>pickPosition</code> æ–¹æ¡ˆã€‚</li>
</ul>
<hr>
<h2 id="å¤§è§„æ¨¡å®ä½“ç®¡ç†ç­–ç•¥"><a href="#å¤§è§„æ¨¡å®ä½“ç®¡ç†ç­–ç•¥" class="headerlink" title="å¤§è§„æ¨¡å®ä½“ç®¡ç†ç­–ç•¥"></a>å¤§è§„æ¨¡å®ä½“ç®¡ç†ç­–ç•¥</h2><p>é’ˆå¯¹ 10w+ ç‚¹&#x2F;çº¿ï¼š</p>
<ul>
<li>æ‰¹é‡åˆ›å»ºï¼šå…ˆæ„é€ æ•°ç»„å†ä¸€æ¬¡æ€§ <code>viewer.entities.add(array)</code>ã€‚</li>
<li>åˆ†æ‰¹åŠ è½½ï¼šåˆ‡ç‰‡ï¼ˆç©ºé—´ç½‘æ ¼æˆ–å››å‰æ ‘ï¼‰+ åˆ†æ®µè¯·æ±‚ã€‚</li>
<li>å¯è§æ€§è£å‰ªï¼š<ul>
<li>è·ç¦»é˜ˆå€¼éšè—è¿œå¤„å®ä½“ï¼›</li>
<li>å±å¹•ç©ºé—´å¯†åº¦æ§åˆ¶ï¼ˆæŒ‰åƒç´ å¯†åº¦æŠ½ç¨€ï¼‰ã€‚</li>
</ul>
</li>
<li>é™çº§æ¸²æŸ“ï¼šè¿œè·ç¦»æ”¹ç”¨ Billboards æˆ– Primitiveï¼›è¿‘è·ç¦»å†åˆ‡æ¢è¯¦ç»† Entityã€‚</li>
<li>Worker å¹¶è¡Œï¼šå‡ ä½•è®¡ç®—ã€ç­›é€‰åœ¨ Worker å†…å®Œæˆï¼Œä¸»çº¿ç¨‹ä»…åšç»˜åˆ¶ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šåˆ†æ‰¹+æŠ½ç¨€</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addEntitiesInChunks</span>(<span class="params">data, chunkSize = <span class="number">2000</span></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i += chunkSize) &#123;</span><br><span class="line">    <span class="keyword">const</span> chunk = data.<span class="title function_">slice</span>(i, i + chunkSize)</span><br><span class="line">    <span class="keyword">const</span> batch = chunk.<span class="title function_">map</span>(<span class="function">(<span class="params">d</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(d.<span class="property">lon</span>, d.<span class="property">lat</span>),</span><br><span class="line">      <span class="attr">point</span>: &#123; <span class="attr">pixelSize</span>: <span class="number">6</span>, <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="property">SKYBLUE</span> &#125;,</span><br><span class="line">    &#125;))</span><br><span class="line">    viewer.<span class="property">entities</span>.<span class="title function_">add</span>(batch)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">visibilityCullByDistance</span>(<span class="params">camera, entities, maxDistance = <span class="number">50000</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> camPos = camera.<span class="property">positionWC</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> e <span class="keyword">of</span> entities.<span class="property">values</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> pos = e.<span class="property">position</span>?.<span class="title function_">getValue</span>(viewer.<span class="property">clock</span>.<span class="property">currentTime</span>)</span><br><span class="line">    <span class="keyword">if</span> (!pos) <span class="keyword">continue</span></span><br><span class="line">    e.<span class="property">show</span> = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">distance</span>(camPos, pos) &lt; maxDistance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼šå½“å®ä½“è¾¾åˆ°ç“¶é¢ˆæ—¶ï¼Œè¿ç§»åˆ° Primitiveï¼ˆå¦‚ <code>GroundPolylinePrimitive</code> æˆ– <code>PrimitiveCollection</code>ï¼‰é€šå¸¸æ”¶ç›Šæ›´å¤§ã€‚</p>
<hr>
<h2 id="ğŸ¨-è‡ªå®šä¹‰åå¤„ç†ï¼ˆPostProcessStageï¼‰"><a href="#ğŸ¨-è‡ªå®šä¹‰åå¤„ç†ï¼ˆPostProcessStageï¼‰" class="headerlink" title="ğŸ¨ è‡ªå®šä¹‰åå¤„ç†ï¼ˆPostProcessStageï¼‰"></a>ğŸ¨ è‡ªå®šä¹‰åå¤„ç†ï¼ˆPostProcessStageï¼‰</h2><h3 id="1-å•ä¸€åå¤„ç†é˜¶æ®µï¼ˆEdge-Detect-ç¤ºä¾‹ï¼‰"><a href="#1-å•ä¸€åå¤„ç†é˜¶æ®µï¼ˆEdge-Detect-ç¤ºä¾‹ï¼‰" class="headerlink" title="1) å•ä¸€åå¤„ç†é˜¶æ®µï¼ˆEdge Detect ç¤ºä¾‹ï¼‰"></a>1) å•ä¸€åå¤„ç†é˜¶æ®µï¼ˆEdge Detect ç¤ºä¾‹ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰è¾¹ç¼˜æ£€æµ‹åå¤„ç†ï¼ˆç‰‡å…ƒç€è‰²å™¨ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> edgeFrag = <span class="string">`</span></span><br><span class="line"><span class="string">  uniform sampler2D colorTexture;</span></span><br><span class="line"><span class="string">  uniform vec2 texelStep;</span></span><br><span class="line"><span class="string">  varying vec2 v_textureCoordinates;</span></span><br><span class="line"><span class="string">  void main() &#123;</span></span><br><span class="line"><span class="string">    vec3 tc = texture2D(colorTexture, v_textureCoordinates).rgb;</span></span><br><span class="line"><span class="string">    vec3 tx = texture2D(colorTexture, v_textureCoordinates + vec2(texelStep.x, 0.0)).rgb;</span></span><br><span class="line"><span class="string">    vec3 ty = texture2D(colorTexture, v_textureCoordinates + vec2(0.0, texelStep.y)).rgb;</span></span><br><span class="line"><span class="string">    float diff = length(tc - tx) + length(tc - ty);</span></span><br><span class="line"><span class="string">    float edge = step(0.15, diff);</span></span><br><span class="line"><span class="string">    gl_FragColor = vec4(vec3(edge), 1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> edgeStage = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PostProcessStage</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;edgeStage&#x27;</span>,</span><br><span class="line">  <span class="attr">fragmentShader</span>: edgeFrag,</span><br><span class="line">  <span class="attr">uniforms</span>: &#123;</span><br><span class="line">    <span class="attr">texelStep</span>: <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Cartesian2</span>(<span class="number">1.0</span> / viewer.<span class="property">canvas</span>.<span class="property">width</span>, <span class="number">1.0</span> / viewer.<span class="property">canvas</span>.<span class="property">height</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">postProcessStages</span>.<span class="title function_">add</span>(edgeStage)</span><br><span class="line">edgeStage.<span class="property">enabled</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-ç»„åˆåå¤„ç†ï¼ˆCompositeï¼šBloom-è‡ªå®šä¹‰ï¼‰"><a href="#2-ç»„åˆåå¤„ç†ï¼ˆCompositeï¼šBloom-è‡ªå®šä¹‰ï¼‰" class="headerlink" title="2) ç»„åˆåå¤„ç†ï¼ˆCompositeï¼šBloom + è‡ªå®šä¹‰ï¼‰"></a>2) ç»„åˆåå¤„ç†ï¼ˆCompositeï¼šBloom + è‡ªå®šä¹‰ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bloom = viewer.<span class="property">scene</span>.<span class="property">postProcessStages</span>.<span class="property">bloom</span></span><br><span class="line">bloom.<span class="property">enabled</span> = <span class="literal">true</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">glowOnly</span> = <span class="literal">false</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">contrast</span> = <span class="number">128</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">brightness</span> = -<span class="number">0.3</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">delta</span> = <span class="number">1.0</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">sigma</span> = <span class="number">2.0</span></span><br><span class="line">bloom.<span class="property">uniforms</span>.<span class="property">stepSize</span> = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toneMapFrag = <span class="string">`</span></span><br><span class="line"><span class="string">  uniform sampler2D colorTexture; varying vec2 v_textureCoordinates;</span></span><br><span class="line"><span class="string">  void main()&#123; vec3 col = texture2D(colorTexture, v_textureCoordinates).rgb;</span></span><br><span class="line"><span class="string">    col = col / (col + vec3(1.0)); gl_FragColor = vec4(col, 1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> toneMapStage = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PostProcessStage</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;toneMap&#x27;</span>, <span class="attr">fragmentShader</span>: toneMapFrag &#125;)</span><br><span class="line"><span class="keyword">const</span> composite = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">PostProcessStageComposite</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;customComposite&#x27;</span>,</span><br><span class="line">  <span class="attr">stages</span>: [toneMapStage, bloom],</span><br><span class="line">&#125;)</span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">postProcessStages</span>.<span class="title function_">add</span>(composite)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§ª-Shader-ä¸-czm-å†…ç½®é€ŸæŸ¥ï¼ˆç²¾é€‰ï¼‰"><a href="#ğŸ§ª-Shader-ä¸-czm-å†…ç½®é€ŸæŸ¥ï¼ˆç²¾é€‰ï¼‰" class="headerlink" title="ğŸ§ª Shader ä¸ czm å†…ç½®é€ŸæŸ¥ï¼ˆç²¾é€‰ï¼‰"></a>ğŸ§ª Shader ä¸ czm å†…ç½®é€ŸæŸ¥ï¼ˆç²¾é€‰ï¼‰</h2><ul>
<li>czm å†…ç½®ï¼š<code>czm_frameNumber</code>, <code>czm_pixelRatio</code>, <code>czm_model/view/projection</code>, <code>czm_inverseViewProjection</code>, <code>czm_eyePosition</code>, <code>czm_geodeticSurfaceNormal</code>, <code>czm_unpackDepth</code>, <code>czm_morphTime</code></li>
<li>Fabric æç¤ºï¼šçº¹ç†ç”¨ <code>sampler2D</code>ï¼Œæ—¶é—´é©±åŠ¨ç»Ÿä¸€ç”¨ <code>czm_frameNumber</code> æˆ– <code>time</code>ï¼Œé€æ˜è®¾ç½® <code>translucent</code></li>
</ul>
<hr>
<h2 id="â›°ï¸-åœ°å½¢-é˜´å½±-é€æ˜åº¦-æ’åºé¿å‘"><a href="#â›°ï¸-åœ°å½¢-é˜´å½±-é€æ˜åº¦-æ’åºé¿å‘" class="headerlink" title="â›°ï¸ åœ°å½¢ &#x2F; é˜´å½± &#x2F; é€æ˜åº¦ æ’åºé¿å‘"></a>â›°ï¸ åœ°å½¢ &#x2F; é˜´å½± &#x2F; é€æ˜åº¦ æ’åºé¿å‘</h2><ul>
<li>è´´åœ°åˆå§‹åŒ–ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="title class_">Cesium</span>.<span class="property">GroundPolylinePrimitive</span>.<span class="title function_">initializeTerrainHeights</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>é€æ˜æ’åºï¼šå°½é‡åˆå¹¶ã€å‡å°‘é‡å ï¼›å¿…è¦æ—¶å…³é—­éƒ¨åˆ†æ·±åº¦æµ‹è¯•æˆ–è°ƒæ•´é¡ºåºï¼›å¯å°è¯• <code>viewer.scene.orderIndependentTranslucency</code>ã€‚</li>
<li>é˜´å½±ï¼š<code>viewer.shadows = true</code>ï¼›ç»†åŒ–åˆ°å®ä½“ <code>ShadowMode</code> æ§åˆ¶ã€‚</li>
</ul>
<hr>
<h2 id="ğŸ§°-æ›´å¤šå®è·µå»ºè®®"><a href="#ğŸ§°-æ›´å¤šå®è·µå»ºè®®" class="headerlink" title="ğŸ§° æ›´å¤šå®è·µå»ºè®®"></a>ğŸ§° æ›´å¤šå®è·µå»ºè®®</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewer.<span class="property">scene</span>.<span class="property">requestRenderMode</span> = <span class="literal">true</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="property">maximumRenderTimeChange</span> = <span class="number">0.0</span></span><br><span class="line">viewer.<span class="property">scene</span>.<span class="title function_">requestRender</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤§æ•°æ®ä¼˜å…ˆçº§ï¼šPrimitive &gt; æ‰¹é‡ Entityï¼ˆåˆ†æ‰¹+è£å‰ªï¼‰ &gt; LODï¼ˆè¿œ Billboardsã€è¿‘ç»†èŠ‚ï¼‰</li>
<li>äº‹ä»¶èŠ‚æµä¸æ‹¾å–å›é€€ï¼›Worker åšå‡ ä½•ä¸ç­›é€‰ï¼Œä¸»çº¿ç¨‹ç»˜åˆ¶ã€‚</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://aoayaoa.github.io">aoaYaoa</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://aoayaoa.github.io/2025/07/31/cesium/">https://aoayaoa.github.io/2025/07/31/cesium/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://aoayaoa.github.io" target="_blank">aoaYaoa</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Cesium/">Cesium</a><a class="post-meta__tags" href="/tags/%E4%B8%89%E7%BB%B4GIS/">ä¸‰ç»´GIS</a></div><div class="post-share"><div class="social-share" data-image="/img/cesium.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/31/babylonjs/" title="BabylonJS"><img class="cover" src="/img/babylonjs.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">BabylonJS</div></div><div class="info-2"><div class="info-item-1">BabylonJS å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—ğŸ“‹ ç›®å½• BabylonJS å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å— ğŸ“‹ ç›®å½• ğŸš€ BabylonJS ç®€ä»‹ ğŸ’» ç¦»çº¿ç¯å¢ƒé…ç½® ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ ğŸ¬ Engine å¼•æ“è¯¦è§£ ğŸ­ Scene åœºæ™¯è¯¦è§£ ğŸ“· Camera ç›¸æœºç³»ç»Ÿè¯¦è§£ ğŸ’¡ Light å…‰ç…§ç³»ç»Ÿè¯¦è§£ ğŸ¨ Material æè´¨ç³»ç»Ÿè¯¦è§£ ğŸ­ Mesh ç½‘æ ¼ç³»ç»Ÿè¯¦è§£ ğŸ¬ Animation åŠ¨ç”»ç³»ç»Ÿè¯¦è§£ ğŸ† ParticleSystem ç²’å­ç³»ç»Ÿè¯¦è§£ ğŸ”Š Audio éŸ³é¢‘ç³»ç»Ÿè¯¦è§£ ğŸ® Input è¾“å…¥ç³»ç»Ÿè¯¦è§£ ğŸ”§ Asset èµ„æºç®¡ç†è¯¦è§£ âš¡ Performance æ€§èƒ½ä¼˜åŒ–è¯¦è§£ ğŸ¤...</div></div></div></a><a class="pagination-related" href="/2025/07/31/mars3d/" title="mars3D å¼€å‘æ–‡æ¡£"><img class="cover" src="/img/mars3d.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">mars3D å¼€å‘æ–‡æ¡£</div></div><div class="info-2"><div class="info-item-1">Mars3D å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—ğŸ“‹ ç›®å½• ç¦»çº¿ç¯å¢ƒé…ç½® Map è¯¦ç»†é…ç½® åæ ‡ç³»ç»Ÿè¯¦è§£ å›¾å±‚ç³»ç»Ÿå®Œæ•´å±æ€§ çŸ¢é‡æ•°æ®è¯¦è§£ ä¸‰ç»´æ¨¡å‹è¯¦è§£ ç›¸æœºæ§åˆ¶å®Œæ•´å±æ€§ äº‹ä»¶ç³»ç»Ÿè¯¦è§£ æè´¨ç³»ç»Ÿè¯¦è§£ åŠ¨ç”»ç³»ç»Ÿè¯¦è§£ åˆ†æåŠŸèƒ½è¯¦è§£ æ§ä»¶ç³»ç»Ÿè¯¦è§£ ç»˜åˆ¶åŠŸèƒ½è¯¦è§£  ç¦»çº¿ç¯å¢ƒé…ç½®å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½12345678910111213141516# 1. ä¸‹è½½Mars3Då®Œæ•´åŒ…wget https://github.com/marsgis/mars3d/releases/latest/mars3d.zip# 2. è§£å‹åˆ°é¡¹ç›®ç›®å½•unzip mars3d.zip -d public/mars3d/# 3....</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/07/31/mars3d/" title="mars3D å¼€å‘æ–‡æ¡£"><img class="cover" src="/img/mars3d.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-31</div><div class="info-item-2">mars3D å¼€å‘æ–‡æ¡£</div></div><div class="info-2"><div class="info-item-1">Mars3D å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—ğŸ“‹ ç›®å½• ç¦»çº¿ç¯å¢ƒé…ç½® Map è¯¦ç»†é…ç½® åæ ‡ç³»ç»Ÿè¯¦è§£ å›¾å±‚ç³»ç»Ÿå®Œæ•´å±æ€§ çŸ¢é‡æ•°æ®è¯¦è§£ ä¸‰ç»´æ¨¡å‹è¯¦è§£ ç›¸æœºæ§åˆ¶å®Œæ•´å±æ€§ äº‹ä»¶ç³»ç»Ÿè¯¦è§£ æè´¨ç³»ç»Ÿè¯¦è§£ åŠ¨ç”»ç³»ç»Ÿè¯¦è§£ åˆ†æåŠŸèƒ½è¯¦è§£ æ§ä»¶ç³»ç»Ÿè¯¦è§£ ç»˜åˆ¶åŠŸèƒ½è¯¦è§£  ç¦»çº¿ç¯å¢ƒé…ç½®å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½12345678910111213141516# 1. ä¸‹è½½Mars3Då®Œæ•´åŒ…wget https://github.com/marsgis/mars3d/releases/latest/mars3d.zip# 2. è§£å‹åˆ°é¡¹ç›®ç›®å½•unzip mars3d.zip -d public/mars3d/# 3....</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">aoaYaoa</div><div class="author-info-description">ä¸ªäººåšå®¢ï¼Œè®°å½•æˆé•¿ç‚¹æ»´...</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/aoaYaoa"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/aoaYaoa" rel="external nofollow noreferrer" target="_blank" title="GitHub"><i class="fab fa-github" style="color: #181717;"></i></a><a class="social-icon" href="https://twitter.com/yourname" rel="external nofollow noreferrer" target="_blank" title="Twitter"><i class="fab fa-twitter" style="color: #1DA1F2;"></i></a><a class="social-icon" href="mailto:skyeeq9@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #EA4335;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ç®—äº†ï¼Œä¸çŸ¥é“å†™ä»€ä¹ˆï¼Œå°±è¿™æ ·å§ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Cesium-%E5%AE%8C%E6%95%B4%E7%A6%BB%E7%BA%BF%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97"><span class="toc-number">1.</span> <span class="toc-text">Cesium å®Œæ•´ç¦»çº¿å¼€å‘æŒ‡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%8B-%E7%9B%AE%E5%BD%95"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ“‹ ç›®å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A6%BB%E7%BA%BF%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">ç¦»çº¿ç¯å¢ƒé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%A6%BB%E7%BA%BF%E5%8C%85%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.2.1.</span> <span class="toc-text">å®Œæ•´ç¦»çº¿åŒ…ä¸‹è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vite%E7%A6%BB%E7%BA%BF%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.2.</span> <span class="toc-text">Viteç¦»çº¿é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%BB%E7%BA%BF%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.3.</span> <span class="toc-text">ç¦»çº¿åˆå§‹åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewer-%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">Viewer è¯¦ç»†é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%AE%8C%E6%95%B4%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">æ„é€ å‡½æ•°å®Œæ•´å‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.4.</span> <span class="toc-text">åæ ‡ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cartesian3-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">1.4.1.</span> <span class="toc-text">Cartesian3 ç¬›å¡å°”åæ ‡ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cartographic-%E5%9C%B0%E7%90%86%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">1.4.2.</span> <span class="toc-text">Cartographic åœ°ç†åæ ‡ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Matrix4-%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5"><span class="toc-number">1.4.3.</span> <span class="toc-text">Matrix4 å˜æ¢çŸ©é˜µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.</span> <span class="toc-text">å®ä½“ç³»ç»Ÿå®Œæ•´å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Entity-%E5%9F%BA%E7%A1%80%E5%AE%9E%E4%BD%93"><span class="toc-number">1.5.1.</span> <span class="toc-text">Entity åŸºç¡€å®ä½“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BillboardGraphics-%E5%B9%BF%E5%91%8A%E7%89%8C%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.2.</span> <span class="toc-text">BillboardGraphics å¹¿å‘Šç‰Œå›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PointGraphics-%E7%82%B9%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.3.</span> <span class="toc-text">PointGraphics ç‚¹å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LabelGraphics-%E6%A0%87%E7%AD%BE%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.4.</span> <span class="toc-text">LabelGraphics æ ‡ç­¾å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PolylineGraphics-%E5%A4%9A%E6%AE%B5%E7%BA%BF%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.5.</span> <span class="toc-text">PolylineGraphics å¤šæ®µçº¿å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PolygonGraphics-%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.6.</span> <span class="toc-text">PolygonGraphics å¤šè¾¹å½¢å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ModelGraphics-3D%E6%A8%A1%E5%9E%8B%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.7.</span> <span class="toc-text">ModelGraphics 3Dæ¨¡å‹å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BoxGraphics-%E7%9B%92%E5%AD%90%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.8.</span> <span class="toc-text">BoxGraphics ç›’å­å›¾å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CylinderGraphics-%E5%9C%86%E6%9F%B1%E4%BD%93%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.9.</span> <span class="toc-text">CylinderGraphics åœ†æŸ±ä½“å›¾å½¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%BD%A2%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.6.</span> <span class="toc-text">åœ°å½¢ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TerrainProvider-%E5%9C%B0%E5%BD%A2%E6%8F%90%E4%BE%9B%E8%80%85"><span class="toc-number">1.6.1.</span> <span class="toc-text">TerrainProvider åœ°å½¢æä¾›è€…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E5%B1%9E%E6%80%A7"><span class="toc-number">1.7.</span> <span class="toc-text">ç›¸æœºç³»ç»Ÿå®Œæ•´å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Camera-%E7%9B%B8%E6%9C%BA%E7%B1%BB"><span class="toc-number">1.7.1.</span> <span class="toc-text">Camera ç›¸æœºç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.8.</span> <span class="toc-text">äº‹ä»¶ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScreenSpaceEventHandler-%E5%B1%8F%E5%B9%95%E7%A9%BA%E9%97%B4%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">1.8.1.</span> <span class="toc-text">ScreenSpaceEventHandler å±å¹•ç©ºé—´äº‹ä»¶å¤„ç†å™¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%90%E8%B4%A8%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.9.</span> <span class="toc-text">æè´¨ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Material-%E6%9D%90%E8%B4%A8%E7%B1%BB"><span class="toc-number">1.9.1.</span> <span class="toc-text">Material æè´¨ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.10.</span> <span class="toc-text">åŠ¨ç”»ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Animation-%E5%8A%A8%E7%94%BB"><span class="toc-number">1.10.1.</span> <span class="toc-text">Animation åŠ¨ç”»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E4%BD%93%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.11.</span> <span class="toc-text">å‡ ä½•ä½“ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Primitive-%E5%9B%BE%E5%85%83"><span class="toc-number">1.11.1.</span> <span class="toc-text">Primitive å›¾å…ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E6%8E%A7%E5%88%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.12.</span> <span class="toc-text">åœºæ™¯æ§åˆ¶è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Scene-%E5%9C%BA%E6%99%AF%E7%B1%BB"><span class="toc-number">1.12.1.</span> <span class="toc-text">Scene åœºæ™¯ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.13.</span> <span class="toc-text">æ•°æ®æºè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DataSource-%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.13.1.</span> <span class="toc-text">DataSource æ•°æ®æº</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.14.</span> <span class="toc-text">æ—¶é—´ç³»ç»Ÿè¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JulianDate-%E5%84%92%E7%95%A5%E6%97%A5%E6%9C%9F"><span class="toc-number">1.14.1.</span> <span class="toc-text">JulianDate å„’ç•¥æ—¥æœŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.15.</span> <span class="toc-text">ç»˜åˆ¶åŠŸèƒ½è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E5%B7%A5%E5%85%B7%E5%9F%BA%E7%B1%BB"><span class="toc-number">1.15.1.</span> <span class="toc-text">ç»˜åˆ¶å·¥å…·åŸºç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">1.15.2.</span> <span class="toc-text">ç»˜åˆ¶ç®¡ç†å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E5%B7%A5%E5%85%B7%E6%A0%8F"><span class="toc-number">1.15.3.</span> <span class="toc-text">ç»˜åˆ¶å·¥å…·æ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9A%A1-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.16.</span> <span class="toc-text">âš¡ æ€§èƒ½ä¼˜åŒ–è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-%E7%9B%AE%E5%BD%95-1"><span class="toc-number">1.16.1.</span> <span class="toc-text">ğŸ“‹ ç›®å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.2.</span> <span class="toc-text">ğŸ¯ æ¸²æŸ“ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8C%89%E9%9C%80%E6%B8%B2%E6%9F%93-On-Demand-Rendering"><span class="toc-number">1.16.2.1.</span> <span class="toc-text">1. æŒ‰éœ€æ¸²æŸ“ (On-Demand Rendering)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-LOD-Level-of-Detail-%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.2.2.</span> <span class="toc-text">2. LOD (Level of Detail) ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%9E%E4%BD%93%E4%BC%98%E5%8C%96-Entity-Optimization"><span class="toc-number">1.16.2.3.</span> <span class="toc-text">3. å®ä½“ä¼˜åŒ– (Entity Optimization)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%81%9A%E7%B1%BB%E4%BC%98%E5%8C%96-Clustering"><span class="toc-number">1.16.2.4.</span> <span class="toc-text">4. èšç±»ä¼˜åŒ– (Clustering)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9D%90%E8%B4%A8%E4%BC%98%E5%8C%96-Material-Optimization"><span class="toc-number">1.16.2.5.</span> <span class="toc-text">5. æè´¨ä¼˜åŒ– (Material Optimization)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96-Model-Optimization"><span class="toc-number">1.16.2.6.</span> <span class="toc-text">6. æ¨¡å‹ä¼˜åŒ– (Model Optimization)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%BE-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.16.3.</span> <span class="toc-text">ğŸ’¾ å†…å­˜ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%B5%84%E6%BA%90%E6%B8%85%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">1.16.3.1.</span> <span class="toc-text">1. èµ„æºæ¸…ç†æœºåˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7"><span class="toc-number">1.16.3.2.</span> <span class="toc-text">2. å†…å­˜ç›‘æ§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AE-%E4%BA%8B%E4%BB%B6%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.4.</span> <span class="toc-text">ğŸ® äº‹ä»¶ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8B%E4%BB%B6%E8%8A%82%E6%B5%81-Event-Throttling"><span class="toc-number">1.16.4.1.</span> <span class="toc-text">1. äº‹ä»¶èŠ‚æµ (Event Throttling)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98-Event-Delegation"><span class="toc-number">1.16.4.2.</span> <span class="toc-text">2. äº‹ä»¶å§”æ‰˜ (Event Delegation)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E6%82%AC%E5%81%9C%E4%BA%8B%E4%BB%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.5.</span> <span class="toc-text">ğŸ¯ æ‚¬åœäº‹ä»¶æ€§èƒ½ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%93%8A-%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">1.16.5.1.</span> <span class="toc-text">ğŸ“Š é—®é¢˜åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%9A%80-%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.16.5.2.</span> <span class="toc-text">ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆå®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%8A%82%E6%B5%81%E6%9C%BA%E5%88%B6-Throttling"><span class="toc-number">1.16.5.2.1.</span> <span class="toc-text">1. èŠ‚æµæœºåˆ¶ (Throttling)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6-Caching"><span class="toc-number">1.16.5.2.2.</span> <span class="toc-text">2. ç¼“å­˜æœºåˆ¶ (Caching)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.16.5.2.3.</span> <span class="toc-text">3. æ€§èƒ½ç›‘æ§ç³»ç»Ÿ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E8%B0%83%E6%95%B4%E7%AD%96%E7%95%A5"><span class="toc-number">1.16.5.3.</span> <span class="toc-text">4. åŠ¨æ€è°ƒæ•´ç­–ç•¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E5%AF%B9%E6%AF%94"><span class="toc-number">1.16.6.</span> <span class="toc-text">æ€§èƒ½æ•°æ®å¯¹æ¯”</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">1.16.6.1.</span> <span class="toc-text">æµ‹è¯•ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%89%8D%E5%90%8E%E5%AF%B9%E6%AF%94"><span class="toc-number">1.16.6.2.</span> <span class="toc-text">ä¼˜åŒ–å‰åå¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE"><span class="toc-number">1.16.6.3.</span> <span class="toc-text">è¯¦ç»†æ€§èƒ½æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%95%88%E6%9E%9C"><span class="toc-number">1.16.7.</span> <span class="toc-text">å®é™…åº”ç”¨æ•ˆæœ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%E6%94%B9%E5%96%84"><span class="toc-number">1.16.7.1.</span> <span class="toc-text">ç”¨æˆ·ä½“éªŒæ”¹å–„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87"><span class="toc-number">1.16.7.2.</span> <span class="toc-text">æ€§èƒ½æå‡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.16.8.</span> <span class="toc-text">é…ç½®å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.16.9.</span> <span class="toc-text">ä½¿ç”¨å»ºè®®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">1.16.9.1.</span> <span class="toc-text">å¼€å‘ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83"><span class="toc-number">1.16.9.2.</span> <span class="toc-text">ç”Ÿäº§ç¯å¢ƒ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.16.10.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BC%93%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.16.10.1.</span> <span class="toc-text">1. ç¼“å­˜ç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%80%A7%E8%83%BD%E5%B9%B3%E8%A1%A1"><span class="toc-number">1.16.10.2.</span> <span class="toc-text">2. æ€§èƒ½å¹³è¡¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A8%A1%E5%9D%97%E4%BE%9D%E8%B5%96"><span class="toc-number">1.16.10.3.</span> <span class="toc-text">3. æ¨¡å—ä¾èµ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%98%88%E5%80%BC%E8%B0%83%E6%95%B4"><span class="toc-number">1.16.10.4.</span> <span class="toc-text">4. é˜ˆå€¼è°ƒæ•´</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AA%E6%9D%A5%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91"><span class="toc-number">1.16.11.</span> <span class="toc-text">æœªæ¥ä¼˜åŒ–æ–¹å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-LOD%E7%AE%A1%E7%90%86"><span class="toc-number">1.16.11.1.</span> <span class="toc-text">1. LODç®¡ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%81%9A%E7%B1%BB%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.11.2.</span> <span class="toc-text">2. èšç±»ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Web-Workers"><span class="toc-number">1.16.11.3.</span> <span class="toc-text">3. Web Workers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%99%9A%E6%8B%9F%E5%8C%96"><span class="toc-number">1.16.11.4.</span> <span class="toc-text">4. è™šæ‹ŸåŒ–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.16.12.</span> <span class="toc-text">æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-WebWorker-%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.12.1.</span> <span class="toc-text">2. WebWorker ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%A7%86%E5%8F%A3%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.12.2.</span> <span class="toc-text">3. è§†å£ä¼˜åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9A-%E6%80%BB%E7%BB%93"><span class="toc-number">1.17.</span> <span class="toc-text">ğŸ“š æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9A-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93"><span class="toc-number">1.17.1.</span> <span class="toc-text">ğŸ“š æœ€ä½³å®è·µæ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%8E%AF-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%8E%9F%E5%88%99"><span class="toc-number">1.17.1.1.</span> <span class="toc-text">ğŸ¯ æ€§èƒ½ä¼˜åŒ–åŸåˆ™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%93%8A-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87"><span class="toc-number">1.17.1.2.</span> <span class="toc-text">ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%A7-%E9%85%8D%E7%BD%AE%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.17.1.3.</span> <span class="toc-text">ğŸ”§ é…ç½®å»ºè®®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%9A%80-%E5%BC%80%E5%8F%91%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.17.1.4.</span> <span class="toc-text">ğŸš€ å¼€å‘å»ºè®®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.17.1.5.</span> <span class="toc-text">âš ï¸ æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%94%AE-%E6%9C%AA%E6%9D%A5%E5%8F%91%E5%B1%95%E6%96%B9%E5%90%91"><span class="toc-number">1.17.1.6.</span> <span class="toc-text">ğŸ”® æœªæ¥å‘å±•æ–¹å‘</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%BD%B4%E4%B8%8E%E5%8A%A8%E7%94%BB%EF%BC%88%E8%BF%9B%E9%98%B6%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">1.17.2.</span> <span class="toc-text">æ—¶é—´è½´ä¸åŠ¨ç”»ï¼ˆè¿›é˜¶ç¤ºä¾‹ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%A0%E4%BD%95%E5%9B%BE%E5%85%83%EF%BC%88%E4%BD%8E%E7%BA%A7-Primitive%EF%BC%89%E5%AE%9E%E6%88%98"><span class="toc-number">1.18.</span> <span class="toc-text">å‡ ä½•å›¾å…ƒï¼ˆä½çº§ Primitiveï¼‰å®æˆ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%8F%E5%B9%95%E7%A9%BA%E9%97%B4%E4%BA%8B%E4%BB%B6%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.19.</span> <span class="toc-text">å±å¹•ç©ºé—´äº‹ä»¶æœ€ä½³å®è·µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%AE%9E%E4%BD%93%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5"><span class="toc-number">1.20.</span> <span class="toc-text">å¤§è§„æ¨¡å®ä½“ç®¡ç†ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8E%A8-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%8E%E5%A4%84%E7%90%86%EF%BC%88PostProcessStage%EF%BC%89"><span class="toc-number">1.21.</span> <span class="toc-text">ğŸ¨ è‡ªå®šä¹‰åå¤„ç†ï¼ˆPostProcessStageï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%95%E4%B8%80%E5%90%8E%E5%A4%84%E7%90%86%E9%98%B6%E6%AE%B5%EF%BC%88Edge-Detect-%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">1.21.1.</span> <span class="toc-text">1) å•ä¸€åå¤„ç†é˜¶æ®µï¼ˆEdge Detect ç¤ºä¾‹ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%84%E5%90%88%E5%90%8E%E5%A4%84%E7%90%86%EF%BC%88Composite%EF%BC%9ABloom-%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BC%89"><span class="toc-number">1.21.2.</span> <span class="toc-text">2) ç»„åˆåå¤„ç†ï¼ˆCompositeï¼šBloom + è‡ªå®šä¹‰ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%AA-Shader-%E4%B8%8E-czm-%E5%86%85%E7%BD%AE%E9%80%9F%E6%9F%A5%EF%BC%88%E7%B2%BE%E9%80%89%EF%BC%89"><span class="toc-number">1.22.</span> <span class="toc-text">ğŸ§ª Shader ä¸ czm å†…ç½®é€ŸæŸ¥ï¼ˆç²¾é€‰ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9B%B0%EF%B8%8F-%E5%9C%B0%E5%BD%A2-%E9%98%B4%E5%BD%B1-%E9%80%8F%E6%98%8E%E5%BA%A6-%E6%8E%92%E5%BA%8F%E9%81%BF%E5%9D%91"><span class="toc-number">1.23.</span> <span class="toc-text">â›°ï¸ åœ°å½¢ &#x2F; é˜´å½± &#x2F; é€æ˜åº¦ æ’åºé¿å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A7%B0-%E6%9B%B4%E5%A4%9A%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.24.</span> <span class="toc-text">ğŸ§° æ›´å¤šå®è·µå»ºè®®</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/31/babylonjs/" title="BabylonJS"><img src="/img/babylonjs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BabylonJS"/></a><div class="content"><a class="title" href="/2025/07/31/babylonjs/" title="BabylonJS">BabylonJS</a><time datetime="2025-07-30T16:00:00.000Z" title="å‘è¡¨äº 2025-07-31 00:00:00">2025-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/31/cesium/" title="Cesium å¼€å‘æ–‡æ¡£"><img src="/img/cesium.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cesium å¼€å‘æ–‡æ¡£"/></a><div class="content"><a class="title" href="/2025/07/31/cesium/" title="Cesium å¼€å‘æ–‡æ¡£">Cesium å¼€å‘æ–‡æ¡£</a><time datetime="2025-07-30T16:00:00.000Z" title="å‘è¡¨äº 2025-07-31 00:00:00">2025-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/31/mars3d/" title="mars3D å¼€å‘æ–‡æ¡£"><img src="/img/mars3d.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mars3D å¼€å‘æ–‡æ¡£"/></a><div class="content"><a class="title" href="/2025/07/31/mars3d/" title="mars3D å¼€å‘æ–‡æ¡£">mars3D å¼€å‘æ–‡æ¡£</a><time datetime="2025-07-30T16:00:00.000Z" title="å‘è¡¨äº 2025-07-31 00:00:00">2025-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/25/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" title="Goè¯­è¨€å­¦ä¹ æ€»ç»“"><img src="/img/go.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Goè¯­è¨€å­¦ä¹ æ€»ç»“"/></a><div class="content"><a class="title" href="/2025/04/25/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" title="Goè¯­è¨€å­¦ä¹ æ€»ç»“">Goè¯­è¨€å­¦ä¹ æ€»ç»“</a><time datetime="2025-04-24T16:00:00.000Z" title="å‘è¡¨äº 2025-04-25 00:00:00">2025-04-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/15/deno%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="Denoå­¦ä¹ è®°å½•"><img src="/img/deno.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Denoå­¦ä¹ è®°å½•"/></a><div class="content"><a class="title" href="/2025/04/15/deno%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="Denoå­¦ä¹ è®°å½•">Denoå­¦ä¹ è®°å½•</a><time datetime="2025-04-14T16:00:00.000Z" title="å‘è¡¨äº 2025-04-15 00:00:00">2025-04-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By aoaYaoa</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.4</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoogo.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoogo.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><div class="aplayer no-destroy" data-id="13528716738" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,è‡ªç”±,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true 
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« ..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>